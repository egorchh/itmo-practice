import{r as Vo,a as Bt,b as zo,R as Bo,c as S,M as st,j as m,d as Fo,P as ne,e as Oe,f as Ft,n as Ot,X as Oo,h as Le,i as Ho,k as Ht,l as Tt,m as To,o as rt,p as it,q as ct,s as Zo,t as Wo,u as Zt,S as He,v as ae,w as Wt,x as Yo,y as Se,z as Yt,A as Xo,B as qo,C as at,D as Xt,E as de,F as dt,G as ve,H as Te,I as Ze,J as qt,K as We,L as Gt,N as Kt,O as lt,Q as Ut,T as Go,U as Ko,V as Uo,W as Qo,Y as Ye,Z as Jo,_ as Qt,$ as es,a0 as ts,a1 as ns,a2 as os,a3 as Jt,a4 as ss,a5 as Ge,a6 as rs,a7 as Xe,a8 as en,a9 as is,aa as cs,ab as as,ac as tn,ad as ds,ae as ls,af as us}from"./index-C9OGUwoX.js";Vo();function ee(e){if(typeof e=="string"||typeof e=="number")return""+e;let t="";if(Array.isArray(e))for(let n=0,o;n<e.length;n++)(o=ee(e[n]))!==""&&(t+=(t&&" ")+o);else for(let n in e)e[n]&&(t+=(t&&" ")+n);return t}var $e={exports:{}},Re={},Ve={exports:{}},ze={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ut;function fs(){if(ut)return ze;ut=1;var e=Bt();function t(s,r){return s===r&&(s!==0||1/s===1/r)||s!==s&&r!==r}var n=typeof Object.is=="function"?Object.is:t,o=e.useState,c=e.useEffect,i=e.useLayoutEffect,l=e.useDebugValue;function f(s,r){var a=r(),d=o({inst:{value:a,getSnapshot:r}}),u=d[0].inst,y=d[1];return i(function(){u.value=a,u.getSnapshot=r,g(u)&&y({inst:u})},[s,a,r]),c(function(){return g(u)&&y({inst:u}),s(function(){g(u)&&y({inst:u})})},[s]),l(a),a}function g(s){var r=s.getSnapshot;s=s.value;try{var a=r();return!n(s,a)}catch{return!0}}function p(s,r){return r()}var h=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?p:f;return ze.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:h,ze}var ft;function gs(){return ft||(ft=1,Ve.exports=fs()),Ve.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gt;function ps(){if(gt)return Re;gt=1;var e=Bt(),t=gs();function n(p,h){return p===h&&(p!==0||1/p===1/h)||p!==p&&h!==h}var o=typeof Object.is=="function"?Object.is:n,c=t.useSyncExternalStore,i=e.useRef,l=e.useEffect,f=e.useMemo,g=e.useDebugValue;return Re.useSyncExternalStoreWithSelector=function(p,h,s,r,a){var d=i(null);if(d.current===null){var u={hasValue:!1,value:null};d.current=u}else u=d.current;d=f(function(){function w(C){if(!E){if(E=!0,x=C,C=r(C),a!==void 0&&u.hasValue){var k=u.value;if(a(k,C))return v=k}return v=C}if(k=v,o(x,C))return k;var M=r(C);return a!==void 0&&a(k,M)?k:(x=C,v=M)}var E=!1,x,v,b=s===void 0?null:s;return[function(){return w(h())},b===null?void 0:function(){return w(b())}]},[h,s,r,a]);var y=c(p,d[0],d[1]);return l(function(){u.hasValue=!0,u.value=y},[y]),g(y),y},Re}var pt;function hs(){return pt||(pt=1,$e.exports=ps()),$e.exports}var ms=hs();const ws=zo(ms),xs={BASE_URL:"/itmo-practice/",DEV:!1,MODE:"production",PROD:!0,SSR:!1},ht=e=>{let t;const n=new Set,o=(h,s)=>{const r=typeof h=="function"?h(t):h;if(!Object.is(r,t)){const a=t;t=s??(typeof r!="object"||r===null)?r:Object.assign({},t,r),n.forEach(d=>d(t,a))}},c=()=>t,g={setState:o,getState:c,getInitialState:()=>p,subscribe:h=>(n.add(h),()=>n.delete(h)),destroy:()=>{(xs?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},p=t=e(o,c,g);return g},ys=e=>e?ht(e):ht,{useDebugValue:Ss}=Bo,{useSyncExternalStoreWithSelector:vs}=ws,Es=e=>e;function nn(e,t=Es,n){const o=vs(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return Ss(o),o}const mt=(e,t)=>{const n=ys(e),o=(c,i=t)=>nn(n,c,i);return Object.assign(o,n),o},bs=(e,t)=>e?mt(e,t):mt;function U(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[o,c]of e)if(!Object.is(c,t.get(o)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const o of e)if(!t.has(o))return!1;return!0}const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(const o of n)if(!Object.prototype.hasOwnProperty.call(t,o)||!Object.is(e[o],t[o]))return!1;return!0}const Ne=S.createContext(null),Ns=Ne.Provider,on=ae.error001();function F(e,t){const n=S.useContext(Ne);if(n===null)throw new Error(on);return nn(n,e,t)}function X(){const e=S.useContext(Ne);if(e===null)throw new Error(on);return S.useMemo(()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe}),[e])}const wt={display:"none"},Cs={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},sn="react-flow__node-desc",rn="react-flow__edge-desc",ks="react-flow__aria-live",_s=e=>e.ariaLiveMessage;function Is({rfId:e}){const t=F(_s);return m.jsx("div",{id:`${ks}-${e}`,"aria-live":"assertive","aria-atomic":"true",style:Cs,children:t})}function Ms({rfId:e,disableKeyboardA11y:t}){return m.jsxs(m.Fragment,{children:[m.jsxs("div",{id:`${sn}-${e}`,style:wt,children:["Press enter or space to select a node.",!t&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "]}),m.jsx("div",{id:`${rn}-${e}`,style:wt,children:"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."}),!t&&m.jsx(Is,{rfId:e})]})}const Ps=e=>e.userSelectionActive?"none":"all";function Ke({position:e="top-left",children:t,className:n,style:o,...c}){const i=F(Ps),l=`${e}`.split("-");return m.jsx("div",{className:ee(["react-flow__panel",n,...l]),style:{...o,pointerEvents:i},...c,children:t})}function js({proOptions:e,position:t="bottom-right"}){return e!=null&&e.hideAttribution?null:m.jsx(Ke,{position:t,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://pro.reactflow.dev",children:m.jsx("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution",children:"React Flow"})})}const Ds=e=>{const t=[],n=[];for(const[,o]of e.nodeLookup)o.selected&&t.push(o.internals.userNode);for(const[,o]of e.edgeLookup)o.selected&&n.push(o);return{selectedNodes:t,selectedEdges:n}},xe=e=>e.id;function As(e,t){return U(e.selectedNodes.map(xe),t.selectedNodes.map(xe))&&U(e.selectedEdges.map(xe),t.selectedEdges.map(xe))}function Ls({onSelectionChange:e}){const t=X(),{selectedNodes:n,selectedEdges:o}=F(Ds,As);return S.useEffect(()=>{const c={nodes:n,edges:o};e==null||e(c),t.getState().onSelectionChangeHandlers.forEach(i=>i(c))},[n,o,e]),null}const $s=e=>!!e.onSelectionChangeHandlers;function Rs({onSelectionChange:e}){const t=F($s);return e||t?m.jsx(Ls,{onSelectionChange:e}):null}const cn=[0,0],Vs={x:0,y:0,zoom:1},zs=["nodes","edges","defaultNodes","defaultEdges","onConnect","onConnectStart","onConnectEnd","onClickConnectStart","onClickConnectEnd","nodesDraggable","nodesConnectable","nodesFocusable","edgesFocusable","edgesReconnectable","elevateNodesOnSelect","elevateEdgesOnSelect","minZoom","maxZoom","nodeExtent","onNodesChange","onEdgesChange","elementsSelectable","connectionMode","snapGrid","snapToGrid","translateExtent","connectOnClick","defaultEdgeOptions","fitView","fitViewOptions","onNodesDelete","onEdgesDelete","onDelete","onNodeDrag","onNodeDragStart","onNodeDragStop","onSelectionDrag","onSelectionDragStart","onSelectionDragStop","onMoveStart","onMove","onMoveEnd","noPanClassName","nodeOrigin","autoPanOnConnect","autoPanOnNodeDrag","onError","connectionRadius","isValidConnection","selectNodesOnDrag","nodeDragThreshold","onBeforeDelete","debug","autoPanSpeed","paneClickDistance"],xt=[...zs,"rfId"],Bs=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges,setPaneClickDistance:e.setPaneClickDistance}),yt={translateExtent:ve,nodeOrigin:cn,minZoom:.5,maxZoom:2,elementsSelectable:!0,noPanClassName:"nopan",rfId:"1",paneClickDistance:0};function Fs(e){const{setNodes:t,setEdges:n,setMinZoom:o,setMaxZoom:c,setTranslateExtent:i,setNodeExtent:l,reset:f,setDefaultNodesAndEdges:g,setPaneClickDistance:p}=F(Bs,U),h=X();S.useEffect(()=>(g(e.defaultNodes,e.defaultEdges),()=>{s.current=yt,f()}),[]);const s=S.useRef(yt);return S.useEffect(()=>{for(const r of xt){const a=e[r],d=s.current[r];a!==d&&(typeof e[r]>"u"||(r==="nodes"?t(a):r==="edges"?n(a):r==="minZoom"?o(a):r==="maxZoom"?c(a):r==="translateExtent"?i(a):r==="nodeExtent"?l(a):r==="paneClickDistance"?p(a):r==="fitView"?h.setState({fitViewOnInit:a}):r==="fitViewOptions"?h.setState({fitViewOnInitOptions:a}):h.setState({[r]:a})))}s.current=e},xt.map(r=>e[r])),null}function St(){return typeof window>"u"||!window.matchMedia?null:window.matchMedia("(prefers-color-scheme: dark)")}function Os(e){var o;const[t,n]=S.useState(e==="system"?null:e);return S.useEffect(()=>{if(e!=="system"){n(e);return}const c=St(),i=()=>n(c!=null&&c.matches?"dark":"light");return i(),c==null||c.addEventListener("change",i),()=>{c==null||c.removeEventListener("change",i)}},[e]),t!==null?t:(o=St())!=null&&o.matches?"dark":"light"}const vt=typeof document<"u"?document:null;function me(e=null,t={target:vt,actInsideInputWithModifier:!0}){const[n,o]=S.useState(!1),c=S.useRef(!1),i=S.useRef(new Set([])),[l,f]=S.useMemo(()=>{if(e!==null){const p=(Array.isArray(e)?e:[e]).filter(s=>typeof s=="string").map(s=>s.replace("+",`
`).replace(`

`,`
+`).split(`
`)),h=p.reduce((s,r)=>s.concat(...r),[]);return[p,h]}return[[],[]]},[e]);return S.useEffect(()=>{const g=(t==null?void 0:t.target)||vt;if(e!==null){const p=r=>{if(c.current=r.ctrlKey||r.metaKey||r.shiftKey,(!c.current||c.current&&!t.actInsideInputWithModifier)&&Te(r))return!1;const d=bt(r.code,f);i.current.add(r[d]),Et(l,i.current,!1)&&(r.preventDefault(),o(!0))},h=r=>{if((!c.current||c.current&&!t.actInsideInputWithModifier)&&Te(r))return!1;const d=bt(r.code,f);Et(l,i.current,!0)?(o(!1),i.current.clear()):i.current.delete(r[d]),r.key==="Meta"&&i.current.clear(),c.current=!1},s=()=>{i.current.clear(),o(!1)};return g==null||g.addEventListener("keydown",p),g==null||g.addEventListener("keyup",h),window.addEventListener("blur",s),window.addEventListener("contextmenu",s),()=>{g==null||g.removeEventListener("keydown",p),g==null||g.removeEventListener("keyup",h),window.removeEventListener("blur",s),window.removeEventListener("contextmenu",s)}}},[e,o]),n}function Et(e,t,n){return e.filter(o=>n||o.length===t.size).some(o=>o.every(c=>t.has(c)))}function bt(e,t){return t.includes(e)?"code":"key"}const Hs=()=>{const e=X();return S.useMemo(()=>({zoomIn:t=>{const{panZoom:n}=e.getState();return n?n.scaleBy(1.2,{duration:t==null?void 0:t.duration}):Promise.resolve(!1)},zoomOut:t=>{const{panZoom:n}=e.getState();return n?n.scaleBy(1/1.2,{duration:t==null?void 0:t.duration}):Promise.resolve(!1)},zoomTo:(t,n)=>{const{panZoom:o}=e.getState();return o?o.scaleTo(t,{duration:n==null?void 0:n.duration}):Promise.resolve(!1)},getZoom:()=>e.getState().transform[2],setViewport:async(t,n)=>{const{transform:[o,c,i],panZoom:l}=e.getState();return l?(await l.setViewport({x:t.x??o,y:t.y??c,zoom:t.zoom??i},{duration:n==null?void 0:n.duration}),Promise.resolve(!0)):Promise.resolve(!1)},getViewport:()=>{const[t,n,o]=e.getState().transform;return{x:t,y:n,zoom:o}},fitView:t=>{const{nodeLookup:n,minZoom:o,maxZoom:c,panZoom:i,domNode:l}=e.getState();if(!i||!l)return Promise.resolve(!1);const f=Ze(n,t),{width:g,height:p}=qt(l);return We({nodes:f,width:g,height:p,minZoom:o,maxZoom:c,panZoom:i},t)},setCenter:async(t,n,o)=>{const{width:c,height:i,maxZoom:l,panZoom:f}=e.getState(),g=typeof(o==null?void 0:o.zoom)<"u"?o.zoom:l,p=c/2-t*g,h=i/2-n*g;return f?(await f.setViewport({x:p,y:h,zoom:g},{duration:o==null?void 0:o.duration}),Promise.resolve(!0)):Promise.resolve(!1)},fitBounds:async(t,n)=>{const{width:o,height:c,minZoom:i,maxZoom:l,panZoom:f}=e.getState(),g=Gt(t,o,c,i,l,(n==null?void 0:n.padding)??.1);return f?(await f.setViewport(g,{duration:n==null?void 0:n.duration}),Promise.resolve(!0)):Promise.resolve(!1)},screenToFlowPosition:(t,n={snapToGrid:!0})=>{const{transform:o,snapGrid:c,domNode:i}=e.getState();if(!i)return t;const{x:l,y:f}=i.getBoundingClientRect(),g={x:t.x-l,y:t.y-f};return Kt(g,o,n.snapToGrid,c)},flowToScreenPosition:t=>{const{transform:n,domNode:o}=e.getState();if(!o)return t;const{x:c,y:i}=o.getBoundingClientRect(),l=ts(t,n);return{x:l.x+c,y:l.y+i}}}),[])};function an(e,t){const n=[],o=new Map,c=[];for(const i of e)if(i.type==="add"){c.push(i);continue}else if(i.type==="remove"||i.type==="replace")o.set(i.id,[i]);else{const l=o.get(i.id);l?l.push(i):o.set(i.id,[i])}for(const i of t){const l=o.get(i.id);if(!l){n.push(i);continue}if(l[0].type==="remove")continue;if(l[0].type==="replace"){n.push({...l[0].item});continue}const f={...i};for(const g of l)Ts(g,f);n.push(f)}return c.length&&c.forEach(i=>{i.index!==void 0?n.splice(i.index,0,{...i.item}):n.push({...i.item})}),n}function Ts(e,t){switch(e.type){case"select":{t.selected=e.selected;break}case"position":{typeof e.position<"u"&&(t.position=e.position),typeof e.dragging<"u"&&(t.dragging=e.dragging);break}case"dimensions":{typeof e.dimensions<"u"&&(t.measured??(t.measured={}),t.measured.width=e.dimensions.width,t.measured.height=e.dimensions.height,e.setAttributes&&(t.width=e.dimensions.width,t.height=e.dimensions.height)),typeof e.resizing=="boolean"&&(t.resizing=e.resizing);break}}}function Zs(e,t){return an(e,t)}function Ws(e,t){return an(e,t)}function ce(e,t){return{id:e,type:"select",selected:t}}function le(e,t=new Set,n=!1){const o=[];for(const[c,i]of e){const l=t.has(c);!(i.selected===void 0&&!l)&&i.selected!==l&&(n&&(i.selected=l),o.push(ce(i.id,l)))}return o}function Nt({items:e=[],lookup:t}){var c;const n=[],o=new Map(e.map(i=>[i.id,i]));for(const[i,l]of e.entries()){const f=t.get(l.id),g=((c=f==null?void 0:f.internals)==null?void 0:c.userNode)??f;g!==void 0&&g!==l&&n.push({id:l.id,item:l,type:"replace"}),g===void 0&&n.push({item:l,type:"add",index:i})}for(const[i]of t)o.get(i)===void 0&&n.push({id:i,type:"remove"});return n}function Ct(e){return{id:e.id,type:"remove"}}const kt=e=>ns(e),Ys=e=>os(e);function dn(e){return S.forwardRef(e)}const Xs=typeof window<"u"?S.useLayoutEffect:S.useEffect;function _t(e){const[t,n]=S.useState(BigInt(0)),[o]=S.useState(()=>qs(()=>n(c=>c+BigInt(1))));return Xs(()=>{const c=o.get();c.length&&(e(c),o.reset())},[t]),o}function qs(e){let t=[];return{get:()=>t,reset:()=>{t=[]},push:n=>{t.push(n),e()}}}const ln=S.createContext(null);function Gs({children:e}){const t=X(),n=S.useCallback(f=>{const{nodes:g=[],setNodes:p,hasDefaultNodes:h,onNodesChange:s,nodeLookup:r}=t.getState();let a=g;for(const d of f)a=typeof d=="function"?d(a):d;h?p(a):s&&s(Nt({items:a,lookup:r}))},[]),o=_t(n),c=S.useCallback(f=>{const{edges:g=[],setEdges:p,hasDefaultEdges:h,onEdgesChange:s,edgeLookup:r}=t.getState();let a=g;for(const d of f)a=typeof d=="function"?d(a):d;h?p(a):s&&s(Nt({items:a,lookup:r}))},[]),i=_t(c),l=S.useMemo(()=>({nodeQueue:o,edgeQueue:i}),[]);return m.jsx(ln.Provider,{value:l,children:e})}function Ks(){const e=S.useContext(ln);if(!e)throw new Error("useBatchContext must be used within a BatchProvider");return e}const Us=e=>!!e.panZoom;function Ue(){const e=Hs(),t=X(),n=Ks(),o=F(Us),c=S.useMemo(()=>{const i=s=>t.getState().nodeLookup.get(s),l=s=>{n.nodeQueue.push(s)},f=s=>{n.edgeQueue.push(s)},g=s=>{var w,E;const{nodeLookup:r,nodeOrigin:a}=t.getState(),d=kt(s)?s:r.get(s.id),u=d.parentId?Ht(d.position,d.measured,d.parentId,r,a):d.position,y={id:d.id,position:u,width:((w=d.measured)==null?void 0:w.width)??d.width,height:((E=d.measured)==null?void 0:E.height)??d.height,data:d.data};return it(y)},p=(s,r,a={replace:!1})=>{l(d=>d.map(u=>{if(u.id===s){const y=typeof r=="function"?r(u):r;return a.replace&&kt(y)?y:{...u,...y}}return u}))},h=(s,r,a={replace:!1})=>{f(d=>d.map(u=>{if(u.id===s){const y=typeof r=="function"?r(u):r;return a.replace&&Ys(y)?y:{...u,...y}}return u}))};return{getNodes:()=>t.getState().nodes.map(s=>({...s})),getNode:s=>{var r;return(r=i(s))==null?void 0:r.internals.userNode},getInternalNode:i,getEdges:()=>{const{edges:s=[]}=t.getState();return s.map(r=>({...r}))},getEdge:s=>t.getState().edgeLookup.get(s),setNodes:l,setEdges:f,addNodes:s=>{const r=Array.isArray(s)?s:[s];n.nodeQueue.push(a=>[...a,...r])},addEdges:s=>{const r=Array.isArray(s)?s:[s];n.edgeQueue.push(a=>[...a,...r])},toObject:()=>{const{nodes:s=[],edges:r=[],transform:a}=t.getState(),[d,u,y]=a;return{nodes:s.map(w=>({...w})),edges:r.map(w=>({...w})),viewport:{x:d,y:u,zoom:y}}},deleteElements:async({nodes:s=[],edges:r=[]})=>{const{nodes:a,edges:d,onNodesDelete:u,onEdgesDelete:y,triggerNodeChanges:w,triggerEdgeChanges:E,onDelete:x,onBeforeDelete:v}=t.getState(),{nodes:b,edges:C}=await To({nodesToRemove:s,edgesToRemove:r,nodes:a,edges:d,onBeforeDelete:v}),k=C.length>0,M=b.length>0;if(k){const P=C.map(Ct);y==null||y(C),E(P)}if(M){const P=b.map(Ct);u==null||u(b),w(P)}return(M||k)&&(x==null||x({nodes:b,edges:C})),{deletedNodes:b,deletedEdges:C}},getIntersectingNodes:(s,r=!0,a)=>{const d=rt(s),u=d?s:g(s),y=a!==void 0;return u?(a||t.getState().nodes).filter(w=>{const E=t.getState().nodeLookup.get(w.id);if(E&&!d&&(w.id===s.id||!E.internals.positionAbsolute))return!1;const x=it(y?w:E),v=ct(x,u);return r&&v>0||v>=u.width*u.height}):[]},isNodeIntersecting:(s,r,a=!0)=>{const u=rt(s)?s:g(s);if(!u)return!1;const y=ct(u,r);return a&&y>0||y>=u.width*u.height},updateNode:p,updateNodeData:(s,r,a={replace:!1})=>{p(s,d=>{const u=typeof r=="function"?r(d):r;return a.replace?{...d,data:u}:{...d,data:{...d.data,...u}}},a)},updateEdge:h,updateEdgeData:(s,r,a={replace:!1})=>{h(s,d=>{const u=typeof r=="function"?r(d):r;return a.replace?{...d,data:u}:{...d,data:{...d.data,...u}}},a)},getNodesBounds:s=>{const{nodeLookup:r,nodeOrigin:a}=t.getState();return Zo(s,{nodeLookup:r,nodeOrigin:a})},getHandleConnections:({type:s,id:r,nodeId:a})=>{var d;return Array.from(((d=t.getState().connectionLookup.get(`${a}-${s}-${r??null}`))==null?void 0:d.values())??[])}}},[]);return S.useMemo(()=>({...c,...e,viewportInitialized:o}),[o])}const It=e=>e.selected,Qs={actInsideInputWithModifier:!1},Js=typeof window<"u"?window:void 0;function er({deleteKeyCode:e,multiSelectionKeyCode:t}){const n=X(),{deleteElements:o}=Ue(),c=me(e,Qs),i=me(t,{target:Js});S.useEffect(()=>{if(c){const{edges:l,nodes:f}=n.getState();o({nodes:f.filter(It),edges:l.filter(It)}),n.setState({nodesSelectionActive:!1})}},[c]),S.useEffect(()=>{n.setState({multiSelectionActive:i})},[i])}function tr(e){const t=X();S.useEffect(()=>{const n=()=>{var c,i;if(!e.current)return!1;const o=qt(e.current);(o.height===0||o.width===0)&&((i=(c=t.getState()).onError)==null||i.call(c,"004",ae.error004())),t.setState({width:o.width||500,height:o.height||500})};if(e.current){n(),window.addEventListener("resize",n);const o=new ResizeObserver(()=>n());return o.observe(e.current),()=>{window.removeEventListener("resize",n),o&&e.current&&o.unobserve(e.current)}}},[])}const Ce={position:"absolute",width:"100%",height:"100%",top:0,left:0},nr=e=>({userSelectionActive:e.userSelectionActive,lib:e.lib});function or({onPaneContextMenu:e,zoomOnScroll:t=!0,zoomOnPinch:n=!0,panOnScroll:o=!1,panOnScrollSpeed:c=.5,panOnScrollMode:i=Zt.Free,zoomOnDoubleClick:l=!0,panOnDrag:f=!0,defaultViewport:g,translateExtent:p,minZoom:h,maxZoom:s,zoomActivationKeyCode:r,preventScrolling:a=!0,children:d,noWheelClassName:u,noPanClassName:y,onViewportChange:w,isControlledViewport:E,paneClickDistance:x}){const v=X(),b=S.useRef(null),{userSelectionActive:C,lib:k}=F(nr,U),M=me(r),P=S.useRef();tr(b);const _=S.useCallback(V=>{w==null||w({x:V[0],y:V[1],zoom:V[2]}),E||v.setState({transform:V})},[w,E]);return S.useEffect(()=>{if(b.current){P.current=Wo({domNode:b.current,minZoom:h,maxZoom:s,translateExtent:p,viewport:g,paneClickDistance:x,onDraggingChange:z=>v.setState({paneDragging:z}),onPanZoomStart:(z,L)=>{const{onViewportChangeStart:I,onMoveStart:D}=v.getState();D==null||D(z,L),I==null||I(L)},onPanZoom:(z,L)=>{const{onViewportChange:I,onMove:D}=v.getState();D==null||D(z,L),I==null||I(L)},onPanZoomEnd:(z,L)=>{const{onViewportChangeEnd:I,onMoveEnd:D}=v.getState();D==null||D(z,L),I==null||I(L)}});const{x:V,y:T,zoom:H}=P.current.getViewport();return v.setState({panZoom:P.current,transform:[V,T,H],domNode:b.current.closest(".react-flow")}),()=>{var z;(z=P.current)==null||z.destroy()}}},[]),S.useEffect(()=>{var V;(V=P.current)==null||V.update({onPaneContextMenu:e,zoomOnScroll:t,zoomOnPinch:n,panOnScroll:o,panOnScrollSpeed:c,panOnScrollMode:i,zoomOnDoubleClick:l,panOnDrag:f,zoomActivationKeyPressed:M,preventScrolling:a,noPanClassName:y,userSelectionActive:C,noWheelClassName:u,lib:k,onTransformChange:_})},[e,t,n,o,c,i,l,f,M,a,y,C,u,k,_]),m.jsx("div",{className:"react-flow__renderer",ref:b,style:Ce,children:d})}const sr=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function rr(){const{userSelectionActive:e,userSelectionRect:t}=F(sr,U);return e&&t?m.jsx("div",{className:"react-flow__selection react-flow__container",style:{width:t.width,height:t.height,transform:`translate(${t.x}px, ${t.y}px)`}}):null}const Be=(e,t)=>n=>{n.target===t.current&&(e==null||e(n))},ir=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,dragging:e.paneDragging});function cr({isSelecting:e,selectionKeyPressed:t,selectionMode:n=He.Full,panOnDrag:o,selectionOnDrag:c,onSelectionStart:i,onSelectionEnd:l,onPaneClick:f,onPaneContextMenu:g,onPaneScroll:p,onPaneMouseEnter:h,onPaneMouseMove:s,onPaneMouseLeave:r,children:a}){const d=S.useRef(null),u=X(),y=S.useRef(0),w=S.useRef(0),E=S.useRef(),x=S.useRef(new Map),{userSelectionActive:v,elementsSelectable:b,dragging:C}=F(ir,U),k=b&&(e||v),M=S.useRef(!1),P=S.useRef(!1),_=()=>{u.setState({userSelectionActive:!1,userSelectionRect:null}),y.current=0,w.current=0},V=N=>{if(M.current){M.current=!1;return}f==null||f(N),u.getState().resetSelectedElements(),u.setState({nodesSelectionActive:!1})},T=N=>{if(Array.isArray(o)&&(o!=null&&o.includes(2))){N.preventDefault();return}g==null||g(N)},H=p?N=>p(N):void 0,z=N=>{var W,Q,G,K;const{resetSelectedElements:A,domNode:$,edgeLookup:R}=u.getState();if(E.current=$==null?void 0:$.getBoundingClientRect(),!b||!e||N.button!==0||N.target!==d.current||!E.current)return;(Q=(W=N.target)==null?void 0:W.setPointerCapture)==null||Q.call(W,N.pointerId),P.current=!0,M.current=!1,x.current=new Map;for(const[j,Y]of R)x.current.set(Y.source,((G=x.current.get(Y.source))==null?void 0:G.add(j))||new Set([j])),x.current.set(Y.target,((K=x.current.get(Y.target))==null?void 0:K.add(j))||new Set([j]));const{x:O,y:Z}=lt(N.nativeEvent,E.current);A(),u.setState({userSelectionRect:{width:0,height:0,startX:O,startY:Z,x:O,y:Z}}),i==null||i(N)},L=N=>{const{userSelectionRect:A,edgeLookup:$,transform:R,nodeLookup:O,triggerNodeChanges:Z,triggerEdgeChanges:W}=u.getState();if(!E.current||!A)return;M.current=!0;const{x:Q,y:G}=lt(N.nativeEvent,E.current),{startX:K,startY:j}=A,Y={startX:K,startY:j,x:Q<K?Q:K,y:G<j?G:j,width:Math.abs(Q-K),height:Math.abs(G-j)},te=Ut(O,Y,R,n===He.Partial,!0),J=new Set,B=new Set;for(const q of te){B.add(q.id);const oe=x.current.get(q.id);if(oe)for(const se of oe)J.add(se)}if(y.current!==B.size){y.current=B.size;const q=le(O,B,!0);Z(q)}if(w.current!==J.size){w.current=J.size;const q=le($,J);W(q)}u.setState({userSelectionRect:Y,userSelectionActive:!0,nodesSelectionActive:!1})},I=N=>{var $,R;if(N.button!==0||!P.current)return;(R=($=N.target)==null?void 0:$.releasePointerCapture)==null||R.call($,N.pointerId);const{userSelectionRect:A}=u.getState();!v&&A&&N.target===d.current&&(V==null||V(N)),y.current>0&&u.setState({nodesSelectionActive:!0}),_(),l==null||l(N),(t||c)&&(M.current=!1),P.current=!1},D=o===!0||Array.isArray(o)&&o.includes(0);return m.jsxs("div",{className:ee(["react-flow__pane",{draggable:D,dragging:C,selection:e}]),onClick:k?void 0:Be(V,d),onContextMenu:Be(T,d),onWheel:Be(H,d),onPointerEnter:k?void 0:h,onPointerDown:k?z:s,onPointerMove:k?L:s,onPointerUp:k?I:void 0,onPointerLeave:r,ref:d,style:Ce,children:[a,m.jsx(rr,{})]})}function qe({id:e,store:t,unselect:n=!1,nodeRef:o}){const{addSelectedNodes:c,unselectNodesAndEdges:i,multiSelectionActive:l,nodeLookup:f,onError:g}=t.getState(),p=f.get(e);if(!p){g==null||g("012",ae.error012(e));return}t.setState({nodesSelectionActive:!1}),p.selected?(n||p.selected&&l)&&(i({nodes:[p],edges:[]}),requestAnimationFrame(()=>{var h;return(h=o==null?void 0:o.current)==null?void 0:h.blur()})):c([e])}function un({nodeRef:e,disabled:t=!1,noDragClassName:n,handleSelector:o,nodeId:c,isSelectable:i,nodeClickDistance:l}){const f=X(),[g,p]=S.useState(!1),h=S.useRef();return S.useEffect(()=>{h.current=Go({getStoreItems:()=>f.getState(),onNodeMouseDown:s=>{qe({id:s,store:f,nodeRef:e})},onDragStart:()=>{p(!0)},onDragStop:()=>{p(!1)}})},[]),S.useEffect(()=>{var s,r;if(t)(s=h.current)==null||s.destroy();else if(e.current)return(r=h.current)==null||r.update({noDragClassName:n,handleSelector:o,domNode:e.current,isSelectable:i,nodeId:c,nodeClickDistance:l}),()=>{var a;(a=h.current)==null||a.destroy()}},[n,o,t,i,e,c]),g}const ar=e=>t=>t.selected&&(t.draggable||e&&typeof t.draggable>"u");function fn(){const e=X();return S.useCallback(n=>{const{nodeExtent:o,snapToGrid:c,snapGrid:i,nodesDraggable:l,onError:f,updateNodePositions:g,nodeLookup:p,nodeOrigin:h}=e.getState(),s=new Map,r=ar(l),a=c?i[0]:5,d=c?i[1]:5,u=n.direction.x*a*n.factor,y=n.direction.y*d*n.factor;for(const[,w]of p){if(!r(w))continue;let E={x:w.internals.positionAbsolute.x+u,y:w.internals.positionAbsolute.y+y};c&&(E=Ko(E,i));const{position:x,positionAbsolute:v}=Uo({nodeId:w.id,nextPosition:E,nodeLookup:p,nodeExtent:o,nodeOrigin:h,onError:f});w.position=x,w.internals.positionAbsolute=v,s.set(w.id,w)}g(s)},[])}const Qe=S.createContext(null),dr=Qe.Provider;Qe.Consumer;const gn=()=>S.useContext(Qe),lr=e=>({connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName,rfId:e.rfId}),ur=(e,t,n)=>o=>{const{connectionClickStartHandle:c,connectionMode:i,connection:l}=o,{fromHandle:f,toHandle:g,isValid:p}=l,h=(g==null?void 0:g.nodeId)===e&&(g==null?void 0:g.id)===t&&(g==null?void 0:g.type)===n;return{connectingFrom:(f==null?void 0:f.nodeId)===e&&(f==null?void 0:f.id)===t&&(f==null?void 0:f.type)===n,connectingTo:h,clickConnecting:(c==null?void 0:c.nodeId)===e&&(c==null?void 0:c.id)===t&&(c==null?void 0:c.type)===n,isPossibleEndHandle:i===Jt.Strict?(f==null?void 0:f.type)!==n:e!==(f==null?void 0:f.nodeId)||t!==(f==null?void 0:f.id),connectionInProcess:!!f,valid:h&&p}};function fr({type:e="source",position:t=ne.Top,isValidConnection:n,isConnectable:o=!0,isConnectableStart:c=!0,isConnectableEnd:i=!0,id:l,onConnect:f,children:g,className:p,onMouseDown:h,onTouchStart:s,...r},a){var z,L;const d=l||null,u=e==="target",y=X(),w=gn(),{connectOnClick:E,noPanClassName:x,rfId:v}=F(lr,U),{connectingFrom:b,connectingTo:C,clickConnecting:k,isPossibleEndHandle:M,connectionInProcess:P,valid:_}=F(ur(w,d,e),U);w||(L=(z=y.getState()).onError)==null||L.call(z,"010",ae.error010());const V=I=>{const{defaultEdgeOptions:D,onConnect:N,hasDefaultEdges:A}=y.getState(),$={...D,...I};if(A){const{edges:R,setEdges:O}=y.getState();O(ss($,R))}N==null||N($),f==null||f($)},T=I=>{if(!w)return;const D=Qo(I.nativeEvent);if(c&&(D&&I.button===0||!D)){const N=y.getState();Ye.onPointerDown(I.nativeEvent,{autoPanOnConnect:N.autoPanOnConnect,connectionMode:N.connectionMode,connectionRadius:N.connectionRadius,domNode:N.domNode,nodeLookup:N.nodeLookup,lib:N.lib,isTarget:u,handleId:d,nodeId:w,flowId:N.rfId,panBy:N.panBy,cancelConnection:N.cancelConnection,onConnectStart:N.onConnectStart,onConnectEnd:N.onConnectEnd,updateConnection:N.updateConnection,onConnect:V,isValidConnection:n||N.isValidConnection,getTransform:()=>y.getState().transform,getFromHandle:()=>y.getState().connection.fromHandle,autoPanSpeed:N.autoPanSpeed})}D?h==null||h(I):s==null||s(I)},H=I=>{const{onClickConnectStart:D,onClickConnectEnd:N,connectionClickStartHandle:A,connectionMode:$,isValidConnection:R,lib:O,rfId:Z,nodeLookup:W,connection:Q}=y.getState();if(!w||!A&&!c)return;if(!A){D==null||D(I.nativeEvent,{nodeId:w,handleId:d,handleType:e}),y.setState({connectionClickStartHandle:{nodeId:w,type:e,id:d}});return}const G=Jo(I.target),K=n||R,{connection:j,isValid:Y}=Ye.isValid(I.nativeEvent,{handle:{nodeId:w,id:d,type:e},connectionMode:$,fromNodeId:A.nodeId,fromHandleId:A.id||null,fromType:A.type,isValidConnection:K,flowId:Z,doc:G,lib:O,nodeLookup:W});Y&&j&&V(j);const te=structuredClone(Q);delete te.inProgress,te.toPosition=te.toHandle?te.toHandle.position:null,N==null||N(I,te),y.setState({connectionClickStartHandle:null})};return m.jsx("div",{"data-handleid":d,"data-nodeid":w,"data-handlepos":t,"data-id":`${v}-${w}-${d}-${e}`,className:ee(["react-flow__handle",`react-flow__handle-${t}`,"nodrag",x,p,{source:!u,target:u,connectable:o,connectablestart:c,connectableend:i,clickconnecting:k,connectingfrom:b,connectingto:C,valid:_,connectionindicator:o&&(!P||M)&&(P?i:c)}]),onMouseDown:T,onTouchStart:T,onClick:E?H:void 0,ref:a,...r,children:g})}const Ee=S.memo(dn(fr));function gr({data:e,isConnectable:t,sourcePosition:n=ne.Bottom}){return m.jsxs(m.Fragment,{children:[e==null?void 0:e.label,m.jsx(Ee,{type:"source",position:n,isConnectable:t})]})}function pr({data:e,isConnectable:t,targetPosition:n=ne.Top,sourcePosition:o=ne.Bottom}){return m.jsxs(m.Fragment,{children:[m.jsx(Ee,{type:"target",position:n,isConnectable:t}),e==null?void 0:e.label,m.jsx(Ee,{type:"source",position:o,isConnectable:t})]})}function hr(){return null}function mr({data:e,isConnectable:t,targetPosition:n=ne.Top}){return m.jsxs(m.Fragment,{children:[m.jsx(Ee,{type:"target",position:n,isConnectable:t}),e==null?void 0:e.label]})}const be={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}},Mt={input:gr,default:pr,output:mr,group:hr};function wr(e){var t,n,o,c;return e.internals.handleBounds===void 0?{width:e.width??e.initialWidth??((t=e.style)==null?void 0:t.width),height:e.height??e.initialHeight??((n=e.style)==null?void 0:n.height)}:{width:e.width??((o=e.style)==null?void 0:o.width),height:e.height??((c=e.style)==null?void 0:c.height)}}const xr=e=>{const{width:t,height:n,x:o,y:c}=Ge(e.nodeLookup,{filter:i=>!!i.selected});return{width:Se(t)?t:null,height:Se(n)?n:null,userSelectionActive:e.userSelectionActive,transformString:`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]}) translate(${o}px,${c}px)`}};function yr({onSelectionContextMenu:e,noPanClassName:t,disableKeyboardA11y:n}){const o=X(),{width:c,height:i,transformString:l,userSelectionActive:f}=F(xr,U),g=fn(),p=S.useRef(null);if(S.useEffect(()=>{var r;n||(r=p.current)==null||r.focus({preventScroll:!0})},[n]),un({nodeRef:p}),f||!c||!i)return null;const h=e?r=>{const a=o.getState().nodes.filter(d=>d.selected);e(r,a)}:void 0,s=r=>{Object.prototype.hasOwnProperty.call(be,r.key)&&g({direction:be[r.key],factor:r.shiftKey?4:1})};return m.jsx("div",{className:ee(["react-flow__nodesselection","react-flow__container",t]),style:{transform:l},children:m.jsx("div",{ref:p,className:"react-flow__nodesselection-rect",onContextMenu:h,tabIndex:n?void 0:-1,onKeyDown:n?void 0:s,style:{width:c,height:i}})})}const Pt=typeof window<"u"?window:void 0,Sr=e=>({nodesSelectionActive:e.nodesSelectionActive,userSelectionActive:e.userSelectionActive});function pn({children:e,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:o,onPaneMouseLeave:c,onPaneContextMenu:i,onPaneScroll:l,paneClickDistance:f,deleteKeyCode:g,selectionKeyCode:p,selectionOnDrag:h,selectionMode:s,onSelectionStart:r,onSelectionEnd:a,multiSelectionKeyCode:d,panActivationKeyCode:u,zoomActivationKeyCode:y,elementsSelectable:w,zoomOnScroll:E,zoomOnPinch:x,panOnScroll:v,panOnScrollSpeed:b,panOnScrollMode:C,zoomOnDoubleClick:k,panOnDrag:M,defaultViewport:P,translateExtent:_,minZoom:V,maxZoom:T,preventScrolling:H,onSelectionContextMenu:z,noWheelClassName:L,noPanClassName:I,disableKeyboardA11y:D,onViewportChange:N,isControlledViewport:A}){const{nodesSelectionActive:$,userSelectionActive:R}=F(Sr),O=me(p,{target:Pt}),Z=me(u,{target:Pt}),W=Z||M,Q=Z||v,G=h&&W!==!0,K=O||R||G;return er({deleteKeyCode:g,multiSelectionKeyCode:d}),m.jsx(or,{onPaneContextMenu:i,elementsSelectable:w,zoomOnScroll:E,zoomOnPinch:x,panOnScroll:Q,panOnScrollSpeed:b,panOnScrollMode:C,zoomOnDoubleClick:k,panOnDrag:!O&&W,defaultViewport:P,translateExtent:_,minZoom:V,maxZoom:T,zoomActivationKeyCode:y,preventScrolling:H,noWheelClassName:L,noPanClassName:I,onViewportChange:N,isControlledViewport:A,paneClickDistance:f,children:m.jsxs(cr,{onSelectionStart:r,onSelectionEnd:a,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:o,onPaneMouseLeave:c,onPaneContextMenu:i,onPaneScroll:l,panOnDrag:W,isSelecting:!!K,selectionMode:s,selectionKeyPressed:O,selectionOnDrag:G,children:[e,$&&m.jsx(yr,{onSelectionContextMenu:z,noPanClassName:I,disableKeyboardA11y:D})]})})}pn.displayName="FlowRenderer";const vr=S.memo(pn),Er=e=>t=>e?Ut(t.nodeLookup,{x:0,y:0,width:t.width,height:t.height},t.transform,!0).map(n=>n.id):Array.from(t.nodeLookup.keys());function br(e){return F(S.useCallback(Er(e),[e]),U)}const Nr=e=>e.updateNodeInternals;function Cr(){const e=F(Nr),[t]=S.useState(()=>typeof ResizeObserver>"u"?null:new ResizeObserver(n=>{const o=new Map;n.forEach(c=>{const i=c.target.getAttribute("data-id");o.set(i,{id:i,nodeElement:c.target,force:!0})}),e(o)}));return S.useEffect(()=>()=>{t==null||t.disconnect()},[t]),t}function kr({node:e,nodeType:t,hasDimensions:n,resizeObserver:o}){const c=X(),i=S.useRef(null),l=S.useRef(null),f=S.useRef(e.sourcePosition),g=S.useRef(e.targetPosition),p=S.useRef(t),h=n&&!!e.internals.handleBounds;return S.useEffect(()=>{i.current&&!e.hidden&&(!h||l.current!==i.current)&&(l.current&&(o==null||o.unobserve(l.current)),o==null||o.observe(i.current),l.current=i.current)},[h,e.hidden]),S.useEffect(()=>()=>{l.current&&(o==null||o.unobserve(l.current),l.current=null)},[]),S.useEffect(()=>{if(i.current){const s=p.current!==t,r=f.current!==e.sourcePosition,a=g.current!==e.targetPosition;(s||r||a)&&(p.current=t,f.current=e.sourcePosition,g.current=e.targetPosition,c.getState().updateNodeInternals(new Map([[e.id,{id:e.id,nodeElement:i.current,force:!0}]])))}},[e.id,t,e.sourcePosition,e.targetPosition]),i}function _r({id:e,onClick:t,onMouseEnter:n,onMouseMove:o,onMouseLeave:c,onContextMenu:i,onDoubleClick:l,nodesDraggable:f,elementsSelectable:g,nodesConnectable:p,nodesFocusable:h,resizeObserver:s,noDragClassName:r,noPanClassName:a,disableKeyboardA11y:d,rfId:u,nodeTypes:y,nodeExtent:w,nodeClickDistance:E,onError:x}){const{node:v,internals:b,isParent:C}=F(j=>{const Y=j.nodeLookup.get(e),te=j.parentLookup.has(e);return{node:Y,internals:Y.internals,isParent:te}},U);let k=v.type||"default",M=(y==null?void 0:y[k])||Mt[k];M===void 0&&(x==null||x("003",ae.error003(k)),k="default",M=Mt.default);const P=!!(v.draggable||f&&typeof v.draggable>"u"),_=!!(v.selectable||g&&typeof v.selectable>"u"),V=!!(v.connectable||p&&typeof v.connectable>"u"),T=!!(v.focusable||h&&typeof v.focusable>"u"),H=X(),z=Ot(v),L=kr({node:v,nodeType:k,hasDimensions:z,resizeObserver:s}),I=un({nodeRef:L,disabled:v.hidden||!P,noDragClassName:r,handleSelector:v.dragHandle,nodeId:e,isSelectable:_,nodeClickDistance:E}),D=fn();if(v.hidden)return null;const N=Wt(v),A=wr(v),$=_||P||t||n||o||c,R=n?j=>n(j,{...b.userNode}):void 0,O=o?j=>o(j,{...b.userNode}):void 0,Z=c?j=>c(j,{...b.userNode}):void 0,W=i?j=>i(j,{...b.userNode}):void 0,Q=l?j=>l(j,{...b.userNode}):void 0,G=j=>{const{selectNodesOnDrag:Y,nodeDragThreshold:te}=H.getState();_&&(!Y||!P||te>0)&&qe({id:e,store:H,nodeRef:L}),t&&t(j,{...b.userNode})},K=j=>{if(!(Te(j.nativeEvent)||d))if(Qt.includes(j.key)&&_){const Y=j.key==="Escape";qe({id:e,store:H,unselect:Y,nodeRef:L})}else P&&v.selected&&Object.prototype.hasOwnProperty.call(be,j.key)&&(H.setState({ariaLiveMessage:`Moved selected node ${j.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~b.positionAbsolute.x}, y: ${~~b.positionAbsolute.y}`}),D({direction:be[j.key],factor:j.shiftKey?4:1}))};return m.jsx("div",{className:ee(["react-flow__node",`react-flow__node-${k}`,{[a]:P},v.className,{selected:v.selected,selectable:_,parent:C,draggable:P,dragging:I}]),ref:L,style:{zIndex:b.z,transform:`translate(${b.positionAbsolute.x}px,${b.positionAbsolute.y}px)`,pointerEvents:$?"all":"none",visibility:z?"visible":"hidden",...v.style,...A},"data-id":e,"data-testid":`rf__node-${e}`,onMouseEnter:R,onMouseMove:O,onMouseLeave:Z,onContextMenu:W,onClick:G,onDoubleClick:Q,onKeyDown:T?K:void 0,tabIndex:T?0:void 0,role:T?"button":void 0,"aria-describedby":d?void 0:`${sn}-${u}`,"aria-label":v.ariaLabel,children:m.jsx(dr,{value:e,children:m.jsx(M,{id:e,data:v.data,type:k,positionAbsoluteX:b.positionAbsolute.x,positionAbsoluteY:b.positionAbsolute.y,selected:v.selected,selectable:_,draggable:P,deletable:v.deletable??!0,isConnectable:V,sourcePosition:v.sourcePosition,targetPosition:v.targetPosition,dragging:I,dragHandle:v.dragHandle,zIndex:b.z,parentId:v.parentId,...N})})})}const Ir=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,onError:e.onError});function hn(e){const{nodesDraggable:t,nodesConnectable:n,nodesFocusable:o,elementsSelectable:c,onError:i}=F(Ir,U),l=br(e.onlyRenderVisibleElements),f=Cr();return m.jsx("div",{className:"react-flow__nodes",style:Ce,children:l.map(g=>m.jsx(_r,{id:g,nodeTypes:e.nodeTypes,nodeExtent:e.nodeExtent,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,resizeObserver:f,nodesDraggable:t,nodesConnectable:n,nodesFocusable:o,elementsSelectable:c,nodeClickDistance:e.nodeClickDistance,onError:i},g))})}hn.displayName="NodeRenderer";const Mr=S.memo(hn);function Pr(e){return F(S.useCallback(n=>{if(!e)return n.edges.map(c=>c.id);const o=[];if(n.width&&n.height)for(const c of n.edges){const i=n.nodeLookup.get(c.source),l=n.nodeLookup.get(c.target);i&&l&&Yo({sourceNode:i,targetNode:l,width:n.width,height:n.height,transform:n.transform})&&o.push(c.id)}return o},[e]),U)}const jr=({color:e="none",strokeWidth:t=1})=>m.jsx("polyline",{style:{stroke:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),Dr=({color:e="none",strokeWidth:t=1})=>m.jsx("polyline",{style:{stroke:e,fill:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"}),jt={[st.Arrow]:jr,[st.ArrowClosed]:Dr};function Ar(e){const t=X();return S.useMemo(()=>{var c,i;return Object.prototype.hasOwnProperty.call(jt,e)?jt[e]:((i=(c=t.getState()).onError)==null||i.call(c,"009",ae.error009(e)),null)},[e])}const Lr=({id:e,type:t,color:n,width:o=12.5,height:c=12.5,markerUnits:i="strokeWidth",strokeWidth:l,orient:f="auto-start-reverse"})=>{const g=Ar(t);return g?m.jsx("marker",{className:"react-flow__arrowhead",id:e,markerWidth:`${o}`,markerHeight:`${c}`,viewBox:"-10 -10 20 20",markerUnits:i,orient:f,refX:"0",refY:"0",children:m.jsx(g,{color:n,strokeWidth:l})}):null},mn=({defaultColor:e,rfId:t})=>{const n=F(i=>i.edges),o=F(i=>i.defaultEdgeOptions),c=S.useMemo(()=>Fo(n,{id:t,defaultColor:e,defaultMarkerStart:o==null?void 0:o.markerStart,defaultMarkerEnd:o==null?void 0:o.markerEnd}),[n,o,t,e]);return c.length?m.jsx("svg",{className:"react-flow__marker",children:m.jsx("defs",{children:c.map(i=>m.jsx(Lr,{id:i.id,type:i.type,color:i.color,width:i.width,height:i.height,markerUnits:i.markerUnits,strokeWidth:i.strokeWidth,orient:i.orient},i.id))})}):null};mn.displayName="MarkerDefinitions";var $r=S.memo(mn);function wn({x:e,y:t,label:n,labelStyle:o={},labelShowBg:c=!0,labelBgStyle:i={},labelBgPadding:l=[2,4],labelBgBorderRadius:f=2,children:g,className:p,...h}){const[s,r]=S.useState({x:1,y:0,width:0,height:0}),a=ee(["react-flow__edge-textwrapper",p]),d=S.useRef(null);return S.useEffect(()=>{if(d.current){const u=d.current.getBBox();r({x:u.x,y:u.y,width:u.width,height:u.height})}},[n]),typeof n>"u"||!n?null:m.jsxs("g",{transform:`translate(${e-s.width/2} ${t-s.height/2})`,className:a,visibility:s.width?"visible":"hidden",...h,children:[c&&m.jsx("rect",{width:s.width+2*l[0],x:-l[0],y:-l[1],height:s.height+2*l[1],className:"react-flow__edge-textbg",style:i,rx:f,ry:f}),m.jsx("text",{className:"react-flow__edge-text",y:s.height/2,dy:"0.3em",ref:d,style:o,children:n}),g]})}wn.displayName="EdgeText";const Rr=S.memo(wn);function ke({id:e,path:t,labelX:n,labelY:o,label:c,labelStyle:i,labelShowBg:l,labelBgStyle:f,labelBgPadding:g,labelBgBorderRadius:p,style:h,markerEnd:s,markerStart:r,className:a,interactionWidth:d=20}){return m.jsxs(m.Fragment,{children:[m.jsx("path",{id:e,style:h,d:t,fill:"none",className:ee(["react-flow__edge-path",a]),markerEnd:s,markerStart:r}),d&&m.jsx("path",{d:t,fill:"none",strokeOpacity:0,strokeWidth:d,className:"react-flow__edge-interaction"}),c&&Se(n)&&Se(o)?m.jsx(Rr,{x:n,y:o,label:c,labelStyle:i,labelShowBg:l,labelBgStyle:f,labelBgPadding:g,labelBgBorderRadius:p}):null]})}function Dt({pos:e,x1:t,y1:n,x2:o,y2:c}){return e===ne.Left||e===ne.Right?[.5*(t+o),n]:[t,.5*(n+c)]}function xn({sourceX:e,sourceY:t,sourcePosition:n=ne.Bottom,targetX:o,targetY:c,targetPosition:i=ne.Top}){const[l,f]=Dt({pos:n,x1:e,y1:t,x2:o,y2:c}),[g,p]=Dt({pos:i,x1:o,y1:c,x2:e,y2:t}),[h,s,r,a]=es({sourceX:e,sourceY:t,targetX:o,targetY:c,sourceControlX:l,sourceControlY:f,targetControlX:g,targetControlY:p});return[`M${e},${t} C${l},${f} ${g},${p} ${o},${c}`,h,s,r,a]}function yn(e){return S.memo(({id:t,sourceX:n,sourceY:o,targetX:c,targetY:i,sourcePosition:l=ne.Bottom,targetPosition:f=ne.Top,label:g,labelStyle:p,labelShowBg:h,labelBgStyle:s,labelBgPadding:r,labelBgBorderRadius:a,style:d,markerEnd:u,markerStart:y,interactionWidth:w})=>{const[E,x,v]=xn({sourceX:n,sourceY:o,sourcePosition:l,targetX:c,targetY:i,targetPosition:f}),b=e.isInternal?void 0:t;return m.jsx(ke,{id:b,path:E,labelX:x,labelY:v,label:g,labelStyle:p,labelShowBg:h,labelBgStyle:s,labelBgPadding:r,labelBgBorderRadius:a,style:d,markerEnd:u,markerStart:y,interactionWidth:w})})}const Vr=yn({isInternal:!1}),Sn=yn({isInternal:!0});Vr.displayName="SimpleBezierEdge";Sn.displayName="SimpleBezierEdgeInternal";function vn(e){return S.memo(({id:t,sourceX:n,sourceY:o,targetX:c,targetY:i,label:l,labelStyle:f,labelShowBg:g,labelBgStyle:p,labelBgPadding:h,labelBgBorderRadius:s,style:r,sourcePosition:a=ne.Bottom,targetPosition:d=ne.Top,markerEnd:u,markerStart:y,pathOptions:w,interactionWidth:E})=>{const[x,v,b]=Oe({sourceX:n,sourceY:o,sourcePosition:a,targetX:c,targetY:i,targetPosition:d,borderRadius:w==null?void 0:w.borderRadius,offset:w==null?void 0:w.offset}),C=e.isInternal?void 0:t;return m.jsx(ke,{id:C,path:x,labelX:v,labelY:b,label:l,labelStyle:f,labelShowBg:g,labelBgStyle:p,labelBgPadding:h,labelBgBorderRadius:s,style:r,markerEnd:u,markerStart:y,interactionWidth:E})})}const En=vn({isInternal:!1}),bn=vn({isInternal:!0});En.displayName="SmoothStepEdge";bn.displayName="SmoothStepEdgeInternal";function Nn(e){return S.memo(({id:t,...n})=>{var c;const o=e.isInternal?void 0:t;return m.jsx(En,{...n,id:o,pathOptions:S.useMemo(()=>{var i;return{borderRadius:0,offset:(i=n.pathOptions)==null?void 0:i.offset}},[(c=n.pathOptions)==null?void 0:c.offset])})})}const zr=Nn({isInternal:!1}),Cn=Nn({isInternal:!0});zr.displayName="StepEdge";Cn.displayName="StepEdgeInternal";function kn(e){return S.memo(({id:t,sourceX:n,sourceY:o,targetX:c,targetY:i,label:l,labelStyle:f,labelShowBg:g,labelBgStyle:p,labelBgPadding:h,labelBgBorderRadius:s,style:r,markerEnd:a,markerStart:d,interactionWidth:u})=>{const[y,w,E]=Yt({sourceX:n,sourceY:o,targetX:c,targetY:i}),x=e.isInternal?void 0:t;return m.jsx(ke,{id:x,path:y,labelX:w,labelY:E,label:l,labelStyle:f,labelShowBg:g,labelBgStyle:p,labelBgPadding:h,labelBgBorderRadius:s,style:r,markerEnd:a,markerStart:d,interactionWidth:u})})}const Br=kn({isInternal:!1}),_n=kn({isInternal:!0});Br.displayName="StraightEdge";_n.displayName="StraightEdgeInternal";function In(e){return S.memo(({id:t,sourceX:n,sourceY:o,targetX:c,targetY:i,sourcePosition:l=ne.Bottom,targetPosition:f=ne.Top,label:g,labelStyle:p,labelShowBg:h,labelBgStyle:s,labelBgPadding:r,labelBgBorderRadius:a,style:d,markerEnd:u,markerStart:y,pathOptions:w,interactionWidth:E})=>{const[x,v,b]=Ft({sourceX:n,sourceY:o,sourcePosition:l,targetX:c,targetY:i,targetPosition:f,curvature:w==null?void 0:w.curvature}),C=e.isInternal?void 0:t;return m.jsx(ke,{id:C,path:x,labelX:v,labelY:b,label:g,labelStyle:p,labelShowBg:h,labelBgStyle:s,labelBgPadding:r,labelBgBorderRadius:a,style:d,markerEnd:u,markerStart:y,interactionWidth:E})})}const Fr=In({isInternal:!1}),Mn=In({isInternal:!0});Fr.displayName="BezierEdge";Mn.displayName="BezierEdgeInternal";const At={default:Mn,straight:_n,step:Cn,smoothstep:bn,simplebezier:Sn},Lt={sourceX:null,sourceY:null,targetX:null,targetY:null,sourcePosition:null,targetPosition:null},Or=(e,t,n)=>n===ne.Left?e-t:n===ne.Right?e+t:e,Hr=(e,t,n)=>n===ne.Top?e-t:n===ne.Bottom?e+t:e,$t="react-flow__edgeupdater";function Rt({position:e,centerX:t,centerY:n,radius:o=10,onMouseDown:c,onMouseEnter:i,onMouseOut:l,type:f}){return m.jsx("circle",{onMouseDown:c,onMouseEnter:i,onMouseOut:l,className:ee([$t,`${$t}-${f}`]),cx:Or(t,o,e),cy:Hr(n,o,e),r:o,stroke:"transparent",fill:"transparent"})}function Tr({isReconnectable:e,reconnectRadius:t,edge:n,sourceX:o,sourceY:c,targetX:i,targetY:l,sourcePosition:f,targetPosition:g,onReconnect:p,onReconnectStart:h,onReconnectEnd:s,setReconnecting:r,setUpdateHover:a}){const d=X(),u=(v,b)=>{if(v.button!==0)return;const{autoPanOnConnect:C,domNode:k,isValidConnection:M,connectionMode:P,connectionRadius:_,lib:V,onConnectStart:T,onConnectEnd:H,cancelConnection:z,nodeLookup:L,rfId:I,panBy:D,updateConnection:N}=d.getState(),A=b.type==="target";r(!0),h==null||h(v,n,b.type);const $=(O,Z)=>{r(!1),s==null||s(O,n,b.type,Z)},R=O=>p==null?void 0:p(n,O);Ye.onPointerDown(v.nativeEvent,{autoPanOnConnect:C,connectionMode:P,connectionRadius:_,domNode:k,handleId:b.id,nodeId:b.nodeId,nodeLookup:L,isTarget:A,edgeUpdaterType:b.type,lib:V,flowId:I,cancelConnection:z,panBy:D,isValidConnection:M,onConnect:R,onConnectStart:T,onConnectEnd:H,onReconnectEnd:$,updateConnection:N,getTransform:()=>d.getState().transform,getFromHandle:()=>d.getState().connection.fromHandle})},y=v=>u(v,{nodeId:n.target,id:n.targetHandle??null,type:"target"}),w=v=>u(v,{nodeId:n.source,id:n.sourceHandle??null,type:"source"}),E=()=>a(!0),x=()=>a(!1);return m.jsxs(m.Fragment,{children:[(e===!0||e==="source")&&m.jsx(Rt,{position:f,centerX:o,centerY:c,radius:t,onMouseDown:y,onMouseEnter:E,onMouseOut:x,type:"source"}),(e===!0||e==="target")&&m.jsx(Rt,{position:g,centerX:i,centerY:l,radius:t,onMouseDown:w,onMouseEnter:E,onMouseOut:x,type:"target"})]})}function Zr({id:e,edgesFocusable:t,edgesReconnectable:n,elementsSelectable:o,onClick:c,onDoubleClick:i,onContextMenu:l,onMouseEnter:f,onMouseMove:g,onMouseLeave:p,reconnectRadius:h,onReconnect:s,onReconnectStart:r,onReconnectEnd:a,rfId:d,edgeTypes:u,noPanClassName:y,onError:w,disableKeyboardA11y:E}){let x=F(B=>B.edgeLookup.get(e));const v=F(B=>B.defaultEdgeOptions);x=v?{...v,...x}:x;let b=x.type||"default",C=(u==null?void 0:u[b])||At[b];C===void 0&&(w==null||w("011",ae.error011(b)),b="default",C=At.default);const k=!!(x.focusable||t&&typeof x.focusable>"u"),M=typeof s<"u"&&(x.reconnectable||n&&typeof x.reconnectable>"u"),P=!!(x.selectable||o&&typeof x.selectable>"u"),_=S.useRef(null),[V,T]=S.useState(!1),[H,z]=S.useState(!1),L=X(),{zIndex:I,sourceX:D,sourceY:N,targetX:A,targetY:$,sourcePosition:R,targetPosition:O}=F(S.useCallback(B=>{const q=B.nodeLookup.get(x.source),oe=B.nodeLookup.get(x.target);if(!q||!oe)return{zIndex:x.zIndex,...Lt};const se=Xo({id:e,sourceNode:q,targetNode:oe,sourceHandle:x.sourceHandle||null,targetHandle:x.targetHandle||null,connectionMode:B.connectionMode,onError:w});return{zIndex:qo({selected:x.selected,zIndex:x.zIndex,sourceNode:q,targetNode:oe,elevateOnSelect:B.elevateEdgesOnSelect}),...se||Lt}},[x.source,x.target,x.sourceHandle,x.targetHandle,x.selected,x.zIndex]),U),Z=S.useMemo(()=>x.markerStart?`url('#${at(x.markerStart,d)}')`:void 0,[x.markerStart,d]),W=S.useMemo(()=>x.markerEnd?`url('#${at(x.markerEnd,d)}')`:void 0,[x.markerEnd,d]);if(x.hidden||D===null||N===null||A===null||$===null)return null;const Q=B=>{var re;const{addSelectedEdges:q,unselectNodesAndEdges:oe,multiSelectionActive:se}=L.getState();P&&(L.setState({nodesSelectionActive:!1}),x.selected&&se?(oe({nodes:[],edges:[x]}),(re=_.current)==null||re.blur()):q([e])),c&&c(B,x)},G=i?B=>{i(B,{...x})}:void 0,K=l?B=>{l(B,{...x})}:void 0,j=f?B=>{f(B,{...x})}:void 0,Y=g?B=>{g(B,{...x})}:void 0,te=p?B=>{p(B,{...x})}:void 0,J=B=>{var q;if(!E&&Qt.includes(B.key)&&P){const{unselectNodesAndEdges:oe,addSelectedEdges:se}=L.getState();B.key==="Escape"?((q=_.current)==null||q.blur(),oe({edges:[x]})):se([e])}};return m.jsx("svg",{style:{zIndex:I},children:m.jsxs("g",{className:ee(["react-flow__edge",`react-flow__edge-${b}`,x.className,y,{selected:x.selected,animated:x.animated,inactive:!P&&!c,updating:V,selectable:P}]),onClick:Q,onDoubleClick:G,onContextMenu:K,onMouseEnter:j,onMouseMove:Y,onMouseLeave:te,onKeyDown:k?J:void 0,tabIndex:k?0:void 0,role:k?"button":"img","data-id":e,"data-testid":`rf__edge-${e}`,"aria-label":x.ariaLabel===null?void 0:x.ariaLabel||`Edge from ${x.source} to ${x.target}`,"aria-describedby":k?`${rn}-${d}`:void 0,ref:_,children:[!H&&m.jsx(C,{id:e,source:x.source,target:x.target,type:x.type,selected:x.selected,animated:x.animated,selectable:P,deletable:x.deletable??!0,label:x.label,labelStyle:x.labelStyle,labelShowBg:x.labelShowBg,labelBgStyle:x.labelBgStyle,labelBgPadding:x.labelBgPadding,labelBgBorderRadius:x.labelBgBorderRadius,sourceX:D,sourceY:N,targetX:A,targetY:$,sourcePosition:R,targetPosition:O,data:x.data,style:x.style,sourceHandleId:x.sourceHandle,targetHandleId:x.targetHandle,markerStart:Z,markerEnd:W,pathOptions:"pathOptions"in x?x.pathOptions:void 0,interactionWidth:x.interactionWidth}),M&&m.jsx(Tr,{edge:x,isReconnectable:M,reconnectRadius:h,onReconnect:s,onReconnectStart:r,onReconnectEnd:a,sourceX:D,sourceY:N,targetX:A,targetY:$,sourcePosition:R,targetPosition:O,setUpdateHover:T,setReconnecting:z})]})})}const Wr=e=>({width:e.width,height:e.height,edgesFocusable:e.edgesFocusable,edgesReconnectable:e.edgesReconnectable,elementsSelectable:e.elementsSelectable,connectionMode:e.connectionMode,onError:e.onError});function Pn({defaultMarkerColor:e,onlyRenderVisibleElements:t,rfId:n,edgeTypes:o,noPanClassName:c,onReconnect:i,onEdgeContextMenu:l,onEdgeMouseEnter:f,onEdgeMouseMove:g,onEdgeMouseLeave:p,onEdgeClick:h,reconnectRadius:s,onEdgeDoubleClick:r,onReconnectStart:a,onReconnectEnd:d,disableKeyboardA11y:u}){const{edgesFocusable:y,edgesReconnectable:w,elementsSelectable:E,onError:x}=F(Wr,U),v=Pr(t);return m.jsxs("div",{className:"react-flow__edges",children:[m.jsx($r,{defaultColor:e,rfId:n}),v.map(b=>m.jsx(Zr,{id:b,edgesFocusable:y,edgesReconnectable:w,elementsSelectable:E,noPanClassName:c,onReconnect:i,onContextMenu:l,onMouseEnter:f,onMouseMove:g,onMouseLeave:p,onClick:h,reconnectRadius:s,onDoubleClick:r,onReconnectStart:a,onReconnectEnd:d,rfId:n,onError:x,edgeTypes:o,disableKeyboardA11y:u},b))]})}Pn.displayName="EdgeRenderer";const Yr=S.memo(Pn),Xr=e=>`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`;function qr({children:e}){const t=F(Xr);return m.jsx("div",{className:"react-flow__viewport xyflow__viewport react-flow__container",style:{transform:t},children:e})}function Gr(e){const t=Ue(),n=S.useRef(!1);S.useEffect(()=>{!n.current&&t.viewportInitialized&&e&&(setTimeout(()=>e(t),1),n.current=!0)},[e,t.viewportInitialized])}const Kr=e=>{var t;return(t=e.panZoom)==null?void 0:t.syncViewport};function Ur(e){const t=F(Kr),n=X();return S.useEffect(()=>{e&&(t==null||t(e),n.setState({transform:[e.x,e.y,e.zoom]}))},[e,t]),null}function Qr(e){return e.connection.inProgress?{...e.connection,to:Kt(e.connection.to,e.transform)}:{...e.connection}}function Jr(e){return Qr}function ei(e){const t=Jr();return F(t,U)}const ti=e=>({nodesConnectable:e.nodesConnectable,isValid:e.connection.isValid,inProgress:e.connection.inProgress,width:e.width,height:e.height});function ni({containerStyle:e,style:t,type:n,component:o}){const{nodesConnectable:c,width:i,height:l,isValid:f,inProgress:g}=F(ti,U);return!(i&&c&&g)?null:m.jsx("svg",{style:e,width:i,height:l,className:"react-flow__connectionline react-flow__container",children:m.jsx("g",{className:ee(["react-flow__connection",Xt(f)]),children:m.jsx(jn,{style:t,type:n,CustomComponent:o,isValid:f})})})}const jn=({style:e,type:t=de.Bezier,CustomComponent:n,isValid:o})=>{const{inProgress:c,from:i,fromNode:l,fromHandle:f,fromPosition:g,to:p,toNode:h,toHandle:s,toPosition:r}=ei();if(!c)return;if(n)return m.jsx(n,{connectionLineType:t,connectionLineStyle:e,fromNode:l,fromHandle:f,fromX:i.x,fromY:i.y,toX:p.x,toY:p.y,fromPosition:g,toPosition:r,connectionStatus:Xt(o),toNode:h,toHandle:s});let a="";const d={sourceX:i.x,sourceY:i.y,sourcePosition:g,targetX:p.x,targetY:p.y,targetPosition:r};switch(t){case de.Bezier:[a]=Ft(d);break;case de.SimpleBezier:[a]=xn(d);break;case de.Step:[a]=Oe({...d,borderRadius:0});break;case de.SmoothStep:[a]=Oe(d);break;default:[a]=Yt(d)}return m.jsx("path",{d:a,fill:"none",className:"react-flow__connection-path",style:e})};jn.displayName="ConnectionLine";const oi={};function Vt(e=oi){S.useRef(e),X(),S.useEffect(()=>{},[e])}function si(){X(),S.useRef(!1),S.useEffect(()=>{},[])}function Dn({nodeTypes:e,edgeTypes:t,onInit:n,onNodeClick:o,onEdgeClick:c,onNodeDoubleClick:i,onEdgeDoubleClick:l,onNodeMouseEnter:f,onNodeMouseMove:g,onNodeMouseLeave:p,onNodeContextMenu:h,onSelectionContextMenu:s,onSelectionStart:r,onSelectionEnd:a,connectionLineType:d,connectionLineStyle:u,connectionLineComponent:y,connectionLineContainerStyle:w,selectionKeyCode:E,selectionOnDrag:x,selectionMode:v,multiSelectionKeyCode:b,panActivationKeyCode:C,zoomActivationKeyCode:k,deleteKeyCode:M,onlyRenderVisibleElements:P,elementsSelectable:_,defaultViewport:V,translateExtent:T,minZoom:H,maxZoom:z,preventScrolling:L,defaultMarkerColor:I,zoomOnScroll:D,zoomOnPinch:N,panOnScroll:A,panOnScrollSpeed:$,panOnScrollMode:R,zoomOnDoubleClick:O,panOnDrag:Z,onPaneClick:W,onPaneMouseEnter:Q,onPaneMouseMove:G,onPaneMouseLeave:K,onPaneScroll:j,onPaneContextMenu:Y,paneClickDistance:te,nodeClickDistance:J,onEdgeContextMenu:B,onEdgeMouseEnter:q,onEdgeMouseMove:oe,onEdgeMouseLeave:se,reconnectRadius:re,onReconnect:_e,onReconnectStart:Ie,onReconnectEnd:Me,noDragClassName:ue,noWheelClassName:Pe,noPanClassName:fe,disableKeyboardA11y:ge,nodeExtent:je,rfId:pe,viewport:he,onViewportChange:we}){return Vt(e),Vt(t),si(),Gr(n),Ur(he),m.jsx(vr,{onPaneClick:W,onPaneMouseEnter:Q,onPaneMouseMove:G,onPaneMouseLeave:K,onPaneContextMenu:Y,onPaneScroll:j,paneClickDistance:te,deleteKeyCode:M,selectionKeyCode:E,selectionOnDrag:x,selectionMode:v,onSelectionStart:r,onSelectionEnd:a,multiSelectionKeyCode:b,panActivationKeyCode:C,zoomActivationKeyCode:k,elementsSelectable:_,zoomOnScroll:D,zoomOnPinch:N,zoomOnDoubleClick:O,panOnScroll:A,panOnScrollSpeed:$,panOnScrollMode:R,panOnDrag:Z,defaultViewport:V,translateExtent:T,minZoom:H,maxZoom:z,onSelectionContextMenu:s,preventScrolling:L,noDragClassName:ue,noWheelClassName:Pe,noPanClassName:fe,disableKeyboardA11y:ge,onViewportChange:we,isControlledViewport:!!he,children:m.jsxs(qr,{children:[m.jsx(Yr,{edgeTypes:t,onEdgeClick:c,onEdgeDoubleClick:l,onReconnect:_e,onReconnectStart:Ie,onReconnectEnd:Me,onlyRenderVisibleElements:P,onEdgeContextMenu:B,onEdgeMouseEnter:q,onEdgeMouseMove:oe,onEdgeMouseLeave:se,reconnectRadius:re,defaultMarkerColor:I,noPanClassName:fe,disableKeyboardA11y:ge,rfId:pe}),m.jsx(ni,{style:u,type:d,component:y,containerStyle:w}),m.jsx("div",{className:"react-flow__edgelabel-renderer"}),m.jsx(Mr,{nodeTypes:e,onNodeClick:o,onNodeDoubleClick:i,onNodeMouseEnter:f,onNodeMouseMove:g,onNodeMouseLeave:p,onNodeContextMenu:h,nodeClickDistance:J,onlyRenderVisibleElements:P,noPanClassName:fe,noDragClassName:ue,disableKeyboardA11y:ge,nodeExtent:je,rfId:pe}),m.jsx("div",{className:"react-flow__viewport-portal"})]})})}Dn.displayName="GraphView";const ri=S.memo(Dn),zt=({nodes:e,edges:t,defaultNodes:n,defaultEdges:o,width:c,height:i,fitView:l,nodeOrigin:f,nodeExtent:g}={})=>{const p=new Map,h=new Map,s=new Map,r=new Map,a=o??t??[],d=n??e??[],u=f??[0,0],y=g??ve;en(s,r,a),Xe(d,p,h,{nodeOrigin:u,nodeExtent:y,elevateNodesOnSelect:!1});let w=[0,0,1];if(l&&c&&i){const E=Ge(p,{filter:C=>!!((C.width||C.initialWidth)&&(C.height||C.initialHeight))}),{x,y:v,zoom:b}=Gt(E,c,i,.5,2,.1);w=[x,v,b]}return{rfId:"1",width:0,height:0,transform:w,nodes:d,nodeLookup:p,parentLookup:h,edges:a,edgeLookup:r,connectionLookup:s,onNodesChange:null,onEdgesChange:null,hasDefaultNodes:n!==void 0,hasDefaultEdges:o!==void 0,panZoom:null,minZoom:.5,maxZoom:2,translateExtent:ve,nodeExtent:y,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionMode:Jt.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:u,nodeDragThreshold:1,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesReconnectable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,elevateEdgesOnSelect:!1,fitViewOnInit:!1,fitViewDone:!1,fitViewOnInitOptions:void 0,selectNodesOnDrag:!0,multiSelectionActive:!1,connection:{...tn},connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,autoPanSpeed:15,connectionRadius:20,onError:ds,isValidConnection:void 0,onSelectionChangeHandlers:[],lib:"react",debug:!1}},ii=({nodes:e,edges:t,defaultNodes:n,defaultEdges:o,width:c,height:i,fitView:l,nodeOrigin:f,nodeExtent:g})=>bs((p,h)=>({...zt({nodes:e,edges:t,width:c,height:i,fitView:l,nodeOrigin:f,nodeExtent:g,defaultNodes:n,defaultEdges:o}),setNodes:s=>{const{nodeLookup:r,parentLookup:a,nodeOrigin:d,elevateNodesOnSelect:u}=h();Xe(s,r,a,{nodeOrigin:d,nodeExtent:g,elevateNodesOnSelect:u,checkEquality:!0}),p({nodes:s})},setEdges:s=>{const{connectionLookup:r,edgeLookup:a}=h();en(r,a,s),p({edges:s})},setDefaultNodesAndEdges:(s,r)=>{if(s){const{setNodes:a}=h();a(s),p({hasDefaultNodes:!0})}if(r){const{setEdges:a}=h();a(r),p({hasDefaultEdges:!0})}},updateNodeInternals:(s,r={triggerFitView:!0})=>{const{triggerNodeChanges:a,nodeLookup:d,parentLookup:u,fitViewOnInit:y,fitViewDone:w,fitViewOnInitOptions:E,domNode:x,nodeOrigin:v,nodeExtent:b,debug:C,fitViewSync:k}=h(),{changes:M,updatedInternals:P}=is(s,d,u,x,v,b);if(P){if(cs(d,u,{nodeOrigin:v,nodeExtent:b}),r.triggerFitView){let _=w;!w&&y&&(_=k({...E,nodes:E==null?void 0:E.nodes})),p({fitViewDone:_})}else p({});(M==null?void 0:M.length)>0&&(C&&console.log("React Flow: trigger node changes",M),a==null||a(M))}},updateNodePositions:(s,r=!1)=>{const a=[],d=[];for(const[u,y]of s){const w={id:u,type:"position",position:y.position,dragging:r};y!=null&&y.expandParent&&(y!=null&&y.parentId)&&w.position&&(a.push({id:u,parentId:y.parentId,rect:{...y.internals.positionAbsolute,width:y.measured.width,height:y.measured.height}}),w.position.x=Math.max(0,w.position.x),w.position.y=Math.max(0,w.position.y)),d.push(w)}if(a.length>0){const{nodeLookup:u,parentLookup:y,nodeOrigin:w}=h(),E=Tt(a,u,y,w);d.push(...E)}h().triggerNodeChanges(d)},triggerNodeChanges:s=>{const{onNodesChange:r,setNodes:a,nodes:d,hasDefaultNodes:u,debug:y}=h();if(s!=null&&s.length){if(u){const w=Zs(s,d);a(w)}y&&console.log("React Flow: trigger node changes",s),r==null||r(s)}},triggerEdgeChanges:s=>{const{onEdgesChange:r,setEdges:a,edges:d,hasDefaultEdges:u,debug:y}=h();if(s!=null&&s.length){if(u){const w=Ws(s,d);a(w)}y&&console.log("React Flow: trigger edge changes",s),r==null||r(s)}},addSelectedNodes:s=>{const{multiSelectionActive:r,edgeLookup:a,nodeLookup:d,triggerNodeChanges:u,triggerEdgeChanges:y}=h();if(r){const w=s.map(E=>ce(E,!0));u(w);return}u(le(d,new Set([...s]),!0)),y(le(a))},addSelectedEdges:s=>{const{multiSelectionActive:r,edgeLookup:a,nodeLookup:d,triggerNodeChanges:u,triggerEdgeChanges:y}=h();if(r){const w=s.map(E=>ce(E,!0));y(w);return}y(le(a,new Set([...s]))),u(le(d,new Set,!0))},unselectNodesAndEdges:({nodes:s,edges:r}={})=>{const{edges:a,nodes:d,nodeLookup:u,triggerNodeChanges:y,triggerEdgeChanges:w}=h(),E=s||d,x=r||a,v=E.map(C=>{const k=u.get(C.id);return k&&(k.selected=!1),ce(C.id,!1)}),b=x.map(C=>ce(C.id,!1));y(v),w(b)},setMinZoom:s=>{const{panZoom:r,maxZoom:a}=h();r==null||r.setScaleExtent([s,a]),p({minZoom:s})},setMaxZoom:s=>{const{panZoom:r,minZoom:a}=h();r==null||r.setScaleExtent([a,s]),p({maxZoom:s})},setTranslateExtent:s=>{var r;(r=h().panZoom)==null||r.setTranslateExtent(s),p({translateExtent:s})},setPaneClickDistance:s=>{var r;(r=h().panZoom)==null||r.setClickDistance(s)},resetSelectedElements:()=>{const{edges:s,nodes:r,triggerNodeChanges:a,triggerEdgeChanges:d}=h(),u=r.reduce((w,E)=>E.selected?[...w,ce(E.id,!1)]:w,[]),y=s.reduce((w,E)=>E.selected?[...w,ce(E.id,!1)]:w,[]);a(u),d(y)},setNodeExtent:s=>{const{nodes:r,nodeLookup:a,parentLookup:d,nodeOrigin:u,elevateNodesOnSelect:y,nodeExtent:w}=h();s[0][0]===w[0][0]&&s[0][1]===w[0][1]&&s[1][0]===w[1][0]&&s[1][1]===w[1][1]||(Xe(r,a,d,{nodeOrigin:u,nodeExtent:s,elevateNodesOnSelect:y,checkEquality:!1}),p({nodeExtent:s}))},panBy:s=>{const{transform:r,width:a,height:d,panZoom:u,translateExtent:y}=h();return as({delta:s,panZoom:u,transform:r,translateExtent:y,width:a,height:d})},fitView:s=>{const{panZoom:r,width:a,height:d,minZoom:u,maxZoom:y,nodeLookup:w}=h();if(!r)return Promise.resolve(!1);const E=Ze(w,s);return We({nodes:E,width:a,height:d,panZoom:r,minZoom:u,maxZoom:y},s)},fitViewSync:s=>{const{panZoom:r,width:a,height:d,minZoom:u,maxZoom:y,nodeLookup:w}=h();if(!r)return!1;const E=Ze(w,s);return We({nodes:E,width:a,height:d,panZoom:r,minZoom:u,maxZoom:y},s),E.size>0},cancelConnection:()=>{p({connection:{...tn}})},updateConnection:s=>{p({connection:s})},reset:()=>p({...zt()})}),Object.is);function ci({initialNodes:e,initialEdges:t,defaultNodes:n,defaultEdges:o,initialWidth:c,initialHeight:i,fitView:l,nodeOrigin:f,nodeExtent:g,children:p}){const[h]=S.useState(()=>ii({nodes:e,edges:t,defaultNodes:n,defaultEdges:o,width:c,height:i,fitView:l,nodeOrigin:f,nodeExtent:g}));return m.jsx(Ns,{value:h,children:m.jsx(Gs,{children:p})})}function ai({children:e,nodes:t,edges:n,defaultNodes:o,defaultEdges:c,width:i,height:l,fitView:f,nodeOrigin:g,nodeExtent:p}){return S.useContext(Ne)?m.jsx(m.Fragment,{children:e}):m.jsx(ci,{initialNodes:t,initialEdges:n,defaultNodes:o,defaultEdges:c,initialWidth:i,initialHeight:l,fitView:f,nodeOrigin:g,nodeExtent:p,children:e})}const di={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0};function li({nodes:e,edges:t,defaultNodes:n,defaultEdges:o,className:c,nodeTypes:i,edgeTypes:l,onNodeClick:f,onEdgeClick:g,onInit:p,onMove:h,onMoveStart:s,onMoveEnd:r,onConnect:a,onConnectStart:d,onConnectEnd:u,onClickConnectStart:y,onClickConnectEnd:w,onNodeMouseEnter:E,onNodeMouseMove:x,onNodeMouseLeave:v,onNodeContextMenu:b,onNodeDoubleClick:C,onNodeDragStart:k,onNodeDrag:M,onNodeDragStop:P,onNodesDelete:_,onEdgesDelete:V,onDelete:T,onSelectionChange:H,onSelectionDragStart:z,onSelectionDrag:L,onSelectionDragStop:I,onSelectionContextMenu:D,onSelectionStart:N,onSelectionEnd:A,onBeforeDelete:$,connectionMode:R,connectionLineType:O=de.Bezier,connectionLineStyle:Z,connectionLineComponent:W,connectionLineContainerStyle:Q,deleteKeyCode:G="Backspace",selectionKeyCode:K="Shift",selectionOnDrag:j=!1,selectionMode:Y=He.Full,panActivationKeyCode:te="Space",multiSelectionKeyCode:J=dt()?"Meta":"Control",zoomActivationKeyCode:B=dt()?"Meta":"Control",snapToGrid:q,snapGrid:oe,onlyRenderVisibleElements:se=!1,selectNodesOnDrag:re,nodesDraggable:_e,nodesConnectable:Ie,nodesFocusable:Me,nodeOrigin:ue=cn,edgesFocusable:Pe,edgesReconnectable:fe,elementsSelectable:ge=!0,defaultViewport:je=Vs,minZoom:pe=.5,maxZoom:he=2,translateExtent:we=ve,preventScrolling:Rn=!0,nodeExtent:De,defaultMarkerColor:Vn="#b1b1b7",zoomOnScroll:zn=!0,zoomOnPinch:Bn=!0,panOnScroll:Fn=!1,panOnScrollSpeed:On=.5,panOnScrollMode:Hn=Zt.Free,zoomOnDoubleClick:Tn=!0,panOnDrag:Zn=!0,onPaneClick:Wn,onPaneMouseEnter:Yn,onPaneMouseMove:Xn,onPaneMouseLeave:qn,onPaneScroll:Gn,onPaneContextMenu:Kn,paneClickDistance:Je=0,nodeClickDistance:Un=0,children:Qn,onReconnect:Jn,onReconnectStart:eo,onReconnectEnd:to,onEdgeContextMenu:no,onEdgeDoubleClick:oo,onEdgeMouseEnter:so,onEdgeMouseMove:ro,onEdgeMouseLeave:io,reconnectRadius:co=10,onNodesChange:ao,onEdgesChange:lo,noDragClassName:uo="nodrag",noWheelClassName:fo="nowheel",noPanClassName:et="nopan",fitView:tt,fitViewOptions:go,connectOnClick:po,attributionPosition:ho,proOptions:mo,defaultEdgeOptions:wo,elevateNodesOnSelect:xo,elevateEdgesOnSelect:yo,disableKeyboardA11y:nt=!1,autoPanOnConnect:So,autoPanOnNodeDrag:vo,autoPanSpeed:Eo,connectionRadius:bo,isValidConnection:No,onError:Co,style:ko,id:ot,nodeDragThreshold:_o,viewport:Io,onViewportChange:Mo,width:Po,height:jo,colorMode:Do="light",debug:Ao,...Lo},$o){const Ae=ot||"1",Ro=Os(Do);return m.jsx("div",{...Lo,style:{...ko,...di},ref:$o,className:ee(["react-flow",c,Ro]),"data-testid":"rf__wrapper",id:ot,children:m.jsxs(ai,{nodes:e,edges:t,width:Po,height:jo,fitView:tt,nodeOrigin:ue,nodeExtent:De,children:[m.jsx(ri,{onInit:p,onNodeClick:f,onEdgeClick:g,onNodeMouseEnter:E,onNodeMouseMove:x,onNodeMouseLeave:v,onNodeContextMenu:b,onNodeDoubleClick:C,nodeTypes:i,edgeTypes:l,connectionLineType:O,connectionLineStyle:Z,connectionLineComponent:W,connectionLineContainerStyle:Q,selectionKeyCode:K,selectionOnDrag:j,selectionMode:Y,deleteKeyCode:G,multiSelectionKeyCode:J,panActivationKeyCode:te,zoomActivationKeyCode:B,onlyRenderVisibleElements:se,defaultViewport:je,translateExtent:we,minZoom:pe,maxZoom:he,preventScrolling:Rn,zoomOnScroll:zn,zoomOnPinch:Bn,zoomOnDoubleClick:Tn,panOnScroll:Fn,panOnScrollSpeed:On,panOnScrollMode:Hn,panOnDrag:Zn,onPaneClick:Wn,onPaneMouseEnter:Yn,onPaneMouseMove:Xn,onPaneMouseLeave:qn,onPaneScroll:Gn,onPaneContextMenu:Kn,paneClickDistance:Je,nodeClickDistance:Un,onSelectionContextMenu:D,onSelectionStart:N,onSelectionEnd:A,onReconnect:Jn,onReconnectStart:eo,onReconnectEnd:to,onEdgeContextMenu:no,onEdgeDoubleClick:oo,onEdgeMouseEnter:so,onEdgeMouseMove:ro,onEdgeMouseLeave:io,reconnectRadius:co,defaultMarkerColor:Vn,noDragClassName:uo,noWheelClassName:fo,noPanClassName:et,rfId:Ae,disableKeyboardA11y:nt,nodeExtent:De,viewport:Io,onViewportChange:Mo}),m.jsx(Fs,{nodes:e,edges:t,defaultNodes:n,defaultEdges:o,onConnect:a,onConnectStart:d,onConnectEnd:u,onClickConnectStart:y,onClickConnectEnd:w,nodesDraggable:_e,nodesConnectable:Ie,nodesFocusable:Me,edgesFocusable:Pe,edgesReconnectable:fe,elementsSelectable:ge,elevateNodesOnSelect:xo,elevateEdgesOnSelect:yo,minZoom:pe,maxZoom:he,nodeExtent:De,onNodesChange:ao,onEdgesChange:lo,snapToGrid:q,snapGrid:oe,connectionMode:R,translateExtent:we,connectOnClick:po,defaultEdgeOptions:wo,fitView:tt,fitViewOptions:go,onNodesDelete:_,onEdgesDelete:V,onDelete:T,onNodeDragStart:k,onNodeDrag:M,onNodeDragStop:P,onSelectionDrag:L,onSelectionDragStart:z,onSelectionDragStop:I,onMove:h,onMoveStart:s,onMoveEnd:r,noPanClassName:et,nodeOrigin:ue,rfId:Ae,autoPanOnConnect:So,autoPanOnNodeDrag:vo,autoPanSpeed:Eo,onError:Co,connectionRadius:bo,isValidConnection:No,selectNodesOnDrag:re,nodeDragThreshold:_o,onBeforeDelete:$,paneClickDistance:Je,debug:Ao}),m.jsx(Rs,{onSelectionChange:H}),Qn,m.jsx(js,{proOptions:mo,position:ho}),m.jsx(Ms,{rfId:Ae,disableKeyboardA11y:nt})]})})}var ui=dn(li);function fi({dimensions:e,lineWidth:t,variant:n,className:o}){return m.jsx("path",{strokeWidth:t,d:`M${e[0]/2} 0 V${e[1]} M0 ${e[1]/2} H${e[0]}`,className:ee(["react-flow__background-pattern",n,o])})}function gi({radius:e,className:t}){return m.jsx("circle",{cx:e,cy:e,r:e,className:ee(["react-flow__background-pattern","dots",t])})}var ie;(function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"})(ie||(ie={}));const pi={[ie.Dots]:1,[ie.Lines]:1,[ie.Cross]:6},hi=e=>({transform:e.transform,patternId:`pattern-${e.rfId}`});function An({id:e,variant:t=ie.Dots,gap:n=20,size:o,lineWidth:c=1,offset:i=0,color:l,bgColor:f,style:g,className:p,patternClassName:h}){const s=S.useRef(null),{transform:r,patternId:a}=F(hi,U),d=o||pi[t],u=t===ie.Dots,y=t===ie.Cross,w=Array.isArray(n)?n:[n,n],E=[w[0]*r[2]||1,w[1]*r[2]||1],x=d*r[2],v=Array.isArray(i)?i:[i,i],b=y?[x,x]:E,C=[v[0]*r[2]||1+b[0]/2,v[1]*r[2]||1+b[1]/2],k=`${a}${e||""}`;return m.jsxs("svg",{className:ee(["react-flow__background",p]),style:{...g,...Ce,"--xy-background-color-props":f,"--xy-background-pattern-color-props":l},ref:s,"data-testid":"rf__background",children:[m.jsx("pattern",{id:k,x:r[0]%E[0],y:r[1]%E[1],width:E[0],height:E[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${C[0]},-${C[1]})`,children:u?m.jsx(gi,{radius:x/2,className:h}):m.jsx(fi,{dimensions:b,lineWidth:c,variant:t,className:h})}),m.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${k})`})]})}An.displayName="Background";const mi=S.memo(An);function wi(){return m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",children:m.jsx("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"})})}function xi(){return m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5",children:m.jsx("path",{d:"M0 0h32v4.2H0z"})})}function yi(){return m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30",children:m.jsx("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"})})}function Si(){return m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:m.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"})})}function vi(){return m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:m.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"})})}function ye({children:e,className:t,...n}){return m.jsx("button",{type:"button",className:ee(["react-flow__controls-button",t]),...n,children:e})}const Ei=e=>({isInteractive:e.nodesDraggable||e.nodesConnectable||e.elementsSelectable,minZoomReached:e.transform[2]<=e.minZoom,maxZoomReached:e.transform[2]>=e.maxZoom});function Ln({style:e,showZoom:t=!0,showFitView:n=!0,showInteractive:o=!0,fitViewOptions:c,onZoomIn:i,onZoomOut:l,onFitView:f,onInteractiveChange:g,className:p,children:h,position:s="bottom-left",orientation:r="vertical","aria-label":a="React Flow controls"}){const d=X(),{isInteractive:u,minZoomReached:y,maxZoomReached:w}=F(Ei,U),{zoomIn:E,zoomOut:x,fitView:v}=Ue(),b=()=>{E(),i==null||i()},C=()=>{x(),l==null||l()},k=()=>{v(c),f==null||f()},M=()=>{d.setState({nodesDraggable:!u,nodesConnectable:!u,elementsSelectable:!u}),g==null||g(!u)},P=r==="horizontal"?"horizontal":"vertical";return m.jsxs(Ke,{className:ee(["react-flow__controls",P,p]),position:s,style:e,"data-testid":"rf__controls","aria-label":a,children:[t&&m.jsxs(m.Fragment,{children:[m.jsx(ye,{onClick:b,className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",disabled:w,children:m.jsx(wi,{})}),m.jsx(ye,{onClick:C,className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",disabled:y,children:m.jsx(xi,{})})]}),n&&m.jsx(ye,{className:"react-flow__controls-fitview",onClick:k,title:"fit view","aria-label":"fit view",children:m.jsx(yi,{})}),o&&m.jsx(ye,{className:"react-flow__controls-interactive",onClick:M,title:"toggle interactivity","aria-label":"toggle interactivity",children:u?m.jsx(vi,{}):m.jsx(Si,{})}),h]})}Ln.displayName="Controls";const bi=S.memo(Ln);function Ni({id:e,x:t,y:n,width:o,height:c,style:i,color:l,strokeColor:f,strokeWidth:g,className:p,borderRadius:h,shapeRendering:s,selected:r,onClick:a}){const{background:d,backgroundColor:u}=i||{},y=l||d||u;return m.jsx("rect",{className:ee(["react-flow__minimap-node",{selected:r},p]),x:t,y:n,rx:h,ry:h,width:o,height:c,style:{fill:y,stroke:f,strokeWidth:g},shapeRendering:s,onClick:a?w=>a(w,e):void 0})}const Ci=S.memo(Ni),ki=e=>e.nodes.map(t=>t.id),Fe=e=>e instanceof Function?e:()=>e;function _i({nodeStrokeColor:e,nodeColor:t,nodeClassName:n="",nodeBorderRadius:o=5,nodeStrokeWidth:c,nodeComponent:i=Ci,onClick:l}){const f=F(ki,U),g=Fe(t),p=Fe(e),h=Fe(n),s=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision";return m.jsx(m.Fragment,{children:f.map(r=>m.jsx(Mi,{id:r,nodeColorFunc:g,nodeStrokeColorFunc:p,nodeClassNameFunc:h,nodeBorderRadius:o,nodeStrokeWidth:c,NodeComponent:i,onClick:l,shapeRendering:s},r))})}function Ii({id:e,nodeColorFunc:t,nodeStrokeColorFunc:n,nodeClassNameFunc:o,nodeBorderRadius:c,nodeStrokeWidth:i,shapeRendering:l,NodeComponent:f,onClick:g}){const{node:p,x:h,y:s,width:r,height:a}=F(d=>{const u=d.nodeLookup.get(e),{x:y,y:w}=u.internals.positionAbsolute,{width:E,height:x}=Wt(u);return{node:u,x:y,y:w,width:E,height:x}},U);return!p||p.hidden||!Ot(p)?null:m.jsx(f,{x:h,y:s,width:r,height:a,style:p.style,selected:!!p.selected,className:o(p),color:t(p),borderRadius:c,strokeColor:n(p),strokeWidth:i,shapeRendering:l,onClick:g,id:p.id})}const Mi=S.memo(Ii);var Pi=S.memo(_i);const ji=200,Di=150,Ai=e=>{const t={x:-e.transform[0]/e.transform[2],y:-e.transform[1]/e.transform[2],width:e.width/e.transform[2],height:e.height/e.transform[2]};return{viewBB:t,boundingRect:e.nodeLookup.size>0?rs(Ge(e.nodeLookup),t):t,rfId:e.rfId,panZoom:e.panZoom,translateExtent:e.translateExtent,flowWidth:e.width,flowHeight:e.height}},Li="react-flow__minimap-desc";function $n({style:e,className:t,nodeStrokeColor:n,nodeColor:o,nodeClassName:c="",nodeBorderRadius:i=5,nodeStrokeWidth:l,nodeComponent:f,bgColor:g,maskColor:p,maskStrokeColor:h,maskStrokeWidth:s,position:r="bottom-right",onClick:a,onNodeClick:d,pannable:u=!1,zoomable:y=!1,ariaLabel:w="React Flow mini map",inversePan:E,zoomStep:x=10,offsetScale:v=5}){const b=X(),C=S.useRef(null),{boundingRect:k,viewBB:M,rfId:P,panZoom:_,translateExtent:V,flowWidth:T,flowHeight:H}=F(Ai,U),z=(e==null?void 0:e.width)??ji,L=(e==null?void 0:e.height)??Di,I=k.width/z,D=k.height/L,N=Math.max(I,D),A=N*z,$=N*L,R=v*N,O=k.x-(A-k.width)/2-R,Z=k.y-($-k.height)/2-R,W=A+R*2,Q=$+R*2,G=`${Li}-${P}`,K=S.useRef(0),j=S.useRef();K.current=N,S.useEffect(()=>{if(C.current&&_)return j.current=Oo({domNode:C.current,panZoom:_,getTransform:()=>b.getState().transform,getViewScale:()=>K.current}),()=>{var J;(J=j.current)==null||J.destroy()}},[_]),S.useEffect(()=>{var J;(J=j.current)==null||J.update({translateExtent:V,width:T,height:H,inversePan:E,pannable:u,zoomStep:x,zoomable:y})},[u,y,E,x,V,T,H]);const Y=a?J=>{var oe;const[B,q]=((oe=j.current)==null?void 0:oe.pointer(J))||[0,0];a(J,{x:B,y:q})}:void 0,te=d?S.useCallback((J,B)=>{const q=b.getState().nodeLookup.get(B);d(J,q)},[]):void 0;return m.jsx(Ke,{position:r,style:{...e,"--xy-minimap-background-color-props":typeof g=="string"?g:void 0,"--xy-minimap-mask-background-color-props":typeof p=="string"?p:void 0,"--xy-minimap-mask-stroke-color-props":typeof h=="string"?h:void 0,"--xy-minimap-mask-stroke-width-props":typeof s=="number"?s*N:void 0,"--xy-minimap-node-background-color-props":typeof o=="string"?o:void 0,"--xy-minimap-node-stroke-color-props":typeof n=="string"?n:void 0,"--xy-minimap-node-stroke-width-props":typeof l=="string"?l:void 0},className:ee(["react-flow__minimap",t]),"data-testid":"rf__minimap",children:m.jsxs("svg",{width:z,height:L,viewBox:`${O} ${Z} ${W} ${Q}`,className:"react-flow__minimap-svg",role:"img","aria-labelledby":G,ref:C,onClick:Y,children:[w&&m.jsx("title",{id:G,children:w}),m.jsx(Pi,{onClick:te,nodeColor:o,nodeStrokeColor:n,nodeBorderRadius:i,nodeClassName:c,nodeStrokeWidth:l,nodeComponent:f}),m.jsx("path",{className:"react-flow__minimap-mask",d:`M${O-R},${Z-R}h${W+R*2}v${Q+R*2}h${-W-R*2}z
        M${M.x},${M.y}h${M.width}v${M.height}h${-M.width}z`,fillRule:"evenodd",pointerEvents:"none"})]})})}$n.displayName="MiniMap";S.memo($n);function $i({nodeId:e,position:t,variant:n=Le.Handle,className:o,style:c={},children:i,color:l,minWidth:f=10,minHeight:g=10,maxWidth:p=Number.MAX_VALUE,maxHeight:h=Number.MAX_VALUE,keepAspectRatio:s=!1,shouldResize:r,onResizeStart:a,onResize:d,onResizeEnd:u}){const y=gn(),w=typeof e=="string"?e:y,E=X(),x=S.useRef(null),v=n===Le.Line?"right":"bottom-right",b=t??v,C=S.useRef(null);S.useEffect(()=>{if(!(!x.current||!w))return C.current||(C.current=Ho({domNode:x.current,nodeId:w,getStoreItems:()=>{const{nodeLookup:_,transform:V,snapGrid:T,snapToGrid:H,nodeOrigin:z,domNode:L}=E.getState();return{nodeLookup:_,transform:V,snapGrid:T,snapToGrid:H,nodeOrigin:z,paneDomNode:L}},onChange:(_,V)=>{const{triggerNodeChanges:T,nodeLookup:H,parentLookup:z,nodeOrigin:L}=E.getState(),I=[],D={x:_.x,y:_.y},N=H.get(w);if(N&&N.expandParent&&N.parentId){const A=N.origin??L,$=_.width??N.measured.width,R=_.height??N.measured.height,O={id:N.id,parentId:N.parentId,rect:{width:$,height:R,...Ht({x:_.x??N.position.x,y:_.y??N.position.y},{width:$,height:R},N.parentId,H,A)}},Z=Tt([O],H,z,L);I.push(...Z),D.x=_.x?Math.max(A[0]*$,_.x):void 0,D.y=_.y?Math.max(A[1]*R,_.y):void 0}if(D.x!==void 0&&D.y!==void 0){const A={id:w,type:"position",position:{...D}};I.push(A)}if(_.width!==void 0&&_.height!==void 0){const A={id:w,type:"dimensions",resizing:!0,setAttributes:!0,dimensions:{width:_.width,height:_.height}};I.push(A)}for(const A of V){const $={...A,type:"position"};I.push($)}T(I)},onEnd:()=>{const _={id:w,type:"dimensions",resizing:!1};E.getState().triggerNodeChanges([_])}})),C.current.update({controlPosition:b,boundaries:{minWidth:f,minHeight:g,maxWidth:p,maxHeight:h},keepAspectRatio:s,onResizeStart:a,onResize:d,onResizeEnd:u,shouldResize:r}),()=>{var _;(_=C.current)==null||_.destroy()}},[b,f,g,p,h,s,a,d,u,r]);const k=b.split("-"),M=n===Le.Line?"borderColor":"backgroundColor",P=l?{...c,[M]:l}:c;return m.jsx("div",{className:ee(["react-flow__resize-control","nodrag",...k,n,o]),ref:x,style:P,children:i})}S.memo($i);const Ri=()=>m.jsxs(ui,{nodes:ls,edges:us,fitView:!0,children:[m.jsx(bi,{showInteractive:!1}),m.jsx(mi,{})]}),zi=()=>m.jsx(Ri,{});export{zi as default};
