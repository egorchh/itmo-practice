import{a as zo,b as Ft,g as Bo,R as Fo,r as S,M as rt,j as h,c as Oo,P as ne,d as He,e as Ot,n as Ht,X as Ho,f as Le,h as To,i as Tt,k as Zt,l as Zo,m as it,o as ct,p as at,q as Wo,s as Yo,t as Wt,S as Te,u as ae,v as Yt,w as Xo,x as Se,y as Xt,z as qo,A as Uo,B as dt,C as qt,D as de,F as lt,G as ve,H as Ze,I as We,J as Ut,K as Ye,L as Gt,N as Kt,O as ut,Q as Qt,T as Go,U as Ko,V as Qo,W as Jo,Y as Xe,Z as es,_ as Jt,$ as ts,a0 as ns,a1 as os,a2 as ss,a3 as en,a4 as rs,a5 as Ge,a6 as is,a7 as qe,a8 as tn,a9 as cs,aa as as,ab as ds,ac as nn,ad as ls,ae as us,af as fs,ag as gs,E as ps}from"./index-CHHw-goV.js";import{a as hs,S as ms}from"./api-Bb4MDs_8.js";zo();function ee(e){if(typeof e=="string"||typeof e=="number")return""+e;let t="";if(Array.isArray(e))for(let n=0,o;n<e.length;n++)(o=ee(e[n]))!==""&&(t+=(t&&" ")+o);else for(let n in e)e[n]&&(t+=(t&&" ")+n);return t}var Re={exports:{}},$e={},Ve={exports:{}},ze={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ft;function ws(){if(ft)return ze;ft=1;var e=Ft();function t(s,r){return s===r&&(s!==0||1/s===1/r)||s!==s&&r!==r}var n=typeof Object.is=="function"?Object.is:t,o=e.useState,c=e.useEffect,i=e.useLayoutEffect,l=e.useDebugValue;function g(s,r){var a=r(),d=o({inst:{value:a,getSnapshot:r}}),u=d[0].inst,y=d[1];return i(function(){u.value=a,u.getSnapshot=r,f(u)&&y({inst:u})},[s,a,r]),c(function(){return f(u)&&y({inst:u}),s(function(){f(u)&&y({inst:u})})},[s]),l(a),a}function f(s){var r=s.getSnapshot;s=s.value;try{var a=r();return!n(s,a)}catch{return!0}}function p(s,r){return r()}var m=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?p:g;return ze.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:m,ze}var gt;function xs(){return gt||(gt=1,Ve.exports=ws()),Ve.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pt;function ys(){if(pt)return $e;pt=1;var e=Ft(),t=xs();function n(p,m){return p===m&&(p!==0||1/p===1/m)||p!==p&&m!==m}var o=typeof Object.is=="function"?Object.is:n,c=t.useSyncExternalStore,i=e.useRef,l=e.useEffect,g=e.useMemo,f=e.useDebugValue;return $e.useSyncExternalStoreWithSelector=function(p,m,s,r,a){var d=i(null);if(d.current===null){var u={hasValue:!1,value:null};d.current=u}else u=d.current;d=g(function(){function w(C){if(!E){if(E=!0,x=C,C=r(C),a!==void 0&&u.hasValue){var k=u.value;if(a(k,C))return v=k}return v=C}if(k=v,o(x,C))return k;var M=r(C);return a!==void 0&&a(k,M)?k:(x=C,v=M)}var E=!1,x,v,b=s===void 0?null:s;return[function(){return w(m())},b===null?void 0:function(){return w(b())}]},[m,s,r,a]);var y=c(p,d[0],d[1]);return l(function(){u.hasValue=!0,u.value=y},[y]),f(y),y},$e}var ht;function Ss(){return ht||(ht=1,Re.exports=ys()),Re.exports}var vs=Ss();const Es=Bo(vs),bs={BASE_URL:"/itmo-practice/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_API_URL:"https://itmo-practice-2b013173d1a7.herokuapp.com"},mt=e=>{let t;const n=new Set,o=(m,s)=>{const r=typeof m=="function"?m(t):m;if(!Object.is(r,t)){const a=t;t=s??(typeof r!="object"||r===null)?r:Object.assign({},t,r),n.forEach(d=>d(t,a))}},c=()=>t,f={setState:o,getState:c,getInitialState:()=>p,subscribe:m=>(n.add(m),()=>n.delete(m)),destroy:()=>{(bs?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},p=t=e(o,c,f);return f},Ns=e=>e?mt(e):mt,{useDebugValue:Cs}=Fo,{useSyncExternalStoreWithSelector:ks}=Es,_s=e=>e;function on(e,t=_s,n){const o=ks(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return Cs(o),o}const wt=(e,t)=>{const n=Ns(e),o=(c,i=t)=>on(n,c,i);return Object.assign(o,n),o},Is=(e,t)=>e?wt(e,t):wt;function K(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[o,c]of e)if(!Object.is(c,t.get(o)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const o of e)if(!t.has(o))return!1;return!0}const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(const o of n)if(!Object.prototype.hasOwnProperty.call(t,o)||!Object.is(e[o],t[o]))return!1;return!0}const Ne=S.createContext(null),Ms=Ne.Provider,sn=ae.error001();function F(e,t){const n=S.useContext(Ne);if(n===null)throw new Error(sn);return on(n,e,t)}function X(){const e=S.useContext(Ne);if(e===null)throw new Error(sn);return S.useMemo(()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe}),[e])}const xt={display:"none"},Ps={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},rn="react-flow__node-desc",cn="react-flow__edge-desc",js="react-flow__aria-live",Ds=e=>e.ariaLiveMessage;function As({rfId:e}){const t=F(Ds);return h.jsx("div",{id:`${js}-${e}`,"aria-live":"assertive","aria-atomic":"true",style:Ps,children:t})}function Ls({rfId:e,disableKeyboardA11y:t}){return h.jsxs(h.Fragment,{children:[h.jsxs("div",{id:`${rn}-${e}`,style:xt,children:["Press enter or space to select a node.",!t&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "]}),h.jsx("div",{id:`${cn}-${e}`,style:xt,children:"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."}),!t&&h.jsx(As,{rfId:e})]})}const Rs=e=>e.userSelectionActive?"none":"all";function Ke({position:e="top-left",children:t,className:n,style:o,...c}){const i=F(Rs),l=`${e}`.split("-");return h.jsx("div",{className:ee(["react-flow__panel",n,...l]),style:{...o,pointerEvents:i},...c,children:t})}function $s({proOptions:e,position:t="bottom-right"}){return e!=null&&e.hideAttribution?null:h.jsx(Ke,{position:t,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://pro.reactflow.dev",children:h.jsx("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution",children:"React Flow"})})}const Vs=e=>{const t=[],n=[];for(const[,o]of e.nodeLookup)o.selected&&t.push(o.internals.userNode);for(const[,o]of e.edgeLookup)o.selected&&n.push(o);return{selectedNodes:t,selectedEdges:n}},xe=e=>e.id;function zs(e,t){return K(e.selectedNodes.map(xe),t.selectedNodes.map(xe))&&K(e.selectedEdges.map(xe),t.selectedEdges.map(xe))}function Bs({onSelectionChange:e}){const t=X(),{selectedNodes:n,selectedEdges:o}=F(Vs,zs);return S.useEffect(()=>{const c={nodes:n,edges:o};e==null||e(c),t.getState().onSelectionChangeHandlers.forEach(i=>i(c))},[n,o,e]),null}const Fs=e=>!!e.onSelectionChangeHandlers;function Os({onSelectionChange:e}){const t=F(Fs);return e||t?h.jsx(Bs,{onSelectionChange:e}):null}const an=[0,0],Hs={x:0,y:0,zoom:1},Ts=["nodes","edges","defaultNodes","defaultEdges","onConnect","onConnectStart","onConnectEnd","onClickConnectStart","onClickConnectEnd","nodesDraggable","nodesConnectable","nodesFocusable","edgesFocusable","edgesReconnectable","elevateNodesOnSelect","elevateEdgesOnSelect","minZoom","maxZoom","nodeExtent","onNodesChange","onEdgesChange","elementsSelectable","connectionMode","snapGrid","snapToGrid","translateExtent","connectOnClick","defaultEdgeOptions","fitView","fitViewOptions","onNodesDelete","onEdgesDelete","onDelete","onNodeDrag","onNodeDragStart","onNodeDragStop","onSelectionDrag","onSelectionDragStart","onSelectionDragStop","onMoveStart","onMove","onMoveEnd","noPanClassName","nodeOrigin","autoPanOnConnect","autoPanOnNodeDrag","onError","connectionRadius","isValidConnection","selectNodesOnDrag","nodeDragThreshold","onBeforeDelete","debug","autoPanSpeed","paneClickDistance"],yt=[...Ts,"rfId"],Zs=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges,setPaneClickDistance:e.setPaneClickDistance}),St={translateExtent:ve,nodeOrigin:an,minZoom:.5,maxZoom:2,elementsSelectable:!0,noPanClassName:"nopan",rfId:"1",paneClickDistance:0};function Ws(e){const{setNodes:t,setEdges:n,setMinZoom:o,setMaxZoom:c,setTranslateExtent:i,setNodeExtent:l,reset:g,setDefaultNodesAndEdges:f,setPaneClickDistance:p}=F(Zs,K),m=X();S.useEffect(()=>(f(e.defaultNodes,e.defaultEdges),()=>{s.current=St,g()}),[]);const s=S.useRef(St);return S.useEffect(()=>{for(const r of yt){const a=e[r],d=s.current[r];a!==d&&(typeof e[r]>"u"||(r==="nodes"?t(a):r==="edges"?n(a):r==="minZoom"?o(a):r==="maxZoom"?c(a):r==="translateExtent"?i(a):r==="nodeExtent"?l(a):r==="paneClickDistance"?p(a):r==="fitView"?m.setState({fitViewOnInit:a}):r==="fitViewOptions"?m.setState({fitViewOnInitOptions:a}):m.setState({[r]:a})))}s.current=e},yt.map(r=>e[r])),null}function vt(){return typeof window>"u"||!window.matchMedia?null:window.matchMedia("(prefers-color-scheme: dark)")}function Ys(e){var o;const[t,n]=S.useState(e==="system"?null:e);return S.useEffect(()=>{if(e!=="system"){n(e);return}const c=vt(),i=()=>n(c!=null&&c.matches?"dark":"light");return i(),c==null||c.addEventListener("change",i),()=>{c==null||c.removeEventListener("change",i)}},[e]),t!==null?t:(o=vt())!=null&&o.matches?"dark":"light"}const Et=typeof document<"u"?document:null;function me(e=null,t={target:Et,actInsideInputWithModifier:!0}){const[n,o]=S.useState(!1),c=S.useRef(!1),i=S.useRef(new Set([])),[l,g]=S.useMemo(()=>{if(e!==null){const p=(Array.isArray(e)?e:[e]).filter(s=>typeof s=="string").map(s=>s.replace("+",`
`).replace(`

`,`
+`).split(`
`)),m=p.reduce((s,r)=>s.concat(...r),[]);return[p,m]}return[[],[]]},[e]);return S.useEffect(()=>{const f=(t==null?void 0:t.target)||Et;if(e!==null){const p=r=>{if(c.current=r.ctrlKey||r.metaKey||r.shiftKey,(!c.current||c.current&&!t.actInsideInputWithModifier)&&Ze(r))return!1;const d=Nt(r.code,g);i.current.add(r[d]),bt(l,i.current,!1)&&(r.preventDefault(),o(!0))},m=r=>{if((!c.current||c.current&&!t.actInsideInputWithModifier)&&Ze(r))return!1;const d=Nt(r.code,g);bt(l,i.current,!0)?(o(!1),i.current.clear()):i.current.delete(r[d]),r.key==="Meta"&&i.current.clear(),c.current=!1},s=()=>{i.current.clear(),o(!1)};return f==null||f.addEventListener("keydown",p),f==null||f.addEventListener("keyup",m),window.addEventListener("blur",s),window.addEventListener("contextmenu",s),()=>{f==null||f.removeEventListener("keydown",p),f==null||f.removeEventListener("keyup",m),window.removeEventListener("blur",s),window.removeEventListener("contextmenu",s)}}},[e,o]),n}function bt(e,t,n){return e.filter(o=>n||o.length===t.size).some(o=>o.every(c=>t.has(c)))}function Nt(e,t){return t.includes(e)?"code":"key"}const Xs=()=>{const e=X();return S.useMemo(()=>({zoomIn:t=>{const{panZoom:n}=e.getState();return n?n.scaleBy(1.2,{duration:t==null?void 0:t.duration}):Promise.resolve(!1)},zoomOut:t=>{const{panZoom:n}=e.getState();return n?n.scaleBy(1/1.2,{duration:t==null?void 0:t.duration}):Promise.resolve(!1)},zoomTo:(t,n)=>{const{panZoom:o}=e.getState();return o?o.scaleTo(t,{duration:n==null?void 0:n.duration}):Promise.resolve(!1)},getZoom:()=>e.getState().transform[2],setViewport:async(t,n)=>{const{transform:[o,c,i],panZoom:l}=e.getState();return l?(await l.setViewport({x:t.x??o,y:t.y??c,zoom:t.zoom??i},{duration:n==null?void 0:n.duration}),Promise.resolve(!0)):Promise.resolve(!1)},getViewport:()=>{const[t,n,o]=e.getState().transform;return{x:t,y:n,zoom:o}},fitView:t=>{const{nodeLookup:n,minZoom:o,maxZoom:c,panZoom:i,domNode:l}=e.getState();if(!i||!l)return Promise.resolve(!1);const g=We(n,t),{width:f,height:p}=Ut(l);return Ye({nodes:g,width:f,height:p,minZoom:o,maxZoom:c,panZoom:i},t)},setCenter:async(t,n,o)=>{const{width:c,height:i,maxZoom:l,panZoom:g}=e.getState(),f=typeof(o==null?void 0:o.zoom)<"u"?o.zoom:l,p=c/2-t*f,m=i/2-n*f;return g?(await g.setViewport({x:p,y:m,zoom:f},{duration:o==null?void 0:o.duration}),Promise.resolve(!0)):Promise.resolve(!1)},fitBounds:async(t,n)=>{const{width:o,height:c,minZoom:i,maxZoom:l,panZoom:g}=e.getState(),f=Gt(t,o,c,i,l,(n==null?void 0:n.padding)??.1);return g?(await g.setViewport(f,{duration:n==null?void 0:n.duration}),Promise.resolve(!0)):Promise.resolve(!1)},screenToFlowPosition:(t,n={snapToGrid:!0})=>{const{transform:o,snapGrid:c,domNode:i}=e.getState();if(!i)return t;const{x:l,y:g}=i.getBoundingClientRect(),f={x:t.x-l,y:t.y-g};return Kt(f,o,n.snapToGrid,c)},flowToScreenPosition:t=>{const{transform:n,domNode:o}=e.getState();if(!o)return t;const{x:c,y:i}=o.getBoundingClientRect(),l=ns(t,n);return{x:l.x+c,y:l.y+i}}}),[])};function dn(e,t){const n=[],o=new Map,c=[];for(const i of e)if(i.type==="add"){c.push(i);continue}else if(i.type==="remove"||i.type==="replace")o.set(i.id,[i]);else{const l=o.get(i.id);l?l.push(i):o.set(i.id,[i])}for(const i of t){const l=o.get(i.id);if(!l){n.push(i);continue}if(l[0].type==="remove")continue;if(l[0].type==="replace"){n.push({...l[0].item});continue}const g={...i};for(const f of l)qs(f,g);n.push(g)}return c.length&&c.forEach(i=>{i.index!==void 0?n.splice(i.index,0,{...i.item}):n.push({...i.item})}),n}function qs(e,t){switch(e.type){case"select":{t.selected=e.selected;break}case"position":{typeof e.position<"u"&&(t.position=e.position),typeof e.dragging<"u"&&(t.dragging=e.dragging);break}case"dimensions":{typeof e.dimensions<"u"&&(t.measured??(t.measured={}),t.measured.width=e.dimensions.width,t.measured.height=e.dimensions.height,e.setAttributes&&(t.width=e.dimensions.width,t.height=e.dimensions.height)),typeof e.resizing=="boolean"&&(t.resizing=e.resizing);break}}}function Us(e,t){return dn(e,t)}function Gs(e,t){return dn(e,t)}function ce(e,t){return{id:e,type:"select",selected:t}}function le(e,t=new Set,n=!1){const o=[];for(const[c,i]of e){const l=t.has(c);!(i.selected===void 0&&!l)&&i.selected!==l&&(n&&(i.selected=l),o.push(ce(i.id,l)))}return o}function Ct({items:e=[],lookup:t}){var c;const n=[],o=new Map(e.map(i=>[i.id,i]));for(const[i,l]of e.entries()){const g=t.get(l.id),f=((c=g==null?void 0:g.internals)==null?void 0:c.userNode)??g;f!==void 0&&f!==l&&n.push({id:l.id,item:l,type:"replace"}),f===void 0&&n.push({item:l,type:"add",index:i})}for(const[i]of t)o.get(i)===void 0&&n.push({id:i,type:"remove"});return n}function kt(e){return{id:e.id,type:"remove"}}const _t=e=>os(e),Ks=e=>ss(e);function ln(e){return S.forwardRef(e)}const Qs=typeof window<"u"?S.useLayoutEffect:S.useEffect;function It(e){const[t,n]=S.useState(BigInt(0)),[o]=S.useState(()=>Js(()=>n(c=>c+BigInt(1))));return Qs(()=>{const c=o.get();c.length&&(e(c),o.reset())},[t]),o}function Js(e){let t=[];return{get:()=>t,reset:()=>{t=[]},push:n=>{t.push(n),e()}}}const un=S.createContext(null);function er({children:e}){const t=X(),n=S.useCallback(g=>{const{nodes:f=[],setNodes:p,hasDefaultNodes:m,onNodesChange:s,nodeLookup:r}=t.getState();let a=f;for(const d of g)a=typeof d=="function"?d(a):d;m?p(a):s&&s(Ct({items:a,lookup:r}))},[]),o=It(n),c=S.useCallback(g=>{const{edges:f=[],setEdges:p,hasDefaultEdges:m,onEdgesChange:s,edgeLookup:r}=t.getState();let a=f;for(const d of g)a=typeof d=="function"?d(a):d;m?p(a):s&&s(Ct({items:a,lookup:r}))},[]),i=It(c),l=S.useMemo(()=>({nodeQueue:o,edgeQueue:i}),[]);return h.jsx(un.Provider,{value:l,children:e})}function tr(){const e=S.useContext(un);if(!e)throw new Error("useBatchContext must be used within a BatchProvider");return e}const nr=e=>!!e.panZoom;function Qe(){const e=Xs(),t=X(),n=tr(),o=F(nr),c=S.useMemo(()=>{const i=s=>t.getState().nodeLookup.get(s),l=s=>{n.nodeQueue.push(s)},g=s=>{n.edgeQueue.push(s)},f=s=>{var w,E;const{nodeLookup:r,nodeOrigin:a}=t.getState(),d=_t(s)?s:r.get(s.id),u=d.parentId?Tt(d.position,d.measured,d.parentId,r,a):d.position,y={id:d.id,position:u,width:((w=d.measured)==null?void 0:w.width)??d.width,height:((E=d.measured)==null?void 0:E.height)??d.height,data:d.data};return ct(y)},p=(s,r,a={replace:!1})=>{l(d=>d.map(u=>{if(u.id===s){const y=typeof r=="function"?r(u):r;return a.replace&&_t(y)?y:{...u,...y}}return u}))},m=(s,r,a={replace:!1})=>{g(d=>d.map(u=>{if(u.id===s){const y=typeof r=="function"?r(u):r;return a.replace&&Ks(y)?y:{...u,...y}}return u}))};return{getNodes:()=>t.getState().nodes.map(s=>({...s})),getNode:s=>{var r;return(r=i(s))==null?void 0:r.internals.userNode},getInternalNode:i,getEdges:()=>{const{edges:s=[]}=t.getState();return s.map(r=>({...r}))},getEdge:s=>t.getState().edgeLookup.get(s),setNodes:l,setEdges:g,addNodes:s=>{const r=Array.isArray(s)?s:[s];n.nodeQueue.push(a=>[...a,...r])},addEdges:s=>{const r=Array.isArray(s)?s:[s];n.edgeQueue.push(a=>[...a,...r])},toObject:()=>{const{nodes:s=[],edges:r=[],transform:a}=t.getState(),[d,u,y]=a;return{nodes:s.map(w=>({...w})),edges:r.map(w=>({...w})),viewport:{x:d,y:u,zoom:y}}},deleteElements:async({nodes:s=[],edges:r=[]})=>{const{nodes:a,edges:d,onNodesDelete:u,onEdgesDelete:y,triggerNodeChanges:w,triggerEdgeChanges:E,onDelete:x,onBeforeDelete:v}=t.getState(),{nodes:b,edges:C}=await Zo({nodesToRemove:s,edgesToRemove:r,nodes:a,edges:d,onBeforeDelete:v}),k=C.length>0,M=b.length>0;if(k){const P=C.map(kt);y==null||y(C),E(P)}if(M){const P=b.map(kt);u==null||u(b),w(P)}return(M||k)&&(x==null||x({nodes:b,edges:C})),{deletedNodes:b,deletedEdges:C}},getIntersectingNodes:(s,r=!0,a)=>{const d=it(s),u=d?s:f(s),y=a!==void 0;return u?(a||t.getState().nodes).filter(w=>{const E=t.getState().nodeLookup.get(w.id);if(E&&!d&&(w.id===s.id||!E.internals.positionAbsolute))return!1;const x=ct(y?w:E),v=at(x,u);return r&&v>0||v>=u.width*u.height}):[]},isNodeIntersecting:(s,r,a=!0)=>{const u=it(s)?s:f(s);if(!u)return!1;const y=at(u,r);return a&&y>0||y>=u.width*u.height},updateNode:p,updateNodeData:(s,r,a={replace:!1})=>{p(s,d=>{const u=typeof r=="function"?r(d):r;return a.replace?{...d,data:u}:{...d,data:{...d.data,...u}}},a)},updateEdge:m,updateEdgeData:(s,r,a={replace:!1})=>{m(s,d=>{const u=typeof r=="function"?r(d):r;return a.replace?{...d,data:u}:{...d,data:{...d.data,...u}}},a)},getNodesBounds:s=>{const{nodeLookup:r,nodeOrigin:a}=t.getState();return Wo(s,{nodeLookup:r,nodeOrigin:a})},getHandleConnections:({type:s,id:r,nodeId:a})=>{var d;return Array.from(((d=t.getState().connectionLookup.get(`${a}-${s}-${r??null}`))==null?void 0:d.values())??[])}}},[]);return S.useMemo(()=>({...c,...e,viewportInitialized:o}),[o])}const Mt=e=>e.selected,or={actInsideInputWithModifier:!1},sr=typeof window<"u"?window:void 0;function rr({deleteKeyCode:e,multiSelectionKeyCode:t}){const n=X(),{deleteElements:o}=Qe(),c=me(e,or),i=me(t,{target:sr});S.useEffect(()=>{if(c){const{edges:l,nodes:g}=n.getState();o({nodes:g.filter(Mt),edges:l.filter(Mt)}),n.setState({nodesSelectionActive:!1})}},[c]),S.useEffect(()=>{n.setState({multiSelectionActive:i})},[i])}function ir(e){const t=X();S.useEffect(()=>{const n=()=>{var c,i;if(!e.current)return!1;const o=Ut(e.current);(o.height===0||o.width===0)&&((i=(c=t.getState()).onError)==null||i.call(c,"004",ae.error004())),t.setState({width:o.width||500,height:o.height||500})};if(e.current){n(),window.addEventListener("resize",n);const o=new ResizeObserver(()=>n());return o.observe(e.current),()=>{window.removeEventListener("resize",n),o&&e.current&&o.unobserve(e.current)}}},[])}const Ce={position:"absolute",width:"100%",height:"100%",top:0,left:0},cr=e=>({userSelectionActive:e.userSelectionActive,lib:e.lib});function ar({onPaneContextMenu:e,zoomOnScroll:t=!0,zoomOnPinch:n=!0,panOnScroll:o=!1,panOnScrollSpeed:c=.5,panOnScrollMode:i=Wt.Free,zoomOnDoubleClick:l=!0,panOnDrag:g=!0,defaultViewport:f,translateExtent:p,minZoom:m,maxZoom:s,zoomActivationKeyCode:r,preventScrolling:a=!0,children:d,noWheelClassName:u,noPanClassName:y,onViewportChange:w,isControlledViewport:E,paneClickDistance:x}){const v=X(),b=S.useRef(null),{userSelectionActive:C,lib:k}=F(cr,K),M=me(r),P=S.useRef();ir(b);const _=S.useCallback(V=>{w==null||w({x:V[0],y:V[1],zoom:V[2]}),E||v.setState({transform:V})},[w,E]);return S.useEffect(()=>{if(b.current){P.current=Yo({domNode:b.current,minZoom:m,maxZoom:s,translateExtent:p,viewport:f,paneClickDistance:x,onDraggingChange:z=>v.setState({paneDragging:z}),onPanZoomStart:(z,L)=>{const{onViewportChangeStart:I,onMoveStart:D}=v.getState();D==null||D(z,L),I==null||I(L)},onPanZoom:(z,L)=>{const{onViewportChange:I,onMove:D}=v.getState();D==null||D(z,L),I==null||I(L)},onPanZoomEnd:(z,L)=>{const{onViewportChangeEnd:I,onMoveEnd:D}=v.getState();D==null||D(z,L),I==null||I(L)}});const{x:V,y:T,zoom:H}=P.current.getViewport();return v.setState({panZoom:P.current,transform:[V,T,H],domNode:b.current.closest(".react-flow")}),()=>{var z;(z=P.current)==null||z.destroy()}}},[]),S.useEffect(()=>{var V;(V=P.current)==null||V.update({onPaneContextMenu:e,zoomOnScroll:t,zoomOnPinch:n,panOnScroll:o,panOnScrollSpeed:c,panOnScrollMode:i,zoomOnDoubleClick:l,panOnDrag:g,zoomActivationKeyPressed:M,preventScrolling:a,noPanClassName:y,userSelectionActive:C,noWheelClassName:u,lib:k,onTransformChange:_})},[e,t,n,o,c,i,l,g,M,a,y,C,u,k,_]),h.jsx("div",{className:"react-flow__renderer",ref:b,style:Ce,children:d})}const dr=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function lr(){const{userSelectionActive:e,userSelectionRect:t}=F(dr,K);return e&&t?h.jsx("div",{className:"react-flow__selection react-flow__container",style:{width:t.width,height:t.height,transform:`translate(${t.x}px, ${t.y}px)`}}):null}const Be=(e,t)=>n=>{n.target===t.current&&(e==null||e(n))},ur=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,dragging:e.paneDragging});function fr({isSelecting:e,selectionKeyPressed:t,selectionMode:n=Te.Full,panOnDrag:o,selectionOnDrag:c,onSelectionStart:i,onSelectionEnd:l,onPaneClick:g,onPaneContextMenu:f,onPaneScroll:p,onPaneMouseEnter:m,onPaneMouseMove:s,onPaneMouseLeave:r,children:a}){const d=S.useRef(null),u=X(),y=S.useRef(0),w=S.useRef(0),E=S.useRef(),x=S.useRef(new Map),{userSelectionActive:v,elementsSelectable:b,dragging:C}=F(ur,K),k=b&&(e||v),M=S.useRef(!1),P=S.useRef(!1),_=()=>{u.setState({userSelectionActive:!1,userSelectionRect:null}),y.current=0,w.current=0},V=N=>{if(M.current){M.current=!1;return}g==null||g(N),u.getState().resetSelectedElements(),u.setState({nodesSelectionActive:!1})},T=N=>{if(Array.isArray(o)&&(o!=null&&o.includes(2))){N.preventDefault();return}f==null||f(N)},H=p?N=>p(N):void 0,z=N=>{var W,Q,U,G;const{resetSelectedElements:A,domNode:R,edgeLookup:$}=u.getState();if(E.current=R==null?void 0:R.getBoundingClientRect(),!b||!e||N.button!==0||N.target!==d.current||!E.current)return;(Q=(W=N.target)==null?void 0:W.setPointerCapture)==null||Q.call(W,N.pointerId),P.current=!0,M.current=!1,x.current=new Map;for(const[j,Y]of $)x.current.set(Y.source,((U=x.current.get(Y.source))==null?void 0:U.add(j))||new Set([j])),x.current.set(Y.target,((G=x.current.get(Y.target))==null?void 0:G.add(j))||new Set([j]));const{x:O,y:Z}=ut(N.nativeEvent,E.current);A(),u.setState({userSelectionRect:{width:0,height:0,startX:O,startY:Z,x:O,y:Z}}),i==null||i(N)},L=N=>{const{userSelectionRect:A,edgeLookup:R,transform:$,nodeLookup:O,triggerNodeChanges:Z,triggerEdgeChanges:W}=u.getState();if(!E.current||!A)return;M.current=!0;const{x:Q,y:U}=ut(N.nativeEvent,E.current),{startX:G,startY:j}=A,Y={startX:G,startY:j,x:Q<G?Q:G,y:U<j?U:j,width:Math.abs(Q-G),height:Math.abs(U-j)},te=Qt(O,Y,$,n===Te.Partial,!0),J=new Set,B=new Set;for(const q of te){B.add(q.id);const oe=x.current.get(q.id);if(oe)for(const se of oe)J.add(se)}if(y.current!==B.size){y.current=B.size;const q=le(O,B,!0);Z(q)}if(w.current!==J.size){w.current=J.size;const q=le(R,J);W(q)}u.setState({userSelectionRect:Y,userSelectionActive:!0,nodesSelectionActive:!1})},I=N=>{var R,$;if(N.button!==0||!P.current)return;($=(R=N.target)==null?void 0:R.releasePointerCapture)==null||$.call(R,N.pointerId);const{userSelectionRect:A}=u.getState();!v&&A&&N.target===d.current&&(V==null||V(N)),y.current>0&&u.setState({nodesSelectionActive:!0}),_(),l==null||l(N),(t||c)&&(M.current=!1),P.current=!1},D=o===!0||Array.isArray(o)&&o.includes(0);return h.jsxs("div",{className:ee(["react-flow__pane",{draggable:D,dragging:C,selection:e}]),onClick:k?void 0:Be(V,d),onContextMenu:Be(T,d),onWheel:Be(H,d),onPointerEnter:k?void 0:m,onPointerDown:k?z:s,onPointerMove:k?L:s,onPointerUp:k?I:void 0,onPointerLeave:r,ref:d,style:Ce,children:[a,h.jsx(lr,{})]})}function Ue({id:e,store:t,unselect:n=!1,nodeRef:o}){const{addSelectedNodes:c,unselectNodesAndEdges:i,multiSelectionActive:l,nodeLookup:g,onError:f}=t.getState(),p=g.get(e);if(!p){f==null||f("012",ae.error012(e));return}t.setState({nodesSelectionActive:!1}),p.selected?(n||p.selected&&l)&&(i({nodes:[p],edges:[]}),requestAnimationFrame(()=>{var m;return(m=o==null?void 0:o.current)==null?void 0:m.blur()})):c([e])}function fn({nodeRef:e,disabled:t=!1,noDragClassName:n,handleSelector:o,nodeId:c,isSelectable:i,nodeClickDistance:l}){const g=X(),[f,p]=S.useState(!1),m=S.useRef();return S.useEffect(()=>{m.current=Go({getStoreItems:()=>g.getState(),onNodeMouseDown:s=>{Ue({id:s,store:g,nodeRef:e})},onDragStart:()=>{p(!0)},onDragStop:()=>{p(!1)}})},[]),S.useEffect(()=>{var s,r;if(t)(s=m.current)==null||s.destroy();else if(e.current)return(r=m.current)==null||r.update({noDragClassName:n,handleSelector:o,domNode:e.current,isSelectable:i,nodeId:c,nodeClickDistance:l}),()=>{var a;(a=m.current)==null||a.destroy()}},[n,o,t,i,e,c]),f}const gr=e=>t=>t.selected&&(t.draggable||e&&typeof t.draggable>"u");function gn(){const e=X();return S.useCallback(n=>{const{nodeExtent:o,snapToGrid:c,snapGrid:i,nodesDraggable:l,onError:g,updateNodePositions:f,nodeLookup:p,nodeOrigin:m}=e.getState(),s=new Map,r=gr(l),a=c?i[0]:5,d=c?i[1]:5,u=n.direction.x*a*n.factor,y=n.direction.y*d*n.factor;for(const[,w]of p){if(!r(w))continue;let E={x:w.internals.positionAbsolute.x+u,y:w.internals.positionAbsolute.y+y};c&&(E=Ko(E,i));const{position:x,positionAbsolute:v}=Qo({nodeId:w.id,nextPosition:E,nodeLookup:p,nodeExtent:o,nodeOrigin:m,onError:g});w.position=x,w.internals.positionAbsolute=v,s.set(w.id,w)}f(s)},[])}const Je=S.createContext(null),pr=Je.Provider;Je.Consumer;const pn=()=>S.useContext(Je),hr=e=>({connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName,rfId:e.rfId}),mr=(e,t,n)=>o=>{const{connectionClickStartHandle:c,connectionMode:i,connection:l}=o,{fromHandle:g,toHandle:f,isValid:p}=l,m=(f==null?void 0:f.nodeId)===e&&(f==null?void 0:f.id)===t&&(f==null?void 0:f.type)===n;return{connectingFrom:(g==null?void 0:g.nodeId)===e&&(g==null?void 0:g.id)===t&&(g==null?void 0:g.type)===n,connectingTo:m,clickConnecting:(c==null?void 0:c.nodeId)===e&&(c==null?void 0:c.id)===t&&(c==null?void 0:c.type)===n,isPossibleEndHandle:i===en.Strict?(g==null?void 0:g.type)!==n:e!==(g==null?void 0:g.nodeId)||t!==(g==null?void 0:g.id),connectionInProcess:!!g,valid:m&&p}};function wr({type:e="source",position:t=ne.Top,isValidConnection:n,isConnectable:o=!0,isConnectableStart:c=!0,isConnectableEnd:i=!0,id:l,onConnect:g,children:f,className:p,onMouseDown:m,onTouchStart:s,...r},a){var z,L;const d=l||null,u=e==="target",y=X(),w=pn(),{connectOnClick:E,noPanClassName:x,rfId:v}=F(hr,K),{connectingFrom:b,connectingTo:C,clickConnecting:k,isPossibleEndHandle:M,connectionInProcess:P,valid:_}=F(mr(w,d,e),K);w||(L=(z=y.getState()).onError)==null||L.call(z,"010",ae.error010());const V=I=>{const{defaultEdgeOptions:D,onConnect:N,hasDefaultEdges:A}=y.getState(),R={...D,...I};if(A){const{edges:$,setEdges:O}=y.getState();O(rs(R,$))}N==null||N(R),g==null||g(R)},T=I=>{if(!w)return;const D=Jo(I.nativeEvent);if(c&&(D&&I.button===0||!D)){const N=y.getState();Xe.onPointerDown(I.nativeEvent,{autoPanOnConnect:N.autoPanOnConnect,connectionMode:N.connectionMode,connectionRadius:N.connectionRadius,domNode:N.domNode,nodeLookup:N.nodeLookup,lib:N.lib,isTarget:u,handleId:d,nodeId:w,flowId:N.rfId,panBy:N.panBy,cancelConnection:N.cancelConnection,onConnectStart:N.onConnectStart,onConnectEnd:N.onConnectEnd,updateConnection:N.updateConnection,onConnect:V,isValidConnection:n||N.isValidConnection,getTransform:()=>y.getState().transform,getFromHandle:()=>y.getState().connection.fromHandle,autoPanSpeed:N.autoPanSpeed})}D?m==null||m(I):s==null||s(I)},H=I=>{const{onClickConnectStart:D,onClickConnectEnd:N,connectionClickStartHandle:A,connectionMode:R,isValidConnection:$,lib:O,rfId:Z,nodeLookup:W,connection:Q}=y.getState();if(!w||!A&&!c)return;if(!A){D==null||D(I.nativeEvent,{nodeId:w,handleId:d,handleType:e}),y.setState({connectionClickStartHandle:{nodeId:w,type:e,id:d}});return}const U=es(I.target),G=n||$,{connection:j,isValid:Y}=Xe.isValid(I.nativeEvent,{handle:{nodeId:w,id:d,type:e},connectionMode:R,fromNodeId:A.nodeId,fromHandleId:A.id||null,fromType:A.type,isValidConnection:G,flowId:Z,doc:U,lib:O,nodeLookup:W});Y&&j&&V(j);const te=structuredClone(Q);delete te.inProgress,te.toPosition=te.toHandle?te.toHandle.position:null,N==null||N(I,te),y.setState({connectionClickStartHandle:null})};return h.jsx("div",{"data-handleid":d,"data-nodeid":w,"data-handlepos":t,"data-id":`${v}-${w}-${d}-${e}`,className:ee(["react-flow__handle",`react-flow__handle-${t}`,"nodrag",x,p,{source:!u,target:u,connectable:o,connectablestart:c,connectableend:i,clickconnecting:k,connectingfrom:b,connectingto:C,valid:_,connectionindicator:o&&(!P||M)&&(P?i:c)}]),onMouseDown:T,onTouchStart:T,onClick:E?H:void 0,ref:a,...r,children:f})}const Ee=S.memo(ln(wr));function xr({data:e,isConnectable:t,sourcePosition:n=ne.Bottom}){return h.jsxs(h.Fragment,{children:[e==null?void 0:e.label,h.jsx(Ee,{type:"source",position:n,isConnectable:t})]})}function yr({data:e,isConnectable:t,targetPosition:n=ne.Top,sourcePosition:o=ne.Bottom}){return h.jsxs(h.Fragment,{children:[h.jsx(Ee,{type:"target",position:n,isConnectable:t}),e==null?void 0:e.label,h.jsx(Ee,{type:"source",position:o,isConnectable:t})]})}function Sr(){return null}function vr({data:e,isConnectable:t,targetPosition:n=ne.Top}){return h.jsxs(h.Fragment,{children:[h.jsx(Ee,{type:"target",position:n,isConnectable:t}),e==null?void 0:e.label]})}const be={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}},Pt={input:xr,default:yr,output:vr,group:Sr};function Er(e){var t,n,o,c;return e.internals.handleBounds===void 0?{width:e.width??e.initialWidth??((t=e.style)==null?void 0:t.width),height:e.height??e.initialHeight??((n=e.style)==null?void 0:n.height)}:{width:e.width??((o=e.style)==null?void 0:o.width),height:e.height??((c=e.style)==null?void 0:c.height)}}const br=e=>{const{width:t,height:n,x:o,y:c}=Ge(e.nodeLookup,{filter:i=>!!i.selected});return{width:Se(t)?t:null,height:Se(n)?n:null,userSelectionActive:e.userSelectionActive,transformString:`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]}) translate(${o}px,${c}px)`}};function Nr({onSelectionContextMenu:e,noPanClassName:t,disableKeyboardA11y:n}){const o=X(),{width:c,height:i,transformString:l,userSelectionActive:g}=F(br,K),f=gn(),p=S.useRef(null);if(S.useEffect(()=>{var r;n||(r=p.current)==null||r.focus({preventScroll:!0})},[n]),fn({nodeRef:p}),g||!c||!i)return null;const m=e?r=>{const a=o.getState().nodes.filter(d=>d.selected);e(r,a)}:void 0,s=r=>{Object.prototype.hasOwnProperty.call(be,r.key)&&f({direction:be[r.key],factor:r.shiftKey?4:1})};return h.jsx("div",{className:ee(["react-flow__nodesselection","react-flow__container",t]),style:{transform:l},children:h.jsx("div",{ref:p,className:"react-flow__nodesselection-rect",onContextMenu:m,tabIndex:n?void 0:-1,onKeyDown:n?void 0:s,style:{width:c,height:i}})})}const jt=typeof window<"u"?window:void 0,Cr=e=>({nodesSelectionActive:e.nodesSelectionActive,userSelectionActive:e.userSelectionActive});function hn({children:e,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:o,onPaneMouseLeave:c,onPaneContextMenu:i,onPaneScroll:l,paneClickDistance:g,deleteKeyCode:f,selectionKeyCode:p,selectionOnDrag:m,selectionMode:s,onSelectionStart:r,onSelectionEnd:a,multiSelectionKeyCode:d,panActivationKeyCode:u,zoomActivationKeyCode:y,elementsSelectable:w,zoomOnScroll:E,zoomOnPinch:x,panOnScroll:v,panOnScrollSpeed:b,panOnScrollMode:C,zoomOnDoubleClick:k,panOnDrag:M,defaultViewport:P,translateExtent:_,minZoom:V,maxZoom:T,preventScrolling:H,onSelectionContextMenu:z,noWheelClassName:L,noPanClassName:I,disableKeyboardA11y:D,onViewportChange:N,isControlledViewport:A}){const{nodesSelectionActive:R,userSelectionActive:$}=F(Cr),O=me(p,{target:jt}),Z=me(u,{target:jt}),W=Z||M,Q=Z||v,U=m&&W!==!0,G=O||$||U;return rr({deleteKeyCode:f,multiSelectionKeyCode:d}),h.jsx(ar,{onPaneContextMenu:i,elementsSelectable:w,zoomOnScroll:E,zoomOnPinch:x,panOnScroll:Q,panOnScrollSpeed:b,panOnScrollMode:C,zoomOnDoubleClick:k,panOnDrag:!O&&W,defaultViewport:P,translateExtent:_,minZoom:V,maxZoom:T,zoomActivationKeyCode:y,preventScrolling:H,noWheelClassName:L,noPanClassName:I,onViewportChange:N,isControlledViewport:A,paneClickDistance:g,children:h.jsxs(fr,{onSelectionStart:r,onSelectionEnd:a,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:o,onPaneMouseLeave:c,onPaneContextMenu:i,onPaneScroll:l,panOnDrag:W,isSelecting:!!G,selectionMode:s,selectionKeyPressed:O,selectionOnDrag:U,children:[e,R&&h.jsx(Nr,{onSelectionContextMenu:z,noPanClassName:I,disableKeyboardA11y:D})]})})}hn.displayName="FlowRenderer";const kr=S.memo(hn),_r=e=>t=>e?Qt(t.nodeLookup,{x:0,y:0,width:t.width,height:t.height},t.transform,!0).map(n=>n.id):Array.from(t.nodeLookup.keys());function Ir(e){return F(S.useCallback(_r(e),[e]),K)}const Mr=e=>e.updateNodeInternals;function Pr(){const e=F(Mr),[t]=S.useState(()=>typeof ResizeObserver>"u"?null:new ResizeObserver(n=>{const o=new Map;n.forEach(c=>{const i=c.target.getAttribute("data-id");o.set(i,{id:i,nodeElement:c.target,force:!0})}),e(o)}));return S.useEffect(()=>()=>{t==null||t.disconnect()},[t]),t}function jr({node:e,nodeType:t,hasDimensions:n,resizeObserver:o}){const c=X(),i=S.useRef(null),l=S.useRef(null),g=S.useRef(e.sourcePosition),f=S.useRef(e.targetPosition),p=S.useRef(t),m=n&&!!e.internals.handleBounds;return S.useEffect(()=>{i.current&&!e.hidden&&(!m||l.current!==i.current)&&(l.current&&(o==null||o.unobserve(l.current)),o==null||o.observe(i.current),l.current=i.current)},[m,e.hidden]),S.useEffect(()=>()=>{l.current&&(o==null||o.unobserve(l.current),l.current=null)},[]),S.useEffect(()=>{if(i.current){const s=p.current!==t,r=g.current!==e.sourcePosition,a=f.current!==e.targetPosition;(s||r||a)&&(p.current=t,g.current=e.sourcePosition,f.current=e.targetPosition,c.getState().updateNodeInternals(new Map([[e.id,{id:e.id,nodeElement:i.current,force:!0}]])))}},[e.id,t,e.sourcePosition,e.targetPosition]),i}function Dr({id:e,onClick:t,onMouseEnter:n,onMouseMove:o,onMouseLeave:c,onContextMenu:i,onDoubleClick:l,nodesDraggable:g,elementsSelectable:f,nodesConnectable:p,nodesFocusable:m,resizeObserver:s,noDragClassName:r,noPanClassName:a,disableKeyboardA11y:d,rfId:u,nodeTypes:y,nodeExtent:w,nodeClickDistance:E,onError:x}){const{node:v,internals:b,isParent:C}=F(j=>{const Y=j.nodeLookup.get(e),te=j.parentLookup.has(e);return{node:Y,internals:Y.internals,isParent:te}},K);let k=v.type||"default",M=(y==null?void 0:y[k])||Pt[k];M===void 0&&(x==null||x("003",ae.error003(k)),k="default",M=Pt.default);const P=!!(v.draggable||g&&typeof v.draggable>"u"),_=!!(v.selectable||f&&typeof v.selectable>"u"),V=!!(v.connectable||p&&typeof v.connectable>"u"),T=!!(v.focusable||m&&typeof v.focusable>"u"),H=X(),z=Ht(v),L=jr({node:v,nodeType:k,hasDimensions:z,resizeObserver:s}),I=fn({nodeRef:L,disabled:v.hidden||!P,noDragClassName:r,handleSelector:v.dragHandle,nodeId:e,isSelectable:_,nodeClickDistance:E}),D=gn();if(v.hidden)return null;const N=Yt(v),A=Er(v),R=_||P||t||n||o||c,$=n?j=>n(j,{...b.userNode}):void 0,O=o?j=>o(j,{...b.userNode}):void 0,Z=c?j=>c(j,{...b.userNode}):void 0,W=i?j=>i(j,{...b.userNode}):void 0,Q=l?j=>l(j,{...b.userNode}):void 0,U=j=>{const{selectNodesOnDrag:Y,nodeDragThreshold:te}=H.getState();_&&(!Y||!P||te>0)&&Ue({id:e,store:H,nodeRef:L}),t&&t(j,{...b.userNode})},G=j=>{if(!(Ze(j.nativeEvent)||d))if(Jt.includes(j.key)&&_){const Y=j.key==="Escape";Ue({id:e,store:H,unselect:Y,nodeRef:L})}else P&&v.selected&&Object.prototype.hasOwnProperty.call(be,j.key)&&(H.setState({ariaLiveMessage:`Moved selected node ${j.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~b.positionAbsolute.x}, y: ${~~b.positionAbsolute.y}`}),D({direction:be[j.key],factor:j.shiftKey?4:1}))};return h.jsx("div",{className:ee(["react-flow__node",`react-flow__node-${k}`,{[a]:P},v.className,{selected:v.selected,selectable:_,parent:C,draggable:P,dragging:I}]),ref:L,style:{zIndex:b.z,transform:`translate(${b.positionAbsolute.x}px,${b.positionAbsolute.y}px)`,pointerEvents:R?"all":"none",visibility:z?"visible":"hidden",...v.style,...A},"data-id":e,"data-testid":`rf__node-${e}`,onMouseEnter:$,onMouseMove:O,onMouseLeave:Z,onContextMenu:W,onClick:U,onDoubleClick:Q,onKeyDown:T?G:void 0,tabIndex:T?0:void 0,role:T?"button":void 0,"aria-describedby":d?void 0:`${rn}-${u}`,"aria-label":v.ariaLabel,children:h.jsx(pr,{value:e,children:h.jsx(M,{id:e,data:v.data,type:k,positionAbsoluteX:b.positionAbsolute.x,positionAbsoluteY:b.positionAbsolute.y,selected:v.selected,selectable:_,draggable:P,deletable:v.deletable??!0,isConnectable:V,sourcePosition:v.sourcePosition,targetPosition:v.targetPosition,dragging:I,dragHandle:v.dragHandle,zIndex:b.z,parentId:v.parentId,...N})})})}const Ar=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,onError:e.onError});function mn(e){const{nodesDraggable:t,nodesConnectable:n,nodesFocusable:o,elementsSelectable:c,onError:i}=F(Ar,K),l=Ir(e.onlyRenderVisibleElements),g=Pr();return h.jsx("div",{className:"react-flow__nodes",style:Ce,children:l.map(f=>h.jsx(Dr,{id:f,nodeTypes:e.nodeTypes,nodeExtent:e.nodeExtent,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,resizeObserver:g,nodesDraggable:t,nodesConnectable:n,nodesFocusable:o,elementsSelectable:c,nodeClickDistance:e.nodeClickDistance,onError:i},f))})}mn.displayName="NodeRenderer";const Lr=S.memo(mn);function Rr(e){return F(S.useCallback(n=>{if(!e)return n.edges.map(c=>c.id);const o=[];if(n.width&&n.height)for(const c of n.edges){const i=n.nodeLookup.get(c.source),l=n.nodeLookup.get(c.target);i&&l&&Xo({sourceNode:i,targetNode:l,width:n.width,height:n.height,transform:n.transform})&&o.push(c.id)}return o},[e]),K)}const $r=({color:e="none",strokeWidth:t=1})=>h.jsx("polyline",{style:{stroke:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),Vr=({color:e="none",strokeWidth:t=1})=>h.jsx("polyline",{style:{stroke:e,fill:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"}),Dt={[rt.Arrow]:$r,[rt.ArrowClosed]:Vr};function zr(e){const t=X();return S.useMemo(()=>{var c,i;return Object.prototype.hasOwnProperty.call(Dt,e)?Dt[e]:((i=(c=t.getState()).onError)==null||i.call(c,"009",ae.error009(e)),null)},[e])}const Br=({id:e,type:t,color:n,width:o=12.5,height:c=12.5,markerUnits:i="strokeWidth",strokeWidth:l,orient:g="auto-start-reverse"})=>{const f=zr(t);return f?h.jsx("marker",{className:"react-flow__arrowhead",id:e,markerWidth:`${o}`,markerHeight:`${c}`,viewBox:"-10 -10 20 20",markerUnits:i,orient:g,refX:"0",refY:"0",children:h.jsx(f,{color:n,strokeWidth:l})}):null},wn=({defaultColor:e,rfId:t})=>{const n=F(i=>i.edges),o=F(i=>i.defaultEdgeOptions),c=S.useMemo(()=>Oo(n,{id:t,defaultColor:e,defaultMarkerStart:o==null?void 0:o.markerStart,defaultMarkerEnd:o==null?void 0:o.markerEnd}),[n,o,t,e]);return c.length?h.jsx("svg",{className:"react-flow__marker",children:h.jsx("defs",{children:c.map(i=>h.jsx(Br,{id:i.id,type:i.type,color:i.color,width:i.width,height:i.height,markerUnits:i.markerUnits,strokeWidth:i.strokeWidth,orient:i.orient},i.id))})}):null};wn.displayName="MarkerDefinitions";var Fr=S.memo(wn);function xn({x:e,y:t,label:n,labelStyle:o={},labelShowBg:c=!0,labelBgStyle:i={},labelBgPadding:l=[2,4],labelBgBorderRadius:g=2,children:f,className:p,...m}){const[s,r]=S.useState({x:1,y:0,width:0,height:0}),a=ee(["react-flow__edge-textwrapper",p]),d=S.useRef(null);return S.useEffect(()=>{if(d.current){const u=d.current.getBBox();r({x:u.x,y:u.y,width:u.width,height:u.height})}},[n]),typeof n>"u"||!n?null:h.jsxs("g",{transform:`translate(${e-s.width/2} ${t-s.height/2})`,className:a,visibility:s.width?"visible":"hidden",...m,children:[c&&h.jsx("rect",{width:s.width+2*l[0],x:-l[0],y:-l[1],height:s.height+2*l[1],className:"react-flow__edge-textbg",style:i,rx:g,ry:g}),h.jsx("text",{className:"react-flow__edge-text",y:s.height/2,dy:"0.3em",ref:d,style:o,children:n}),f]})}xn.displayName="EdgeText";const Or=S.memo(xn);function ke({id:e,path:t,labelX:n,labelY:o,label:c,labelStyle:i,labelShowBg:l,labelBgStyle:g,labelBgPadding:f,labelBgBorderRadius:p,style:m,markerEnd:s,markerStart:r,className:a,interactionWidth:d=20}){return h.jsxs(h.Fragment,{children:[h.jsx("path",{id:e,style:m,d:t,fill:"none",className:ee(["react-flow__edge-path",a]),markerEnd:s,markerStart:r}),d&&h.jsx("path",{d:t,fill:"none",strokeOpacity:0,strokeWidth:d,className:"react-flow__edge-interaction"}),c&&Se(n)&&Se(o)?h.jsx(Or,{x:n,y:o,label:c,labelStyle:i,labelShowBg:l,labelBgStyle:g,labelBgPadding:f,labelBgBorderRadius:p}):null]})}function At({pos:e,x1:t,y1:n,x2:o,y2:c}){return e===ne.Left||e===ne.Right?[.5*(t+o),n]:[t,.5*(n+c)]}function yn({sourceX:e,sourceY:t,sourcePosition:n=ne.Bottom,targetX:o,targetY:c,targetPosition:i=ne.Top}){const[l,g]=At({pos:n,x1:e,y1:t,x2:o,y2:c}),[f,p]=At({pos:i,x1:o,y1:c,x2:e,y2:t}),[m,s,r,a]=ts({sourceX:e,sourceY:t,targetX:o,targetY:c,sourceControlX:l,sourceControlY:g,targetControlX:f,targetControlY:p});return[`M${e},${t} C${l},${g} ${f},${p} ${o},${c}`,m,s,r,a]}function Sn(e){return S.memo(({id:t,sourceX:n,sourceY:o,targetX:c,targetY:i,sourcePosition:l=ne.Bottom,targetPosition:g=ne.Top,label:f,labelStyle:p,labelShowBg:m,labelBgStyle:s,labelBgPadding:r,labelBgBorderRadius:a,style:d,markerEnd:u,markerStart:y,interactionWidth:w})=>{const[E,x,v]=yn({sourceX:n,sourceY:o,sourcePosition:l,targetX:c,targetY:i,targetPosition:g}),b=e.isInternal?void 0:t;return h.jsx(ke,{id:b,path:E,labelX:x,labelY:v,label:f,labelStyle:p,labelShowBg:m,labelBgStyle:s,labelBgPadding:r,labelBgBorderRadius:a,style:d,markerEnd:u,markerStart:y,interactionWidth:w})})}const Hr=Sn({isInternal:!1}),vn=Sn({isInternal:!0});Hr.displayName="SimpleBezierEdge";vn.displayName="SimpleBezierEdgeInternal";function En(e){return S.memo(({id:t,sourceX:n,sourceY:o,targetX:c,targetY:i,label:l,labelStyle:g,labelShowBg:f,labelBgStyle:p,labelBgPadding:m,labelBgBorderRadius:s,style:r,sourcePosition:a=ne.Bottom,targetPosition:d=ne.Top,markerEnd:u,markerStart:y,pathOptions:w,interactionWidth:E})=>{const[x,v,b]=He({sourceX:n,sourceY:o,sourcePosition:a,targetX:c,targetY:i,targetPosition:d,borderRadius:w==null?void 0:w.borderRadius,offset:w==null?void 0:w.offset}),C=e.isInternal?void 0:t;return h.jsx(ke,{id:C,path:x,labelX:v,labelY:b,label:l,labelStyle:g,labelShowBg:f,labelBgStyle:p,labelBgPadding:m,labelBgBorderRadius:s,style:r,markerEnd:u,markerStart:y,interactionWidth:E})})}const bn=En({isInternal:!1}),Nn=En({isInternal:!0});bn.displayName="SmoothStepEdge";Nn.displayName="SmoothStepEdgeInternal";function Cn(e){return S.memo(({id:t,...n})=>{var c;const o=e.isInternal?void 0:t;return h.jsx(bn,{...n,id:o,pathOptions:S.useMemo(()=>{var i;return{borderRadius:0,offset:(i=n.pathOptions)==null?void 0:i.offset}},[(c=n.pathOptions)==null?void 0:c.offset])})})}const Tr=Cn({isInternal:!1}),kn=Cn({isInternal:!0});Tr.displayName="StepEdge";kn.displayName="StepEdgeInternal";function _n(e){return S.memo(({id:t,sourceX:n,sourceY:o,targetX:c,targetY:i,label:l,labelStyle:g,labelShowBg:f,labelBgStyle:p,labelBgPadding:m,labelBgBorderRadius:s,style:r,markerEnd:a,markerStart:d,interactionWidth:u})=>{const[y,w,E]=Xt({sourceX:n,sourceY:o,targetX:c,targetY:i}),x=e.isInternal?void 0:t;return h.jsx(ke,{id:x,path:y,labelX:w,labelY:E,label:l,labelStyle:g,labelShowBg:f,labelBgStyle:p,labelBgPadding:m,labelBgBorderRadius:s,style:r,markerEnd:a,markerStart:d,interactionWidth:u})})}const Zr=_n({isInternal:!1}),In=_n({isInternal:!0});Zr.displayName="StraightEdge";In.displayName="StraightEdgeInternal";function Mn(e){return S.memo(({id:t,sourceX:n,sourceY:o,targetX:c,targetY:i,sourcePosition:l=ne.Bottom,targetPosition:g=ne.Top,label:f,labelStyle:p,labelShowBg:m,labelBgStyle:s,labelBgPadding:r,labelBgBorderRadius:a,style:d,markerEnd:u,markerStart:y,pathOptions:w,interactionWidth:E})=>{const[x,v,b]=Ot({sourceX:n,sourceY:o,sourcePosition:l,targetX:c,targetY:i,targetPosition:g,curvature:w==null?void 0:w.curvature}),C=e.isInternal?void 0:t;return h.jsx(ke,{id:C,path:x,labelX:v,labelY:b,label:f,labelStyle:p,labelShowBg:m,labelBgStyle:s,labelBgPadding:r,labelBgBorderRadius:a,style:d,markerEnd:u,markerStart:y,interactionWidth:E})})}const Wr=Mn({isInternal:!1}),Pn=Mn({isInternal:!0});Wr.displayName="BezierEdge";Pn.displayName="BezierEdgeInternal";const Lt={default:Pn,straight:In,step:kn,smoothstep:Nn,simplebezier:vn},Rt={sourceX:null,sourceY:null,targetX:null,targetY:null,sourcePosition:null,targetPosition:null},Yr=(e,t,n)=>n===ne.Left?e-t:n===ne.Right?e+t:e,Xr=(e,t,n)=>n===ne.Top?e-t:n===ne.Bottom?e+t:e,$t="react-flow__edgeupdater";function Vt({position:e,centerX:t,centerY:n,radius:o=10,onMouseDown:c,onMouseEnter:i,onMouseOut:l,type:g}){return h.jsx("circle",{onMouseDown:c,onMouseEnter:i,onMouseOut:l,className:ee([$t,`${$t}-${g}`]),cx:Yr(t,o,e),cy:Xr(n,o,e),r:o,stroke:"transparent",fill:"transparent"})}function qr({isReconnectable:e,reconnectRadius:t,edge:n,sourceX:o,sourceY:c,targetX:i,targetY:l,sourcePosition:g,targetPosition:f,onReconnect:p,onReconnectStart:m,onReconnectEnd:s,setReconnecting:r,setUpdateHover:a}){const d=X(),u=(v,b)=>{if(v.button!==0)return;const{autoPanOnConnect:C,domNode:k,isValidConnection:M,connectionMode:P,connectionRadius:_,lib:V,onConnectStart:T,onConnectEnd:H,cancelConnection:z,nodeLookup:L,rfId:I,panBy:D,updateConnection:N}=d.getState(),A=b.type==="target";r(!0),m==null||m(v,n,b.type);const R=(O,Z)=>{r(!1),s==null||s(O,n,b.type,Z)},$=O=>p==null?void 0:p(n,O);Xe.onPointerDown(v.nativeEvent,{autoPanOnConnect:C,connectionMode:P,connectionRadius:_,domNode:k,handleId:b.id,nodeId:b.nodeId,nodeLookup:L,isTarget:A,edgeUpdaterType:b.type,lib:V,flowId:I,cancelConnection:z,panBy:D,isValidConnection:M,onConnect:$,onConnectStart:T,onConnectEnd:H,onReconnectEnd:R,updateConnection:N,getTransform:()=>d.getState().transform,getFromHandle:()=>d.getState().connection.fromHandle})},y=v=>u(v,{nodeId:n.target,id:n.targetHandle??null,type:"target"}),w=v=>u(v,{nodeId:n.source,id:n.sourceHandle??null,type:"source"}),E=()=>a(!0),x=()=>a(!1);return h.jsxs(h.Fragment,{children:[(e===!0||e==="source")&&h.jsx(Vt,{position:g,centerX:o,centerY:c,radius:t,onMouseDown:y,onMouseEnter:E,onMouseOut:x,type:"source"}),(e===!0||e==="target")&&h.jsx(Vt,{position:f,centerX:i,centerY:l,radius:t,onMouseDown:w,onMouseEnter:E,onMouseOut:x,type:"target"})]})}function Ur({id:e,edgesFocusable:t,edgesReconnectable:n,elementsSelectable:o,onClick:c,onDoubleClick:i,onContextMenu:l,onMouseEnter:g,onMouseMove:f,onMouseLeave:p,reconnectRadius:m,onReconnect:s,onReconnectStart:r,onReconnectEnd:a,rfId:d,edgeTypes:u,noPanClassName:y,onError:w,disableKeyboardA11y:E}){let x=F(B=>B.edgeLookup.get(e));const v=F(B=>B.defaultEdgeOptions);x=v?{...v,...x}:x;let b=x.type||"default",C=(u==null?void 0:u[b])||Lt[b];C===void 0&&(w==null||w("011",ae.error011(b)),b="default",C=Lt.default);const k=!!(x.focusable||t&&typeof x.focusable>"u"),M=typeof s<"u"&&(x.reconnectable||n&&typeof x.reconnectable>"u"),P=!!(x.selectable||o&&typeof x.selectable>"u"),_=S.useRef(null),[V,T]=S.useState(!1),[H,z]=S.useState(!1),L=X(),{zIndex:I,sourceX:D,sourceY:N,targetX:A,targetY:R,sourcePosition:$,targetPosition:O}=F(S.useCallback(B=>{const q=B.nodeLookup.get(x.source),oe=B.nodeLookup.get(x.target);if(!q||!oe)return{zIndex:x.zIndex,...Rt};const se=qo({id:e,sourceNode:q,targetNode:oe,sourceHandle:x.sourceHandle||null,targetHandle:x.targetHandle||null,connectionMode:B.connectionMode,onError:w});return{zIndex:Uo({selected:x.selected,zIndex:x.zIndex,sourceNode:q,targetNode:oe,elevateOnSelect:B.elevateEdgesOnSelect}),...se||Rt}},[x.source,x.target,x.sourceHandle,x.targetHandle,x.selected,x.zIndex]),K),Z=S.useMemo(()=>x.markerStart?`url('#${dt(x.markerStart,d)}')`:void 0,[x.markerStart,d]),W=S.useMemo(()=>x.markerEnd?`url('#${dt(x.markerEnd,d)}')`:void 0,[x.markerEnd,d]);if(x.hidden||D===null||N===null||A===null||R===null)return null;const Q=B=>{var re;const{addSelectedEdges:q,unselectNodesAndEdges:oe,multiSelectionActive:se}=L.getState();P&&(L.setState({nodesSelectionActive:!1}),x.selected&&se?(oe({nodes:[],edges:[x]}),(re=_.current)==null||re.blur()):q([e])),c&&c(B,x)},U=i?B=>{i(B,{...x})}:void 0,G=l?B=>{l(B,{...x})}:void 0,j=g?B=>{g(B,{...x})}:void 0,Y=f?B=>{f(B,{...x})}:void 0,te=p?B=>{p(B,{...x})}:void 0,J=B=>{var q;if(!E&&Jt.includes(B.key)&&P){const{unselectNodesAndEdges:oe,addSelectedEdges:se}=L.getState();B.key==="Escape"?((q=_.current)==null||q.blur(),oe({edges:[x]})):se([e])}};return h.jsx("svg",{style:{zIndex:I},children:h.jsxs("g",{className:ee(["react-flow__edge",`react-flow__edge-${b}`,x.className,y,{selected:x.selected,animated:x.animated,inactive:!P&&!c,updating:V,selectable:P}]),onClick:Q,onDoubleClick:U,onContextMenu:G,onMouseEnter:j,onMouseMove:Y,onMouseLeave:te,onKeyDown:k?J:void 0,tabIndex:k?0:void 0,role:k?"button":"img","data-id":e,"data-testid":`rf__edge-${e}`,"aria-label":x.ariaLabel===null?void 0:x.ariaLabel||`Edge from ${x.source} to ${x.target}`,"aria-describedby":k?`${cn}-${d}`:void 0,ref:_,children:[!H&&h.jsx(C,{id:e,source:x.source,target:x.target,type:x.type,selected:x.selected,animated:x.animated,selectable:P,deletable:x.deletable??!0,label:x.label,labelStyle:x.labelStyle,labelShowBg:x.labelShowBg,labelBgStyle:x.labelBgStyle,labelBgPadding:x.labelBgPadding,labelBgBorderRadius:x.labelBgBorderRadius,sourceX:D,sourceY:N,targetX:A,targetY:R,sourcePosition:$,targetPosition:O,data:x.data,style:x.style,sourceHandleId:x.sourceHandle,targetHandleId:x.targetHandle,markerStart:Z,markerEnd:W,pathOptions:"pathOptions"in x?x.pathOptions:void 0,interactionWidth:x.interactionWidth}),M&&h.jsx(qr,{edge:x,isReconnectable:M,reconnectRadius:m,onReconnect:s,onReconnectStart:r,onReconnectEnd:a,sourceX:D,sourceY:N,targetX:A,targetY:R,sourcePosition:$,targetPosition:O,setUpdateHover:T,setReconnecting:z})]})})}const Gr=e=>({width:e.width,height:e.height,edgesFocusable:e.edgesFocusable,edgesReconnectable:e.edgesReconnectable,elementsSelectable:e.elementsSelectable,connectionMode:e.connectionMode,onError:e.onError});function jn({defaultMarkerColor:e,onlyRenderVisibleElements:t,rfId:n,edgeTypes:o,noPanClassName:c,onReconnect:i,onEdgeContextMenu:l,onEdgeMouseEnter:g,onEdgeMouseMove:f,onEdgeMouseLeave:p,onEdgeClick:m,reconnectRadius:s,onEdgeDoubleClick:r,onReconnectStart:a,onReconnectEnd:d,disableKeyboardA11y:u}){const{edgesFocusable:y,edgesReconnectable:w,elementsSelectable:E,onError:x}=F(Gr,K),v=Rr(t);return h.jsxs("div",{className:"react-flow__edges",children:[h.jsx(Fr,{defaultColor:e,rfId:n}),v.map(b=>h.jsx(Ur,{id:b,edgesFocusable:y,edgesReconnectable:w,elementsSelectable:E,noPanClassName:c,onReconnect:i,onContextMenu:l,onMouseEnter:g,onMouseMove:f,onMouseLeave:p,onClick:m,reconnectRadius:s,onDoubleClick:r,onReconnectStart:a,onReconnectEnd:d,rfId:n,onError:x,edgeTypes:o,disableKeyboardA11y:u},b))]})}jn.displayName="EdgeRenderer";const Kr=S.memo(jn),Qr=e=>`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`;function Jr({children:e}){const t=F(Qr);return h.jsx("div",{className:"react-flow__viewport xyflow__viewport react-flow__container",style:{transform:t},children:e})}function ei(e){const t=Qe(),n=S.useRef(!1);S.useEffect(()=>{!n.current&&t.viewportInitialized&&e&&(setTimeout(()=>e(t),1),n.current=!0)},[e,t.viewportInitialized])}const ti=e=>{var t;return(t=e.panZoom)==null?void 0:t.syncViewport};function ni(e){const t=F(ti),n=X();return S.useEffect(()=>{e&&(t==null||t(e),n.setState({transform:[e.x,e.y,e.zoom]}))},[e,t]),null}function oi(e){return e.connection.inProgress?{...e.connection,to:Kt(e.connection.to,e.transform)}:{...e.connection}}function si(e){return oi}function ri(e){const t=si();return F(t,K)}const ii=e=>({nodesConnectable:e.nodesConnectable,isValid:e.connection.isValid,inProgress:e.connection.inProgress,width:e.width,height:e.height});function ci({containerStyle:e,style:t,type:n,component:o}){const{nodesConnectable:c,width:i,height:l,isValid:g,inProgress:f}=F(ii,K);return!(i&&c&&f)?null:h.jsx("svg",{style:e,width:i,height:l,className:"react-flow__connectionline react-flow__container",children:h.jsx("g",{className:ee(["react-flow__connection",qt(g)]),children:h.jsx(Dn,{style:t,type:n,CustomComponent:o,isValid:g})})})}const Dn=({style:e,type:t=de.Bezier,CustomComponent:n,isValid:o})=>{const{inProgress:c,from:i,fromNode:l,fromHandle:g,fromPosition:f,to:p,toNode:m,toHandle:s,toPosition:r}=ri();if(!c)return;if(n)return h.jsx(n,{connectionLineType:t,connectionLineStyle:e,fromNode:l,fromHandle:g,fromX:i.x,fromY:i.y,toX:p.x,toY:p.y,fromPosition:f,toPosition:r,connectionStatus:qt(o),toNode:m,toHandle:s});let a="";const d={sourceX:i.x,sourceY:i.y,sourcePosition:f,targetX:p.x,targetY:p.y,targetPosition:r};switch(t){case de.Bezier:[a]=Ot(d);break;case de.SimpleBezier:[a]=yn(d);break;case de.Step:[a]=He({...d,borderRadius:0});break;case de.SmoothStep:[a]=He(d);break;default:[a]=Xt(d)}return h.jsx("path",{d:a,fill:"none",className:"react-flow__connection-path",style:e})};Dn.displayName="ConnectionLine";const ai={};function zt(e=ai){S.useRef(e),X(),S.useEffect(()=>{},[e])}function di(){X(),S.useRef(!1),S.useEffect(()=>{},[])}function An({nodeTypes:e,edgeTypes:t,onInit:n,onNodeClick:o,onEdgeClick:c,onNodeDoubleClick:i,onEdgeDoubleClick:l,onNodeMouseEnter:g,onNodeMouseMove:f,onNodeMouseLeave:p,onNodeContextMenu:m,onSelectionContextMenu:s,onSelectionStart:r,onSelectionEnd:a,connectionLineType:d,connectionLineStyle:u,connectionLineComponent:y,connectionLineContainerStyle:w,selectionKeyCode:E,selectionOnDrag:x,selectionMode:v,multiSelectionKeyCode:b,panActivationKeyCode:C,zoomActivationKeyCode:k,deleteKeyCode:M,onlyRenderVisibleElements:P,elementsSelectable:_,defaultViewport:V,translateExtent:T,minZoom:H,maxZoom:z,preventScrolling:L,defaultMarkerColor:I,zoomOnScroll:D,zoomOnPinch:N,panOnScroll:A,panOnScrollSpeed:R,panOnScrollMode:$,zoomOnDoubleClick:O,panOnDrag:Z,onPaneClick:W,onPaneMouseEnter:Q,onPaneMouseMove:U,onPaneMouseLeave:G,onPaneScroll:j,onPaneContextMenu:Y,paneClickDistance:te,nodeClickDistance:J,onEdgeContextMenu:B,onEdgeMouseEnter:q,onEdgeMouseMove:oe,onEdgeMouseLeave:se,reconnectRadius:re,onReconnect:_e,onReconnectStart:Ie,onReconnectEnd:Me,noDragClassName:ue,noWheelClassName:Pe,noPanClassName:fe,disableKeyboardA11y:ge,nodeExtent:je,rfId:pe,viewport:he,onViewportChange:we}){return zt(e),zt(t),di(),ei(n),ni(he),h.jsx(kr,{onPaneClick:W,onPaneMouseEnter:Q,onPaneMouseMove:U,onPaneMouseLeave:G,onPaneContextMenu:Y,onPaneScroll:j,paneClickDistance:te,deleteKeyCode:M,selectionKeyCode:E,selectionOnDrag:x,selectionMode:v,onSelectionStart:r,onSelectionEnd:a,multiSelectionKeyCode:b,panActivationKeyCode:C,zoomActivationKeyCode:k,elementsSelectable:_,zoomOnScroll:D,zoomOnPinch:N,zoomOnDoubleClick:O,panOnScroll:A,panOnScrollSpeed:R,panOnScrollMode:$,panOnDrag:Z,defaultViewport:V,translateExtent:T,minZoom:H,maxZoom:z,onSelectionContextMenu:s,preventScrolling:L,noDragClassName:ue,noWheelClassName:Pe,noPanClassName:fe,disableKeyboardA11y:ge,onViewportChange:we,isControlledViewport:!!he,children:h.jsxs(Jr,{children:[h.jsx(Kr,{edgeTypes:t,onEdgeClick:c,onEdgeDoubleClick:l,onReconnect:_e,onReconnectStart:Ie,onReconnectEnd:Me,onlyRenderVisibleElements:P,onEdgeContextMenu:B,onEdgeMouseEnter:q,onEdgeMouseMove:oe,onEdgeMouseLeave:se,reconnectRadius:re,defaultMarkerColor:I,noPanClassName:fe,disableKeyboardA11y:ge,rfId:pe}),h.jsx(ci,{style:u,type:d,component:y,containerStyle:w}),h.jsx("div",{className:"react-flow__edgelabel-renderer"}),h.jsx(Lr,{nodeTypes:e,onNodeClick:o,onNodeDoubleClick:i,onNodeMouseEnter:g,onNodeMouseMove:f,onNodeMouseLeave:p,onNodeContextMenu:m,nodeClickDistance:J,onlyRenderVisibleElements:P,noPanClassName:fe,noDragClassName:ue,disableKeyboardA11y:ge,nodeExtent:je,rfId:pe}),h.jsx("div",{className:"react-flow__viewport-portal"})]})})}An.displayName="GraphView";const li=S.memo(An),Bt=({nodes:e,edges:t,defaultNodes:n,defaultEdges:o,width:c,height:i,fitView:l,nodeOrigin:g,nodeExtent:f}={})=>{const p=new Map,m=new Map,s=new Map,r=new Map,a=o??t??[],d=n??e??[],u=g??[0,0],y=f??ve;tn(s,r,a),qe(d,p,m,{nodeOrigin:u,nodeExtent:y,elevateNodesOnSelect:!1});let w=[0,0,1];if(l&&c&&i){const E=Ge(p,{filter:C=>!!((C.width||C.initialWidth)&&(C.height||C.initialHeight))}),{x,y:v,zoom:b}=Gt(E,c,i,.5,2,.1);w=[x,v,b]}return{rfId:"1",width:0,height:0,transform:w,nodes:d,nodeLookup:p,parentLookup:m,edges:a,edgeLookup:r,connectionLookup:s,onNodesChange:null,onEdgesChange:null,hasDefaultNodes:n!==void 0,hasDefaultEdges:o!==void 0,panZoom:null,minZoom:.5,maxZoom:2,translateExtent:ve,nodeExtent:y,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionMode:en.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:u,nodeDragThreshold:1,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesReconnectable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,elevateEdgesOnSelect:!1,fitViewOnInit:!1,fitViewDone:!1,fitViewOnInitOptions:void 0,selectNodesOnDrag:!0,multiSelectionActive:!1,connection:{...nn},connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,autoPanSpeed:15,connectionRadius:20,onError:ls,isValidConnection:void 0,onSelectionChangeHandlers:[],lib:"react",debug:!1}},ui=({nodes:e,edges:t,defaultNodes:n,defaultEdges:o,width:c,height:i,fitView:l,nodeOrigin:g,nodeExtent:f})=>Is((p,m)=>({...Bt({nodes:e,edges:t,width:c,height:i,fitView:l,nodeOrigin:g,nodeExtent:f,defaultNodes:n,defaultEdges:o}),setNodes:s=>{const{nodeLookup:r,parentLookup:a,nodeOrigin:d,elevateNodesOnSelect:u}=m();qe(s,r,a,{nodeOrigin:d,nodeExtent:f,elevateNodesOnSelect:u,checkEquality:!0}),p({nodes:s})},setEdges:s=>{const{connectionLookup:r,edgeLookup:a}=m();tn(r,a,s),p({edges:s})},setDefaultNodesAndEdges:(s,r)=>{if(s){const{setNodes:a}=m();a(s),p({hasDefaultNodes:!0})}if(r){const{setEdges:a}=m();a(r),p({hasDefaultEdges:!0})}},updateNodeInternals:(s,r={triggerFitView:!0})=>{const{triggerNodeChanges:a,nodeLookup:d,parentLookup:u,fitViewOnInit:y,fitViewDone:w,fitViewOnInitOptions:E,domNode:x,nodeOrigin:v,nodeExtent:b,debug:C,fitViewSync:k}=m(),{changes:M,updatedInternals:P}=cs(s,d,u,x,v,b);if(P){if(as(d,u,{nodeOrigin:v,nodeExtent:b}),r.triggerFitView){let _=w;!w&&y&&(_=k({...E,nodes:E==null?void 0:E.nodes})),p({fitViewDone:_})}else p({});(M==null?void 0:M.length)>0&&(C&&console.log("React Flow: trigger node changes",M),a==null||a(M))}},updateNodePositions:(s,r=!1)=>{const a=[],d=[];for(const[u,y]of s){const w={id:u,type:"position",position:y.position,dragging:r};y!=null&&y.expandParent&&(y!=null&&y.parentId)&&w.position&&(a.push({id:u,parentId:y.parentId,rect:{...y.internals.positionAbsolute,width:y.measured.width,height:y.measured.height}}),w.position.x=Math.max(0,w.position.x),w.position.y=Math.max(0,w.position.y)),d.push(w)}if(a.length>0){const{nodeLookup:u,parentLookup:y,nodeOrigin:w}=m(),E=Zt(a,u,y,w);d.push(...E)}m().triggerNodeChanges(d)},triggerNodeChanges:s=>{const{onNodesChange:r,setNodes:a,nodes:d,hasDefaultNodes:u,debug:y}=m();if(s!=null&&s.length){if(u){const w=Us(s,d);a(w)}y&&console.log("React Flow: trigger node changes",s),r==null||r(s)}},triggerEdgeChanges:s=>{const{onEdgesChange:r,setEdges:a,edges:d,hasDefaultEdges:u,debug:y}=m();if(s!=null&&s.length){if(u){const w=Gs(s,d);a(w)}y&&console.log("React Flow: trigger edge changes",s),r==null||r(s)}},addSelectedNodes:s=>{const{multiSelectionActive:r,edgeLookup:a,nodeLookup:d,triggerNodeChanges:u,triggerEdgeChanges:y}=m();if(r){const w=s.map(E=>ce(E,!0));u(w);return}u(le(d,new Set([...s]),!0)),y(le(a))},addSelectedEdges:s=>{const{multiSelectionActive:r,edgeLookup:a,nodeLookup:d,triggerNodeChanges:u,triggerEdgeChanges:y}=m();if(r){const w=s.map(E=>ce(E,!0));y(w);return}y(le(a,new Set([...s]))),u(le(d,new Set,!0))},unselectNodesAndEdges:({nodes:s,edges:r}={})=>{const{edges:a,nodes:d,nodeLookup:u,triggerNodeChanges:y,triggerEdgeChanges:w}=m(),E=s||d,x=r||a,v=E.map(C=>{const k=u.get(C.id);return k&&(k.selected=!1),ce(C.id,!1)}),b=x.map(C=>ce(C.id,!1));y(v),w(b)},setMinZoom:s=>{const{panZoom:r,maxZoom:a}=m();r==null||r.setScaleExtent([s,a]),p({minZoom:s})},setMaxZoom:s=>{const{panZoom:r,minZoom:a}=m();r==null||r.setScaleExtent([a,s]),p({maxZoom:s})},setTranslateExtent:s=>{var r;(r=m().panZoom)==null||r.setTranslateExtent(s),p({translateExtent:s})},setPaneClickDistance:s=>{var r;(r=m().panZoom)==null||r.setClickDistance(s)},resetSelectedElements:()=>{const{edges:s,nodes:r,triggerNodeChanges:a,triggerEdgeChanges:d}=m(),u=r.reduce((w,E)=>E.selected?[...w,ce(E.id,!1)]:w,[]),y=s.reduce((w,E)=>E.selected?[...w,ce(E.id,!1)]:w,[]);a(u),d(y)},setNodeExtent:s=>{const{nodes:r,nodeLookup:a,parentLookup:d,nodeOrigin:u,elevateNodesOnSelect:y,nodeExtent:w}=m();s[0][0]===w[0][0]&&s[0][1]===w[0][1]&&s[1][0]===w[1][0]&&s[1][1]===w[1][1]||(qe(r,a,d,{nodeOrigin:u,nodeExtent:s,elevateNodesOnSelect:y,checkEquality:!1}),p({nodeExtent:s}))},panBy:s=>{const{transform:r,width:a,height:d,panZoom:u,translateExtent:y}=m();return ds({delta:s,panZoom:u,transform:r,translateExtent:y,width:a,height:d})},fitView:s=>{const{panZoom:r,width:a,height:d,minZoom:u,maxZoom:y,nodeLookup:w}=m();if(!r)return Promise.resolve(!1);const E=We(w,s);return Ye({nodes:E,width:a,height:d,panZoom:r,minZoom:u,maxZoom:y},s)},fitViewSync:s=>{const{panZoom:r,width:a,height:d,minZoom:u,maxZoom:y,nodeLookup:w}=m();if(!r)return!1;const E=We(w,s);return Ye({nodes:E,width:a,height:d,panZoom:r,minZoom:u,maxZoom:y},s),E.size>0},cancelConnection:()=>{p({connection:{...nn}})},updateConnection:s=>{p({connection:s})},reset:()=>p({...Bt()})}),Object.is);function fi({initialNodes:e,initialEdges:t,defaultNodes:n,defaultEdges:o,initialWidth:c,initialHeight:i,fitView:l,nodeOrigin:g,nodeExtent:f,children:p}){const[m]=S.useState(()=>ui({nodes:e,edges:t,defaultNodes:n,defaultEdges:o,width:c,height:i,fitView:l,nodeOrigin:g,nodeExtent:f}));return h.jsx(Ms,{value:m,children:h.jsx(er,{children:p})})}function gi({children:e,nodes:t,edges:n,defaultNodes:o,defaultEdges:c,width:i,height:l,fitView:g,nodeOrigin:f,nodeExtent:p}){return S.useContext(Ne)?h.jsx(h.Fragment,{children:e}):h.jsx(fi,{initialNodes:t,initialEdges:n,defaultNodes:o,defaultEdges:c,initialWidth:i,initialHeight:l,fitView:g,nodeOrigin:f,nodeExtent:p,children:e})}const pi={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0};function hi({nodes:e,edges:t,defaultNodes:n,defaultEdges:o,className:c,nodeTypes:i,edgeTypes:l,onNodeClick:g,onEdgeClick:f,onInit:p,onMove:m,onMoveStart:s,onMoveEnd:r,onConnect:a,onConnectStart:d,onConnectEnd:u,onClickConnectStart:y,onClickConnectEnd:w,onNodeMouseEnter:E,onNodeMouseMove:x,onNodeMouseLeave:v,onNodeContextMenu:b,onNodeDoubleClick:C,onNodeDragStart:k,onNodeDrag:M,onNodeDragStop:P,onNodesDelete:_,onEdgesDelete:V,onDelete:T,onSelectionChange:H,onSelectionDragStart:z,onSelectionDrag:L,onSelectionDragStop:I,onSelectionContextMenu:D,onSelectionStart:N,onSelectionEnd:A,onBeforeDelete:R,connectionMode:$,connectionLineType:O=de.Bezier,connectionLineStyle:Z,connectionLineComponent:W,connectionLineContainerStyle:Q,deleteKeyCode:U="Backspace",selectionKeyCode:G="Shift",selectionOnDrag:j=!1,selectionMode:Y=Te.Full,panActivationKeyCode:te="Space",multiSelectionKeyCode:J=lt()?"Meta":"Control",zoomActivationKeyCode:B=lt()?"Meta":"Control",snapToGrid:q,snapGrid:oe,onlyRenderVisibleElements:se=!1,selectNodesOnDrag:re,nodesDraggable:_e,nodesConnectable:Ie,nodesFocusable:Me,nodeOrigin:ue=an,edgesFocusable:Pe,edgesReconnectable:fe,elementsSelectable:ge=!0,defaultViewport:je=Hs,minZoom:pe=.5,maxZoom:he=2,translateExtent:we=ve,preventScrolling:Vn=!0,nodeExtent:De,defaultMarkerColor:zn="#b1b1b7",zoomOnScroll:Bn=!0,zoomOnPinch:Fn=!0,panOnScroll:On=!1,panOnScrollSpeed:Hn=.5,panOnScrollMode:Tn=Wt.Free,zoomOnDoubleClick:Zn=!0,panOnDrag:Wn=!0,onPaneClick:Yn,onPaneMouseEnter:Xn,onPaneMouseMove:qn,onPaneMouseLeave:Un,onPaneScroll:Gn,onPaneContextMenu:Kn,paneClickDistance:et=0,nodeClickDistance:Qn=0,children:Jn,onReconnect:eo,onReconnectStart:to,onReconnectEnd:no,onEdgeContextMenu:oo,onEdgeDoubleClick:so,onEdgeMouseEnter:ro,onEdgeMouseMove:io,onEdgeMouseLeave:co,reconnectRadius:ao=10,onNodesChange:lo,onEdgesChange:uo,noDragClassName:fo="nodrag",noWheelClassName:go="nowheel",noPanClassName:tt="nopan",fitView:nt,fitViewOptions:po,connectOnClick:ho,attributionPosition:mo,proOptions:wo,defaultEdgeOptions:xo,elevateNodesOnSelect:yo,elevateEdgesOnSelect:So,disableKeyboardA11y:ot=!1,autoPanOnConnect:vo,autoPanOnNodeDrag:Eo,autoPanSpeed:bo,connectionRadius:No,isValidConnection:Co,onError:ko,style:_o,id:st,nodeDragThreshold:Io,viewport:Mo,onViewportChange:Po,width:jo,height:Do,colorMode:Ao="light",debug:Lo,...Ro},$o){const Ae=st||"1",Vo=Ys(Ao);return h.jsx("div",{...Ro,style:{..._o,...pi},ref:$o,className:ee(["react-flow",c,Vo]),"data-testid":"rf__wrapper",id:st,children:h.jsxs(gi,{nodes:e,edges:t,width:jo,height:Do,fitView:nt,nodeOrigin:ue,nodeExtent:De,children:[h.jsx(li,{onInit:p,onNodeClick:g,onEdgeClick:f,onNodeMouseEnter:E,onNodeMouseMove:x,onNodeMouseLeave:v,onNodeContextMenu:b,onNodeDoubleClick:C,nodeTypes:i,edgeTypes:l,connectionLineType:O,connectionLineStyle:Z,connectionLineComponent:W,connectionLineContainerStyle:Q,selectionKeyCode:G,selectionOnDrag:j,selectionMode:Y,deleteKeyCode:U,multiSelectionKeyCode:J,panActivationKeyCode:te,zoomActivationKeyCode:B,onlyRenderVisibleElements:se,defaultViewport:je,translateExtent:we,minZoom:pe,maxZoom:he,preventScrolling:Vn,zoomOnScroll:Bn,zoomOnPinch:Fn,zoomOnDoubleClick:Zn,panOnScroll:On,panOnScrollSpeed:Hn,panOnScrollMode:Tn,panOnDrag:Wn,onPaneClick:Yn,onPaneMouseEnter:Xn,onPaneMouseMove:qn,onPaneMouseLeave:Un,onPaneScroll:Gn,onPaneContextMenu:Kn,paneClickDistance:et,nodeClickDistance:Qn,onSelectionContextMenu:D,onSelectionStart:N,onSelectionEnd:A,onReconnect:eo,onReconnectStart:to,onReconnectEnd:no,onEdgeContextMenu:oo,onEdgeDoubleClick:so,onEdgeMouseEnter:ro,onEdgeMouseMove:io,onEdgeMouseLeave:co,reconnectRadius:ao,defaultMarkerColor:zn,noDragClassName:fo,noWheelClassName:go,noPanClassName:tt,rfId:Ae,disableKeyboardA11y:ot,nodeExtent:De,viewport:Mo,onViewportChange:Po}),h.jsx(Ws,{nodes:e,edges:t,defaultNodes:n,defaultEdges:o,onConnect:a,onConnectStart:d,onConnectEnd:u,onClickConnectStart:y,onClickConnectEnd:w,nodesDraggable:_e,nodesConnectable:Ie,nodesFocusable:Me,edgesFocusable:Pe,edgesReconnectable:fe,elementsSelectable:ge,elevateNodesOnSelect:yo,elevateEdgesOnSelect:So,minZoom:pe,maxZoom:he,nodeExtent:De,onNodesChange:lo,onEdgesChange:uo,snapToGrid:q,snapGrid:oe,connectionMode:$,translateExtent:we,connectOnClick:ho,defaultEdgeOptions:xo,fitView:nt,fitViewOptions:po,onNodesDelete:_,onEdgesDelete:V,onDelete:T,onNodeDragStart:k,onNodeDrag:M,onNodeDragStop:P,onSelectionDrag:L,onSelectionDragStart:z,onSelectionDragStop:I,onMove:m,onMoveStart:s,onMoveEnd:r,noPanClassName:tt,nodeOrigin:ue,rfId:Ae,autoPanOnConnect:vo,autoPanOnNodeDrag:Eo,autoPanSpeed:bo,onError:ko,connectionRadius:No,isValidConnection:Co,selectNodesOnDrag:re,nodeDragThreshold:Io,onBeforeDelete:R,paneClickDistance:et,debug:Lo}),h.jsx(Os,{onSelectionChange:H}),Jn,h.jsx($s,{proOptions:wo,position:mo}),h.jsx(Ls,{rfId:Ae,disableKeyboardA11y:ot})]})})}var mi=ln(hi);function wi({dimensions:e,lineWidth:t,variant:n,className:o}){return h.jsx("path",{strokeWidth:t,d:`M${e[0]/2} 0 V${e[1]} M0 ${e[1]/2} H${e[0]}`,className:ee(["react-flow__background-pattern",n,o])})}function xi({radius:e,className:t}){return h.jsx("circle",{cx:e,cy:e,r:e,className:ee(["react-flow__background-pattern","dots",t])})}var ie;(function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"})(ie||(ie={}));const yi={[ie.Dots]:1,[ie.Lines]:1,[ie.Cross]:6},Si=e=>({transform:e.transform,patternId:`pattern-${e.rfId}`});function Ln({id:e,variant:t=ie.Dots,gap:n=20,size:o,lineWidth:c=1,offset:i=0,color:l,bgColor:g,style:f,className:p,patternClassName:m}){const s=S.useRef(null),{transform:r,patternId:a}=F(Si,K),d=o||yi[t],u=t===ie.Dots,y=t===ie.Cross,w=Array.isArray(n)?n:[n,n],E=[w[0]*r[2]||1,w[1]*r[2]||1],x=d*r[2],v=Array.isArray(i)?i:[i,i],b=y?[x,x]:E,C=[v[0]*r[2]||1+b[0]/2,v[1]*r[2]||1+b[1]/2],k=`${a}${e||""}`;return h.jsxs("svg",{className:ee(["react-flow__background",p]),style:{...f,...Ce,"--xy-background-color-props":g,"--xy-background-pattern-color-props":l},ref:s,"data-testid":"rf__background",children:[h.jsx("pattern",{id:k,x:r[0]%E[0],y:r[1]%E[1],width:E[0],height:E[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${C[0]},-${C[1]})`,children:u?h.jsx(xi,{radius:x/2,className:m}):h.jsx(wi,{dimensions:b,lineWidth:c,variant:t,className:m})}),h.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${k})`})]})}Ln.displayName="Background";const vi=S.memo(Ln);function Ei(){return h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",children:h.jsx("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"})})}function bi(){return h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5",children:h.jsx("path",{d:"M0 0h32v4.2H0z"})})}function Ni(){return h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30",children:h.jsx("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"})})}function Ci(){return h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:h.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"})})}function ki(){return h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:h.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"})})}function ye({children:e,className:t,...n}){return h.jsx("button",{type:"button",className:ee(["react-flow__controls-button",t]),...n,children:e})}const _i=e=>({isInteractive:e.nodesDraggable||e.nodesConnectable||e.elementsSelectable,minZoomReached:e.transform[2]<=e.minZoom,maxZoomReached:e.transform[2]>=e.maxZoom});function Rn({style:e,showZoom:t=!0,showFitView:n=!0,showInteractive:o=!0,fitViewOptions:c,onZoomIn:i,onZoomOut:l,onFitView:g,onInteractiveChange:f,className:p,children:m,position:s="bottom-left",orientation:r="vertical","aria-label":a="React Flow controls"}){const d=X(),{isInteractive:u,minZoomReached:y,maxZoomReached:w}=F(_i,K),{zoomIn:E,zoomOut:x,fitView:v}=Qe(),b=()=>{E(),i==null||i()},C=()=>{x(),l==null||l()},k=()=>{v(c),g==null||g()},M=()=>{d.setState({nodesDraggable:!u,nodesConnectable:!u,elementsSelectable:!u}),f==null||f(!u)},P=r==="horizontal"?"horizontal":"vertical";return h.jsxs(Ke,{className:ee(["react-flow__controls",P,p]),position:s,style:e,"data-testid":"rf__controls","aria-label":a,children:[t&&h.jsxs(h.Fragment,{children:[h.jsx(ye,{onClick:b,className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",disabled:w,children:h.jsx(Ei,{})}),h.jsx(ye,{onClick:C,className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",disabled:y,children:h.jsx(bi,{})})]}),n&&h.jsx(ye,{className:"react-flow__controls-fitview",onClick:k,title:"fit view","aria-label":"fit view",children:h.jsx(Ni,{})}),o&&h.jsx(ye,{className:"react-flow__controls-interactive",onClick:M,title:"toggle interactivity","aria-label":"toggle interactivity",children:u?h.jsx(ki,{}):h.jsx(Ci,{})}),m]})}Rn.displayName="Controls";const Ii=S.memo(Rn);function Mi({id:e,x:t,y:n,width:o,height:c,style:i,color:l,strokeColor:g,strokeWidth:f,className:p,borderRadius:m,shapeRendering:s,selected:r,onClick:a}){const{background:d,backgroundColor:u}=i||{},y=l||d||u;return h.jsx("rect",{className:ee(["react-flow__minimap-node",{selected:r},p]),x:t,y:n,rx:m,ry:m,width:o,height:c,style:{fill:y,stroke:g,strokeWidth:f},shapeRendering:s,onClick:a?w=>a(w,e):void 0})}const Pi=S.memo(Mi),ji=e=>e.nodes.map(t=>t.id),Fe=e=>e instanceof Function?e:()=>e;function Di({nodeStrokeColor:e,nodeColor:t,nodeClassName:n="",nodeBorderRadius:o=5,nodeStrokeWidth:c,nodeComponent:i=Pi,onClick:l}){const g=F(ji,K),f=Fe(t),p=Fe(e),m=Fe(n),s=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision";return h.jsx(h.Fragment,{children:g.map(r=>h.jsx(Li,{id:r,nodeColorFunc:f,nodeStrokeColorFunc:p,nodeClassNameFunc:m,nodeBorderRadius:o,nodeStrokeWidth:c,NodeComponent:i,onClick:l,shapeRendering:s},r))})}function Ai({id:e,nodeColorFunc:t,nodeStrokeColorFunc:n,nodeClassNameFunc:o,nodeBorderRadius:c,nodeStrokeWidth:i,shapeRendering:l,NodeComponent:g,onClick:f}){const{node:p,x:m,y:s,width:r,height:a}=F(d=>{const u=d.nodeLookup.get(e),{x:y,y:w}=u.internals.positionAbsolute,{width:E,height:x}=Yt(u);return{node:u,x:y,y:w,width:E,height:x}},K);return!p||p.hidden||!Ht(p)?null:h.jsx(g,{x:m,y:s,width:r,height:a,style:p.style,selected:!!p.selected,className:o(p),color:t(p),borderRadius:c,strokeColor:n(p),strokeWidth:i,shapeRendering:l,onClick:f,id:p.id})}const Li=S.memo(Ai);var Ri=S.memo(Di);const $i=200,Vi=150,zi=e=>{const t={x:-e.transform[0]/e.transform[2],y:-e.transform[1]/e.transform[2],width:e.width/e.transform[2],height:e.height/e.transform[2]};return{viewBB:t,boundingRect:e.nodeLookup.size>0?is(Ge(e.nodeLookup),t):t,rfId:e.rfId,panZoom:e.panZoom,translateExtent:e.translateExtent,flowWidth:e.width,flowHeight:e.height}},Bi="react-flow__minimap-desc";function $n({style:e,className:t,nodeStrokeColor:n,nodeColor:o,nodeClassName:c="",nodeBorderRadius:i=5,nodeStrokeWidth:l,nodeComponent:g,bgColor:f,maskColor:p,maskStrokeColor:m,maskStrokeWidth:s,position:r="bottom-right",onClick:a,onNodeClick:d,pannable:u=!1,zoomable:y=!1,ariaLabel:w="React Flow mini map",inversePan:E,zoomStep:x=10,offsetScale:v=5}){const b=X(),C=S.useRef(null),{boundingRect:k,viewBB:M,rfId:P,panZoom:_,translateExtent:V,flowWidth:T,flowHeight:H}=F(zi,K),z=(e==null?void 0:e.width)??$i,L=(e==null?void 0:e.height)??Vi,I=k.width/z,D=k.height/L,N=Math.max(I,D),A=N*z,R=N*L,$=v*N,O=k.x-(A-k.width)/2-$,Z=k.y-(R-k.height)/2-$,W=A+$*2,Q=R+$*2,U=`${Bi}-${P}`,G=S.useRef(0),j=S.useRef();G.current=N,S.useEffect(()=>{if(C.current&&_)return j.current=Ho({domNode:C.current,panZoom:_,getTransform:()=>b.getState().transform,getViewScale:()=>G.current}),()=>{var J;(J=j.current)==null||J.destroy()}},[_]),S.useEffect(()=>{var J;(J=j.current)==null||J.update({translateExtent:V,width:T,height:H,inversePan:E,pannable:u,zoomStep:x,zoomable:y})},[u,y,E,x,V,T,H]);const Y=a?J=>{var oe;const[B,q]=((oe=j.current)==null?void 0:oe.pointer(J))||[0,0];a(J,{x:B,y:q})}:void 0,te=d?S.useCallback((J,B)=>{const q=b.getState().nodeLookup.get(B);d(J,q)},[]):void 0;return h.jsx(Ke,{position:r,style:{...e,"--xy-minimap-background-color-props":typeof f=="string"?f:void 0,"--xy-minimap-mask-background-color-props":typeof p=="string"?p:void 0,"--xy-minimap-mask-stroke-color-props":typeof m=="string"?m:void 0,"--xy-minimap-mask-stroke-width-props":typeof s=="number"?s*N:void 0,"--xy-minimap-node-background-color-props":typeof o=="string"?o:void 0,"--xy-minimap-node-stroke-color-props":typeof n=="string"?n:void 0,"--xy-minimap-node-stroke-width-props":typeof l=="string"?l:void 0},className:ee(["react-flow__minimap",t]),"data-testid":"rf__minimap",children:h.jsxs("svg",{width:z,height:L,viewBox:`${O} ${Z} ${W} ${Q}`,className:"react-flow__minimap-svg",role:"img","aria-labelledby":U,ref:C,onClick:Y,children:[w&&h.jsx("title",{id:U,children:w}),h.jsx(Ri,{onClick:te,nodeColor:o,nodeStrokeColor:n,nodeBorderRadius:i,nodeClassName:c,nodeStrokeWidth:l,nodeComponent:g}),h.jsx("path",{className:"react-flow__minimap-mask",d:`M${O-$},${Z-$}h${W+$*2}v${Q+$*2}h${-W-$*2}z
        M${M.x},${M.y}h${M.width}v${M.height}h${-M.width}z`,fillRule:"evenodd",pointerEvents:"none"})]})})}$n.displayName="MiniMap";S.memo($n);function Fi({nodeId:e,position:t,variant:n=Le.Handle,className:o,style:c={},children:i,color:l,minWidth:g=10,minHeight:f=10,maxWidth:p=Number.MAX_VALUE,maxHeight:m=Number.MAX_VALUE,keepAspectRatio:s=!1,shouldResize:r,onResizeStart:a,onResize:d,onResizeEnd:u}){const y=pn(),w=typeof e=="string"?e:y,E=X(),x=S.useRef(null),v=n===Le.Line?"right":"bottom-right",b=t??v,C=S.useRef(null);S.useEffect(()=>{if(!(!x.current||!w))return C.current||(C.current=To({domNode:x.current,nodeId:w,getStoreItems:()=>{const{nodeLookup:_,transform:V,snapGrid:T,snapToGrid:H,nodeOrigin:z,domNode:L}=E.getState();return{nodeLookup:_,transform:V,snapGrid:T,snapToGrid:H,nodeOrigin:z,paneDomNode:L}},onChange:(_,V)=>{const{triggerNodeChanges:T,nodeLookup:H,parentLookup:z,nodeOrigin:L}=E.getState(),I=[],D={x:_.x,y:_.y},N=H.get(w);if(N&&N.expandParent&&N.parentId){const A=N.origin??L,R=_.width??N.measured.width,$=_.height??N.measured.height,O={id:N.id,parentId:N.parentId,rect:{width:R,height:$,...Tt({x:_.x??N.position.x,y:_.y??N.position.y},{width:R,height:$},N.parentId,H,A)}},Z=Zt([O],H,z,L);I.push(...Z),D.x=_.x?Math.max(A[0]*R,_.x):void 0,D.y=_.y?Math.max(A[1]*$,_.y):void 0}if(D.x!==void 0&&D.y!==void 0){const A={id:w,type:"position",position:{...D}};I.push(A)}if(_.width!==void 0&&_.height!==void 0){const A={id:w,type:"dimensions",resizing:!0,setAttributes:!0,dimensions:{width:_.width,height:_.height}};I.push(A)}for(const A of V){const R={...A,type:"position"};I.push(R)}T(I)},onEnd:()=>{const _={id:w,type:"dimensions",resizing:!1};E.getState().triggerNodeChanges([_])}})),C.current.update({controlPosition:b,boundaries:{minWidth:g,minHeight:f,maxWidth:p,maxHeight:m},keepAspectRatio:s,onResizeStart:a,onResize:d,onResizeEnd:u,shouldResize:r}),()=>{var _;(_=C.current)==null||_.destroy()}},[b,g,f,p,m,s,a,d,u,r]);const k=b.split("-"),M=n===Le.Line?"borderColor":"backgroundColor",P=l?{...c,[M]:l}:c;return h.jsx("div",{className:ee(["react-flow__resize-control","nodrag",...k,n,o]),ref:x,style:P,children:i})}S.memo(Fi);const Oi=({nodes:e,edges:t,useMockData:n=!1})=>{const o=n&&!e?us:e,c=n&&!t?fs:t;return h.jsxs(mi,{nodes:o,edges:c,fitView:!0,children:[h.jsx(Ii,{showInteractive:!1}),h.jsx(vi,{})]})},Hi="_container_b3vfd_1",Ti="_title_b3vfd_9",Zi="_graphContainer_b3vfd_14",Oe={container:Hi,title:Ti,graphContainer:Zi},Xi=()=>{const[e,t]=S.useState(null),[n,o]=S.useState(null),[c,i]=S.useState(!1),[l,g]=S.useState(!1),f=S.useCallback(async()=>{i(!0),g(!1);try{const m=await hs.getMindMap(),s=gs(m);t(s),o(null)}catch(m){o("Failed to load mind map"),console.error(m)}finally{i(!1)}},[]);S.useEffect(()=>{f()},[f]);const p=S.useCallback(()=>{g(!0),o(null)},[]);return c?h.jsx(ms,{}):h.jsxs("div",{className:Oe.container,children:[h.jsx("h1",{className:Oe.title,children:"Семантический граф терминов:"}),h.jsx("div",{className:Oe.graphContainer,children:n?h.jsx(ps,{error:n,onRepeatRequest:f,onUseMockData:p}):h.jsx(Oi,{nodes:e==null?void 0:e.nodes,edges:e==null?void 0:e.edges,useMockData:l})})]})};export{Xi as default};
