import{a as zo,b as Ft,g as Bo,R as Fo,r as S,M as rt,j as p,c as Oo,P as ne,d as He,e as Ot,n as Ht,X as Ho,f as $e,h as To,i as Tt,k as Zt,l as Zo,m as it,o as ct,p as at,q as Wo,s as Yo,t as Wt,S as Te,u as ae,v as Yt,w as Xo,x as ve,y as Xt,z as qo,A as Go,B as dt,C as qt,D as le,E as lt,F as Ee,G as Ze,H as We,I as Gt,J as Ye,K as Ut,L as Kt,N as ut,O as Qt,Q as Uo,T as Ko,U as Qo,V as Jo,W as Xe,Y as es,Z as Jt,_ as ts,$ as ns,a0 as os,a1 as ss,a2 as en,a3 as rs,a4 as Ue,a5 as is,a6 as qe,a7 as tn,a8 as cs,a9 as as,aa as ds,ab as nn,ac as ls,ad as us,ae as fs,af as gs}from"./index-CMuQW8m4.js";import{S as ps,a as hs}from"./api-DSfTjWk0.js";zo();function ee(e){if(typeof e=="string"||typeof e=="number")return""+e;let t="";if(Array.isArray(e))for(let n=0,o;n<e.length;n++)(o=ee(e[n]))!==""&&(t+=(t&&" ")+o);else for(let n in e)e[n]&&(t+=(t&&" ")+n);return t}var Re={exports:{}},Ve={},ze={exports:{}},Be={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ft;function ms(){if(ft)return Be;ft=1;var e=Ft();function t(s,r){return s===r&&(s!==0||1/s===1/r)||s!==s&&r!==r}var n=typeof Object.is=="function"?Object.is:t,o=e.useState,c=e.useEffect,i=e.useLayoutEffect,l=e.useDebugValue;function f(s,r){var a=r(),d=o({inst:{value:a,getSnapshot:r}}),u=d[0].inst,y=d[1];return i(function(){u.value=a,u.getSnapshot=r,g(u)&&y({inst:u})},[s,a,r]),c(function(){return g(u)&&y({inst:u}),s(function(){g(u)&&y({inst:u})})},[s]),l(a),a}function g(s){var r=s.getSnapshot;s=s.value;try{var a=r();return!n(s,a)}catch{return!0}}function h(s,r){return r()}var m=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?h:f;return Be.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:m,Be}var gt;function xs(){return gt||(gt=1,ze.exports=ms()),ze.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pt;function ws(){if(pt)return Ve;pt=1;var e=Ft(),t=xs();function n(h,m){return h===m&&(h!==0||1/h===1/m)||h!==h&&m!==m}var o=typeof Object.is=="function"?Object.is:n,c=t.useSyncExternalStore,i=e.useRef,l=e.useEffect,f=e.useMemo,g=e.useDebugValue;return Ve.useSyncExternalStoreWithSelector=function(h,m,s,r,a){var d=i(null);if(d.current===null){var u={hasValue:!1,value:null};d.current=u}else u=d.current;d=f(function(){function x(C){if(!E){if(E=!0,w=C,C=r(C),a!==void 0&&u.hasValue){var k=u.value;if(a(k,C))return v=k}return v=C}if(k=v,o(w,C))return k;var I=r(C);return a!==void 0&&a(k,I)?k:(w=C,v=I)}var E=!1,w,v,b=s===void 0?null:s;return[function(){return x(m())},b===null?void 0:function(){return x(b())}]},[m,s,r,a]);var y=c(h,d[0],d[1]);return l(function(){u.hasValue=!0,u.value=y},[y]),g(y),y},Ve}var ht;function ys(){return ht||(ht=1,Re.exports=ws()),Re.exports}var Ss=ys();const vs=Bo(Ss),Es={BASE_URL:"/itmo-practice/",DEV:!1,MODE:"production",PROD:!0,SSR:!1},mt=e=>{let t;const n=new Set,o=(m,s)=>{const r=typeof m=="function"?m(t):m;if(!Object.is(r,t)){const a=t;t=s??(typeof r!="object"||r===null)?r:Object.assign({},t,r),n.forEach(d=>d(t,a))}},c=()=>t,g={setState:o,getState:c,getInitialState:()=>h,subscribe:m=>(n.add(m),()=>n.delete(m)),destroy:()=>{(Es?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},h=t=e(o,c,g);return g},bs=e=>e?mt(e):mt,{useDebugValue:Ns}=Fo,{useSyncExternalStoreWithSelector:Cs}=vs,ks=e=>e;function on(e,t=ks,n){const o=Cs(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return Ns(o),o}const xt=(e,t)=>{const n=bs(e),o=(c,i=t)=>on(n,c,i);return Object.assign(o,n),o},_s=(e,t)=>e?xt(e,t):xt;function K(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[o,c]of e)if(!Object.is(c,t.get(o)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const o of e)if(!t.has(o))return!1;return!0}const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(const o of n)if(!Object.prototype.hasOwnProperty.call(t,o)||!Object.is(e[o],t[o]))return!1;return!0}const Ce=S.createContext(null),Ms=Ce.Provider,sn=ae.error001();function F(e,t){const n=S.useContext(Ce);if(n===null)throw new Error(sn);return on(n,e,t)}function X(){const e=S.useContext(Ce);if(e===null)throw new Error(sn);return S.useMemo(()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe}),[e])}const wt={display:"none"},Is={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},rn="react-flow__node-desc",cn="react-flow__edge-desc",js="react-flow__aria-live",Ps=e=>e.ariaLiveMessage;function Ds({rfId:e}){const t=F(Ps);return p.jsx("div",{id:`${js}-${e}`,"aria-live":"assertive","aria-atomic":"true",style:Is,children:t})}function As({rfId:e,disableKeyboardA11y:t}){return p.jsxs(p.Fragment,{children:[p.jsxs("div",{id:`${rn}-${e}`,style:wt,children:["Press enter or space to select a node.",!t&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "]}),p.jsx("div",{id:`${cn}-${e}`,style:wt,children:"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."}),!t&&p.jsx(Ds,{rfId:e})]})}const Ls=e=>e.userSelectionActive?"none":"all";function Ke({position:e="top-left",children:t,className:n,style:o,...c}){const i=F(Ls),l=`${e}`.split("-");return p.jsx("div",{className:ee(["react-flow__panel",n,...l]),style:{...o,pointerEvents:i},...c,children:t})}function $s({proOptions:e,position:t="bottom-right"}){return e!=null&&e.hideAttribution?null:p.jsx(Ke,{position:t,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://pro.reactflow.dev",children:p.jsx("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution",children:"React Flow"})})}const Rs=e=>{const t=[],n=[];for(const[,o]of e.nodeLookup)o.selected&&t.push(o.internals.userNode);for(const[,o]of e.edgeLookup)o.selected&&n.push(o);return{selectedNodes:t,selectedEdges:n}},ye=e=>e.id;function Vs(e,t){return K(e.selectedNodes.map(ye),t.selectedNodes.map(ye))&&K(e.selectedEdges.map(ye),t.selectedEdges.map(ye))}function zs({onSelectionChange:e}){const t=X(),{selectedNodes:n,selectedEdges:o}=F(Rs,Vs);return S.useEffect(()=>{const c={nodes:n,edges:o};e==null||e(c),t.getState().onSelectionChangeHandlers.forEach(i=>i(c))},[n,o,e]),null}const Bs=e=>!!e.onSelectionChangeHandlers;function Fs({onSelectionChange:e}){const t=F(Bs);return e||t?p.jsx(zs,{onSelectionChange:e}):null}const an=[0,0],Os={x:0,y:0,zoom:1},Hs=["nodes","edges","defaultNodes","defaultEdges","onConnect","onConnectStart","onConnectEnd","onClickConnectStart","onClickConnectEnd","nodesDraggable","nodesConnectable","nodesFocusable","edgesFocusable","edgesReconnectable","elevateNodesOnSelect","elevateEdgesOnSelect","minZoom","maxZoom","nodeExtent","onNodesChange","onEdgesChange","elementsSelectable","connectionMode","snapGrid","snapToGrid","translateExtent","connectOnClick","defaultEdgeOptions","fitView","fitViewOptions","onNodesDelete","onEdgesDelete","onDelete","onNodeDrag","onNodeDragStart","onNodeDragStop","onSelectionDrag","onSelectionDragStart","onSelectionDragStop","onMoveStart","onMove","onMoveEnd","noPanClassName","nodeOrigin","autoPanOnConnect","autoPanOnNodeDrag","onError","connectionRadius","isValidConnection","selectNodesOnDrag","nodeDragThreshold","onBeforeDelete","debug","autoPanSpeed","paneClickDistance"],yt=[...Hs,"rfId"],Ts=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges,setPaneClickDistance:e.setPaneClickDistance}),St={translateExtent:Ee,nodeOrigin:an,minZoom:.5,maxZoom:2,elementsSelectable:!0,noPanClassName:"nopan",rfId:"1",paneClickDistance:0};function Zs(e){const{setNodes:t,setEdges:n,setMinZoom:o,setMaxZoom:c,setTranslateExtent:i,setNodeExtent:l,reset:f,setDefaultNodesAndEdges:g,setPaneClickDistance:h}=F(Ts,K),m=X();S.useEffect(()=>(g(e.defaultNodes,e.defaultEdges),()=>{s.current=St,f()}),[]);const s=S.useRef(St);return S.useEffect(()=>{for(const r of yt){const a=e[r],d=s.current[r];a!==d&&(typeof e[r]>"u"||(r==="nodes"?t(a):r==="edges"?n(a):r==="minZoom"?o(a):r==="maxZoom"?c(a):r==="translateExtent"?i(a):r==="nodeExtent"?l(a):r==="paneClickDistance"?h(a):r==="fitView"?m.setState({fitViewOnInit:a}):r==="fitViewOptions"?m.setState({fitViewOnInitOptions:a}):m.setState({[r]:a})))}s.current=e},yt.map(r=>e[r])),null}function vt(){return typeof window>"u"||!window.matchMedia?null:window.matchMedia("(prefers-color-scheme: dark)")}function Ws(e){var o;const[t,n]=S.useState(e==="system"?null:e);return S.useEffect(()=>{if(e!=="system"){n(e);return}const c=vt(),i=()=>n(c!=null&&c.matches?"dark":"light");return i(),c==null||c.addEventListener("change",i),()=>{c==null||c.removeEventListener("change",i)}},[e]),t!==null?t:(o=vt())!=null&&o.matches?"dark":"light"}const Et=typeof document<"u"?document:null;function xe(e=null,t={target:Et,actInsideInputWithModifier:!0}){const[n,o]=S.useState(!1),c=S.useRef(!1),i=S.useRef(new Set([])),[l,f]=S.useMemo(()=>{if(e!==null){const h=(Array.isArray(e)?e:[e]).filter(s=>typeof s=="string").map(s=>s.replace("+",`
`).replace(`

`,`
+`).split(`
`)),m=h.reduce((s,r)=>s.concat(...r),[]);return[h,m]}return[[],[]]},[e]);return S.useEffect(()=>{const g=(t==null?void 0:t.target)||Et;if(e!==null){const h=r=>{if(c.current=r.ctrlKey||r.metaKey||r.shiftKey,(!c.current||c.current&&!t.actInsideInputWithModifier)&&Ze(r))return!1;const d=Nt(r.code,f);i.current.add(r[d]),bt(l,i.current,!1)&&(r.preventDefault(),o(!0))},m=r=>{if((!c.current||c.current&&!t.actInsideInputWithModifier)&&Ze(r))return!1;const d=Nt(r.code,f);bt(l,i.current,!0)?(o(!1),i.current.clear()):i.current.delete(r[d]),r.key==="Meta"&&i.current.clear(),c.current=!1},s=()=>{i.current.clear(),o(!1)};return g==null||g.addEventListener("keydown",h),g==null||g.addEventListener("keyup",m),window.addEventListener("blur",s),window.addEventListener("contextmenu",s),()=>{g==null||g.removeEventListener("keydown",h),g==null||g.removeEventListener("keyup",m),window.removeEventListener("blur",s),window.removeEventListener("contextmenu",s)}}},[e,o]),n}function bt(e,t,n){return e.filter(o=>n||o.length===t.size).some(o=>o.every(c=>t.has(c)))}function Nt(e,t){return t.includes(e)?"code":"key"}const Ys=()=>{const e=X();return S.useMemo(()=>({zoomIn:t=>{const{panZoom:n}=e.getState();return n?n.scaleBy(1.2,{duration:t==null?void 0:t.duration}):Promise.resolve(!1)},zoomOut:t=>{const{panZoom:n}=e.getState();return n?n.scaleBy(1/1.2,{duration:t==null?void 0:t.duration}):Promise.resolve(!1)},zoomTo:(t,n)=>{const{panZoom:o}=e.getState();return o?o.scaleTo(t,{duration:n==null?void 0:n.duration}):Promise.resolve(!1)},getZoom:()=>e.getState().transform[2],setViewport:async(t,n)=>{const{transform:[o,c,i],panZoom:l}=e.getState();return l?(await l.setViewport({x:t.x??o,y:t.y??c,zoom:t.zoom??i},{duration:n==null?void 0:n.duration}),Promise.resolve(!0)):Promise.resolve(!1)},getViewport:()=>{const[t,n,o]=e.getState().transform;return{x:t,y:n,zoom:o}},fitView:t=>{const{nodeLookup:n,minZoom:o,maxZoom:c,panZoom:i,domNode:l}=e.getState();if(!i||!l)return Promise.resolve(!1);const f=We(n,t),{width:g,height:h}=Gt(l);return Ye({nodes:f,width:g,height:h,minZoom:o,maxZoom:c,panZoom:i},t)},setCenter:async(t,n,o)=>{const{width:c,height:i,maxZoom:l,panZoom:f}=e.getState(),g=typeof(o==null?void 0:o.zoom)<"u"?o.zoom:l,h=c/2-t*g,m=i/2-n*g;return f?(await f.setViewport({x:h,y:m,zoom:g},{duration:o==null?void 0:o.duration}),Promise.resolve(!0)):Promise.resolve(!1)},fitBounds:async(t,n)=>{const{width:o,height:c,minZoom:i,maxZoom:l,panZoom:f}=e.getState(),g=Ut(t,o,c,i,l,(n==null?void 0:n.padding)??.1);return f?(await f.setViewport(g,{duration:n==null?void 0:n.duration}),Promise.resolve(!0)):Promise.resolve(!1)},screenToFlowPosition:(t,n={snapToGrid:!0})=>{const{transform:o,snapGrid:c,domNode:i}=e.getState();if(!i)return t;const{x:l,y:f}=i.getBoundingClientRect(),g={x:t.x-l,y:t.y-f};return Kt(g,o,n.snapToGrid,c)},flowToScreenPosition:t=>{const{transform:n,domNode:o}=e.getState();if(!o)return t;const{x:c,y:i}=o.getBoundingClientRect(),l=ns(t,n);return{x:l.x+c,y:l.y+i}}}),[])};function dn(e,t){const n=[],o=new Map,c=[];for(const i of e)if(i.type==="add"){c.push(i);continue}else if(i.type==="remove"||i.type==="replace")o.set(i.id,[i]);else{const l=o.get(i.id);l?l.push(i):o.set(i.id,[i])}for(const i of t){const l=o.get(i.id);if(!l){n.push(i);continue}if(l[0].type==="remove")continue;if(l[0].type==="replace"){n.push({...l[0].item});continue}const f={...i};for(const g of l)Xs(g,f);n.push(f)}return c.length&&c.forEach(i=>{i.index!==void 0?n.splice(i.index,0,{...i.item}):n.push({...i.item})}),n}function Xs(e,t){switch(e.type){case"select":{t.selected=e.selected;break}case"position":{typeof e.position<"u"&&(t.position=e.position),typeof e.dragging<"u"&&(t.dragging=e.dragging);break}case"dimensions":{typeof e.dimensions<"u"&&(t.measured??(t.measured={}),t.measured.width=e.dimensions.width,t.measured.height=e.dimensions.height,e.setAttributes&&(t.width=e.dimensions.width,t.height=e.dimensions.height)),typeof e.resizing=="boolean"&&(t.resizing=e.resizing);break}}}function qs(e,t){return dn(e,t)}function Gs(e,t){return dn(e,t)}function ce(e,t){return{id:e,type:"select",selected:t}}function ue(e,t=new Set,n=!1){const o=[];for(const[c,i]of e){const l=t.has(c);!(i.selected===void 0&&!l)&&i.selected!==l&&(n&&(i.selected=l),o.push(ce(i.id,l)))}return o}function Ct({items:e=[],lookup:t}){var c;const n=[],o=new Map(e.map(i=>[i.id,i]));for(const[i,l]of e.entries()){const f=t.get(l.id),g=((c=f==null?void 0:f.internals)==null?void 0:c.userNode)??f;g!==void 0&&g!==l&&n.push({id:l.id,item:l,type:"replace"}),g===void 0&&n.push({item:l,type:"add",index:i})}for(const[i]of t)o.get(i)===void 0&&n.push({id:i,type:"remove"});return n}function kt(e){return{id:e.id,type:"remove"}}const _t=e=>os(e),Us=e=>ss(e);function ln(e){return S.forwardRef(e)}const Ks=typeof window<"u"?S.useLayoutEffect:S.useEffect;function Mt(e){const[t,n]=S.useState(BigInt(0)),[o]=S.useState(()=>Qs(()=>n(c=>c+BigInt(1))));return Ks(()=>{const c=o.get();c.length&&(e(c),o.reset())},[t]),o}function Qs(e){let t=[];return{get:()=>t,reset:()=>{t=[]},push:n=>{t.push(n),e()}}}const un=S.createContext(null);function Js({children:e}){const t=X(),n=S.useCallback(f=>{const{nodes:g=[],setNodes:h,hasDefaultNodes:m,onNodesChange:s,nodeLookup:r}=t.getState();let a=g;for(const d of f)a=typeof d=="function"?d(a):d;m?h(a):s&&s(Ct({items:a,lookup:r}))},[]),o=Mt(n),c=S.useCallback(f=>{const{edges:g=[],setEdges:h,hasDefaultEdges:m,onEdgesChange:s,edgeLookup:r}=t.getState();let a=g;for(const d of f)a=typeof d=="function"?d(a):d;m?h(a):s&&s(Ct({items:a,lookup:r}))},[]),i=Mt(c),l=S.useMemo(()=>({nodeQueue:o,edgeQueue:i}),[]);return p.jsx(un.Provider,{value:l,children:e})}function er(){const e=S.useContext(un);if(!e)throw new Error("useBatchContext must be used within a BatchProvider");return e}const tr=e=>!!e.panZoom;function Qe(){const e=Ys(),t=X(),n=er(),o=F(tr),c=S.useMemo(()=>{const i=s=>t.getState().nodeLookup.get(s),l=s=>{n.nodeQueue.push(s)},f=s=>{n.edgeQueue.push(s)},g=s=>{var x,E;const{nodeLookup:r,nodeOrigin:a}=t.getState(),d=_t(s)?s:r.get(s.id),u=d.parentId?Tt(d.position,d.measured,d.parentId,r,a):d.position,y={id:d.id,position:u,width:((x=d.measured)==null?void 0:x.width)??d.width,height:((E=d.measured)==null?void 0:E.height)??d.height,data:d.data};return ct(y)},h=(s,r,a={replace:!1})=>{l(d=>d.map(u=>{if(u.id===s){const y=typeof r=="function"?r(u):r;return a.replace&&_t(y)?y:{...u,...y}}return u}))},m=(s,r,a={replace:!1})=>{f(d=>d.map(u=>{if(u.id===s){const y=typeof r=="function"?r(u):r;return a.replace&&Us(y)?y:{...u,...y}}return u}))};return{getNodes:()=>t.getState().nodes.map(s=>({...s})),getNode:s=>{var r;return(r=i(s))==null?void 0:r.internals.userNode},getInternalNode:i,getEdges:()=>{const{edges:s=[]}=t.getState();return s.map(r=>({...r}))},getEdge:s=>t.getState().edgeLookup.get(s),setNodes:l,setEdges:f,addNodes:s=>{const r=Array.isArray(s)?s:[s];n.nodeQueue.push(a=>[...a,...r])},addEdges:s=>{const r=Array.isArray(s)?s:[s];n.edgeQueue.push(a=>[...a,...r])},toObject:()=>{const{nodes:s=[],edges:r=[],transform:a}=t.getState(),[d,u,y]=a;return{nodes:s.map(x=>({...x})),edges:r.map(x=>({...x})),viewport:{x:d,y:u,zoom:y}}},deleteElements:async({nodes:s=[],edges:r=[]})=>{const{nodes:a,edges:d,onNodesDelete:u,onEdgesDelete:y,triggerNodeChanges:x,triggerEdgeChanges:E,onDelete:w,onBeforeDelete:v}=t.getState(),{nodes:b,edges:C}=await Zo({nodesToRemove:s,edgesToRemove:r,nodes:a,edges:d,onBeforeDelete:v}),k=C.length>0,I=b.length>0;if(k){const j=C.map(kt);y==null||y(C),E(j)}if(I){const j=b.map(kt);u==null||u(b),x(j)}return(I||k)&&(w==null||w({nodes:b,edges:C})),{deletedNodes:b,deletedEdges:C}},getIntersectingNodes:(s,r=!0,a)=>{const d=it(s),u=d?s:g(s),y=a!==void 0;return u?(a||t.getState().nodes).filter(x=>{const E=t.getState().nodeLookup.get(x.id);if(E&&!d&&(x.id===s.id||!E.internals.positionAbsolute))return!1;const w=ct(y?x:E),v=at(w,u);return r&&v>0||v>=u.width*u.height}):[]},isNodeIntersecting:(s,r,a=!0)=>{const u=it(s)?s:g(s);if(!u)return!1;const y=at(u,r);return a&&y>0||y>=u.width*u.height},updateNode:h,updateNodeData:(s,r,a={replace:!1})=>{h(s,d=>{const u=typeof r=="function"?r(d):r;return a.replace?{...d,data:u}:{...d,data:{...d.data,...u}}},a)},updateEdge:m,updateEdgeData:(s,r,a={replace:!1})=>{m(s,d=>{const u=typeof r=="function"?r(d):r;return a.replace?{...d,data:u}:{...d,data:{...d.data,...u}}},a)},getNodesBounds:s=>{const{nodeLookup:r,nodeOrigin:a}=t.getState();return Wo(s,{nodeLookup:r,nodeOrigin:a})},getHandleConnections:({type:s,id:r,nodeId:a})=>{var d;return Array.from(((d=t.getState().connectionLookup.get(`${a}-${s}-${r??null}`))==null?void 0:d.values())??[])}}},[]);return S.useMemo(()=>({...c,...e,viewportInitialized:o}),[o])}const It=e=>e.selected,nr={actInsideInputWithModifier:!1},or=typeof window<"u"?window:void 0;function sr({deleteKeyCode:e,multiSelectionKeyCode:t}){const n=X(),{deleteElements:o}=Qe(),c=xe(e,nr),i=xe(t,{target:or});S.useEffect(()=>{if(c){const{edges:l,nodes:f}=n.getState();o({nodes:f.filter(It),edges:l.filter(It)}),n.setState({nodesSelectionActive:!1})}},[c]),S.useEffect(()=>{n.setState({multiSelectionActive:i})},[i])}function rr(e){const t=X();S.useEffect(()=>{const n=()=>{var c,i;if(!e.current)return!1;const o=Gt(e.current);(o.height===0||o.width===0)&&((i=(c=t.getState()).onError)==null||i.call(c,"004",ae.error004())),t.setState({width:o.width||500,height:o.height||500})};if(e.current){n(),window.addEventListener("resize",n);const o=new ResizeObserver(()=>n());return o.observe(e.current),()=>{window.removeEventListener("resize",n),o&&e.current&&o.unobserve(e.current)}}},[])}const ke={position:"absolute",width:"100%",height:"100%",top:0,left:0},ir=e=>({userSelectionActive:e.userSelectionActive,lib:e.lib});function cr({onPaneContextMenu:e,zoomOnScroll:t=!0,zoomOnPinch:n=!0,panOnScroll:o=!1,panOnScrollSpeed:c=.5,panOnScrollMode:i=Wt.Free,zoomOnDoubleClick:l=!0,panOnDrag:f=!0,defaultViewport:g,translateExtent:h,minZoom:m,maxZoom:s,zoomActivationKeyCode:r,preventScrolling:a=!0,children:d,noWheelClassName:u,noPanClassName:y,onViewportChange:x,isControlledViewport:E,paneClickDistance:w}){const v=X(),b=S.useRef(null),{userSelectionActive:C,lib:k}=F(ir,K),I=xe(r),j=S.useRef();rr(b);const _=S.useCallback(V=>{x==null||x({x:V[0],y:V[1],zoom:V[2]}),E||v.setState({transform:V})},[x,E]);return S.useEffect(()=>{if(b.current){j.current=Yo({domNode:b.current,minZoom:m,maxZoom:s,translateExtent:h,viewport:g,paneClickDistance:w,onDraggingChange:z=>v.setState({paneDragging:z}),onPanZoomStart:(z,L)=>{const{onViewportChangeStart:M,onMoveStart:D}=v.getState();D==null||D(z,L),M==null||M(L)},onPanZoom:(z,L)=>{const{onViewportChange:M,onMove:D}=v.getState();D==null||D(z,L),M==null||M(L)},onPanZoomEnd:(z,L)=>{const{onViewportChangeEnd:M,onMoveEnd:D}=v.getState();D==null||D(z,L),M==null||M(L)}});const{x:V,y:T,zoom:H}=j.current.getViewport();return v.setState({panZoom:j.current,transform:[V,T,H],domNode:b.current.closest(".react-flow")}),()=>{var z;(z=j.current)==null||z.destroy()}}},[]),S.useEffect(()=>{var V;(V=j.current)==null||V.update({onPaneContextMenu:e,zoomOnScroll:t,zoomOnPinch:n,panOnScroll:o,panOnScrollSpeed:c,panOnScrollMode:i,zoomOnDoubleClick:l,panOnDrag:f,zoomActivationKeyPressed:I,preventScrolling:a,noPanClassName:y,userSelectionActive:C,noWheelClassName:u,lib:k,onTransformChange:_})},[e,t,n,o,c,i,l,f,I,a,y,C,u,k,_]),p.jsx("div",{className:"react-flow__renderer",ref:b,style:ke,children:d})}const ar=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function dr(){const{userSelectionActive:e,userSelectionRect:t}=F(ar,K);return e&&t?p.jsx("div",{className:"react-flow__selection react-flow__container",style:{width:t.width,height:t.height,transform:`translate(${t.x}px, ${t.y}px)`}}):null}const Fe=(e,t)=>n=>{n.target===t.current&&(e==null||e(n))},lr=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,dragging:e.paneDragging});function ur({isSelecting:e,selectionKeyPressed:t,selectionMode:n=Te.Full,panOnDrag:o,selectionOnDrag:c,onSelectionStart:i,onSelectionEnd:l,onPaneClick:f,onPaneContextMenu:g,onPaneScroll:h,onPaneMouseEnter:m,onPaneMouseMove:s,onPaneMouseLeave:r,children:a}){const d=S.useRef(null),u=X(),y=S.useRef(0),x=S.useRef(0),E=S.useRef(),w=S.useRef(new Map),{userSelectionActive:v,elementsSelectable:b,dragging:C}=F(lr,K),k=b&&(e||v),I=S.useRef(!1),j=S.useRef(!1),_=()=>{u.setState({userSelectionActive:!1,userSelectionRect:null}),y.current=0,x.current=0},V=N=>{if(I.current){I.current=!1;return}f==null||f(N),u.getState().resetSelectedElements(),u.setState({nodesSelectionActive:!1})},T=N=>{if(Array.isArray(o)&&(o!=null&&o.includes(2))){N.preventDefault();return}g==null||g(N)},H=h?N=>h(N):void 0,z=N=>{var W,Q,G,U;const{resetSelectedElements:A,domNode:$,edgeLookup:R}=u.getState();if(E.current=$==null?void 0:$.getBoundingClientRect(),!b||!e||N.button!==0||N.target!==d.current||!E.current)return;(Q=(W=N.target)==null?void 0:W.setPointerCapture)==null||Q.call(W,N.pointerId),j.current=!0,I.current=!1,w.current=new Map;for(const[P,Y]of R)w.current.set(Y.source,((G=w.current.get(Y.source))==null?void 0:G.add(P))||new Set([P])),w.current.set(Y.target,((U=w.current.get(Y.target))==null?void 0:U.add(P))||new Set([P]));const{x:O,y:Z}=ut(N.nativeEvent,E.current);A(),u.setState({userSelectionRect:{width:0,height:0,startX:O,startY:Z,x:O,y:Z}}),i==null||i(N)},L=N=>{const{userSelectionRect:A,edgeLookup:$,transform:R,nodeLookup:O,triggerNodeChanges:Z,triggerEdgeChanges:W}=u.getState();if(!E.current||!A)return;I.current=!0;const{x:Q,y:G}=ut(N.nativeEvent,E.current),{startX:U,startY:P}=A,Y={startX:U,startY:P,x:Q<U?Q:U,y:G<P?G:P,width:Math.abs(Q-U),height:Math.abs(G-P)},te=Qt(O,Y,R,n===Te.Partial,!0),J=new Set,B=new Set;for(const q of te){B.add(q.id);const oe=w.current.get(q.id);if(oe)for(const se of oe)J.add(se)}if(y.current!==B.size){y.current=B.size;const q=ue(O,B,!0);Z(q)}if(x.current!==J.size){x.current=J.size;const q=ue($,J);W(q)}u.setState({userSelectionRect:Y,userSelectionActive:!0,nodesSelectionActive:!1})},M=N=>{var $,R;if(N.button!==0||!j.current)return;(R=($=N.target)==null?void 0:$.releasePointerCapture)==null||R.call($,N.pointerId);const{userSelectionRect:A}=u.getState();!v&&A&&N.target===d.current&&(V==null||V(N)),y.current>0&&u.setState({nodesSelectionActive:!0}),_(),l==null||l(N),(t||c)&&(I.current=!1),j.current=!1},D=o===!0||Array.isArray(o)&&o.includes(0);return p.jsxs("div",{className:ee(["react-flow__pane",{draggable:D,dragging:C,selection:e}]),onClick:k?void 0:Fe(V,d),onContextMenu:Fe(T,d),onWheel:Fe(H,d),onPointerEnter:k?void 0:m,onPointerDown:k?z:s,onPointerMove:k?L:s,onPointerUp:k?M:void 0,onPointerLeave:r,ref:d,style:ke,children:[a,p.jsx(dr,{})]})}function Ge({id:e,store:t,unselect:n=!1,nodeRef:o}){const{addSelectedNodes:c,unselectNodesAndEdges:i,multiSelectionActive:l,nodeLookup:f,onError:g}=t.getState(),h=f.get(e);if(!h){g==null||g("012",ae.error012(e));return}t.setState({nodesSelectionActive:!1}),h.selected?(n||h.selected&&l)&&(i({nodes:[h],edges:[]}),requestAnimationFrame(()=>{var m;return(m=o==null?void 0:o.current)==null?void 0:m.blur()})):c([e])}function fn({nodeRef:e,disabled:t=!1,noDragClassName:n,handleSelector:o,nodeId:c,isSelectable:i,nodeClickDistance:l}){const f=X(),[g,h]=S.useState(!1),m=S.useRef();return S.useEffect(()=>{m.current=Uo({getStoreItems:()=>f.getState(),onNodeMouseDown:s=>{Ge({id:s,store:f,nodeRef:e})},onDragStart:()=>{h(!0)},onDragStop:()=>{h(!1)}})},[]),S.useEffect(()=>{var s,r;if(t)(s=m.current)==null||s.destroy();else if(e.current)return(r=m.current)==null||r.update({noDragClassName:n,handleSelector:o,domNode:e.current,isSelectable:i,nodeId:c,nodeClickDistance:l}),()=>{var a;(a=m.current)==null||a.destroy()}},[n,o,t,i,e,c]),g}const fr=e=>t=>t.selected&&(t.draggable||e&&typeof t.draggable>"u");function gn(){const e=X();return S.useCallback(n=>{const{nodeExtent:o,snapToGrid:c,snapGrid:i,nodesDraggable:l,onError:f,updateNodePositions:g,nodeLookup:h,nodeOrigin:m}=e.getState(),s=new Map,r=fr(l),a=c?i[0]:5,d=c?i[1]:5,u=n.direction.x*a*n.factor,y=n.direction.y*d*n.factor;for(const[,x]of h){if(!r(x))continue;let E={x:x.internals.positionAbsolute.x+u,y:x.internals.positionAbsolute.y+y};c&&(E=Ko(E,i));const{position:w,positionAbsolute:v}=Qo({nodeId:x.id,nextPosition:E,nodeLookup:h,nodeExtent:o,nodeOrigin:m,onError:f});x.position=w,x.internals.positionAbsolute=v,s.set(x.id,x)}g(s)},[])}const Je=S.createContext(null),gr=Je.Provider;Je.Consumer;const pn=()=>S.useContext(Je),pr=e=>({connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName,rfId:e.rfId}),hr=(e,t,n)=>o=>{const{connectionClickStartHandle:c,connectionMode:i,connection:l}=o,{fromHandle:f,toHandle:g,isValid:h}=l,m=(g==null?void 0:g.nodeId)===e&&(g==null?void 0:g.id)===t&&(g==null?void 0:g.type)===n;return{connectingFrom:(f==null?void 0:f.nodeId)===e&&(f==null?void 0:f.id)===t&&(f==null?void 0:f.type)===n,connectingTo:m,clickConnecting:(c==null?void 0:c.nodeId)===e&&(c==null?void 0:c.id)===t&&(c==null?void 0:c.type)===n,isPossibleEndHandle:i===en.Strict?(f==null?void 0:f.type)!==n:e!==(f==null?void 0:f.nodeId)||t!==(f==null?void 0:f.id),connectionInProcess:!!f,valid:m&&h}};function mr({type:e="source",position:t=ne.Top,isValidConnection:n,isConnectable:o=!0,isConnectableStart:c=!0,isConnectableEnd:i=!0,id:l,onConnect:f,children:g,className:h,onMouseDown:m,onTouchStart:s,...r},a){var z,L;const d=l||null,u=e==="target",y=X(),x=pn(),{connectOnClick:E,noPanClassName:w,rfId:v}=F(pr,K),{connectingFrom:b,connectingTo:C,clickConnecting:k,isPossibleEndHandle:I,connectionInProcess:j,valid:_}=F(hr(x,d,e),K);x||(L=(z=y.getState()).onError)==null||L.call(z,"010",ae.error010());const V=M=>{const{defaultEdgeOptions:D,onConnect:N,hasDefaultEdges:A}=y.getState(),$={...D,...M};if(A){const{edges:R,setEdges:O}=y.getState();O(rs($,R))}N==null||N($),f==null||f($)},T=M=>{if(!x)return;const D=Jo(M.nativeEvent);if(c&&(D&&M.button===0||!D)){const N=y.getState();Xe.onPointerDown(M.nativeEvent,{autoPanOnConnect:N.autoPanOnConnect,connectionMode:N.connectionMode,connectionRadius:N.connectionRadius,domNode:N.domNode,nodeLookup:N.nodeLookup,lib:N.lib,isTarget:u,handleId:d,nodeId:x,flowId:N.rfId,panBy:N.panBy,cancelConnection:N.cancelConnection,onConnectStart:N.onConnectStart,onConnectEnd:N.onConnectEnd,updateConnection:N.updateConnection,onConnect:V,isValidConnection:n||N.isValidConnection,getTransform:()=>y.getState().transform,getFromHandle:()=>y.getState().connection.fromHandle,autoPanSpeed:N.autoPanSpeed})}D?m==null||m(M):s==null||s(M)},H=M=>{const{onClickConnectStart:D,onClickConnectEnd:N,connectionClickStartHandle:A,connectionMode:$,isValidConnection:R,lib:O,rfId:Z,nodeLookup:W,connection:Q}=y.getState();if(!x||!A&&!c)return;if(!A){D==null||D(M.nativeEvent,{nodeId:x,handleId:d,handleType:e}),y.setState({connectionClickStartHandle:{nodeId:x,type:e,id:d}});return}const G=es(M.target),U=n||R,{connection:P,isValid:Y}=Xe.isValid(M.nativeEvent,{handle:{nodeId:x,id:d,type:e},connectionMode:$,fromNodeId:A.nodeId,fromHandleId:A.id||null,fromType:A.type,isValidConnection:U,flowId:Z,doc:G,lib:O,nodeLookup:W});Y&&P&&V(P);const te=structuredClone(Q);delete te.inProgress,te.toPosition=te.toHandle?te.toHandle.position:null,N==null||N(M,te),y.setState({connectionClickStartHandle:null})};return p.jsx("div",{"data-handleid":d,"data-nodeid":x,"data-handlepos":t,"data-id":`${v}-${x}-${d}-${e}`,className:ee(["react-flow__handle",`react-flow__handle-${t}`,"nodrag",w,h,{source:!u,target:u,connectable:o,connectablestart:c,connectableend:i,clickconnecting:k,connectingfrom:b,connectingto:C,valid:_,connectionindicator:o&&(!j||I)&&(j?i:c)}]),onMouseDown:T,onTouchStart:T,onClick:E?H:void 0,ref:a,...r,children:g})}const be=S.memo(ln(mr));function xr({data:e,isConnectable:t,sourcePosition:n=ne.Bottom}){return p.jsxs(p.Fragment,{children:[e==null?void 0:e.label,p.jsx(be,{type:"source",position:n,isConnectable:t})]})}function wr({data:e,isConnectable:t,targetPosition:n=ne.Top,sourcePosition:o=ne.Bottom}){return p.jsxs(p.Fragment,{children:[p.jsx(be,{type:"target",position:n,isConnectable:t}),e==null?void 0:e.label,p.jsx(be,{type:"source",position:o,isConnectable:t})]})}function yr(){return null}function Sr({data:e,isConnectable:t,targetPosition:n=ne.Top}){return p.jsxs(p.Fragment,{children:[p.jsx(be,{type:"target",position:n,isConnectable:t}),e==null?void 0:e.label]})}const Ne={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}},jt={input:xr,default:wr,output:Sr,group:yr};function vr(e){var t,n,o,c;return e.internals.handleBounds===void 0?{width:e.width??e.initialWidth??((t=e.style)==null?void 0:t.width),height:e.height??e.initialHeight??((n=e.style)==null?void 0:n.height)}:{width:e.width??((o=e.style)==null?void 0:o.width),height:e.height??((c=e.style)==null?void 0:c.height)}}const Er=e=>{const{width:t,height:n,x:o,y:c}=Ue(e.nodeLookup,{filter:i=>!!i.selected});return{width:ve(t)?t:null,height:ve(n)?n:null,userSelectionActive:e.userSelectionActive,transformString:`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]}) translate(${o}px,${c}px)`}};function br({onSelectionContextMenu:e,noPanClassName:t,disableKeyboardA11y:n}){const o=X(),{width:c,height:i,transformString:l,userSelectionActive:f}=F(Er,K),g=gn(),h=S.useRef(null);if(S.useEffect(()=>{var r;n||(r=h.current)==null||r.focus({preventScroll:!0})},[n]),fn({nodeRef:h}),f||!c||!i)return null;const m=e?r=>{const a=o.getState().nodes.filter(d=>d.selected);e(r,a)}:void 0,s=r=>{Object.prototype.hasOwnProperty.call(Ne,r.key)&&g({direction:Ne[r.key],factor:r.shiftKey?4:1})};return p.jsx("div",{className:ee(["react-flow__nodesselection","react-flow__container",t]),style:{transform:l},children:p.jsx("div",{ref:h,className:"react-flow__nodesselection-rect",onContextMenu:m,tabIndex:n?void 0:-1,onKeyDown:n?void 0:s,style:{width:c,height:i}})})}const Pt=typeof window<"u"?window:void 0,Nr=e=>({nodesSelectionActive:e.nodesSelectionActive,userSelectionActive:e.userSelectionActive});function hn({children:e,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:o,onPaneMouseLeave:c,onPaneContextMenu:i,onPaneScroll:l,paneClickDistance:f,deleteKeyCode:g,selectionKeyCode:h,selectionOnDrag:m,selectionMode:s,onSelectionStart:r,onSelectionEnd:a,multiSelectionKeyCode:d,panActivationKeyCode:u,zoomActivationKeyCode:y,elementsSelectable:x,zoomOnScroll:E,zoomOnPinch:w,panOnScroll:v,panOnScrollSpeed:b,panOnScrollMode:C,zoomOnDoubleClick:k,panOnDrag:I,defaultViewport:j,translateExtent:_,minZoom:V,maxZoom:T,preventScrolling:H,onSelectionContextMenu:z,noWheelClassName:L,noPanClassName:M,disableKeyboardA11y:D,onViewportChange:N,isControlledViewport:A}){const{nodesSelectionActive:$,userSelectionActive:R}=F(Nr),O=xe(h,{target:Pt}),Z=xe(u,{target:Pt}),W=Z||I,Q=Z||v,G=m&&W!==!0,U=O||R||G;return sr({deleteKeyCode:g,multiSelectionKeyCode:d}),p.jsx(cr,{onPaneContextMenu:i,elementsSelectable:x,zoomOnScroll:E,zoomOnPinch:w,panOnScroll:Q,panOnScrollSpeed:b,panOnScrollMode:C,zoomOnDoubleClick:k,panOnDrag:!O&&W,defaultViewport:j,translateExtent:_,minZoom:V,maxZoom:T,zoomActivationKeyCode:y,preventScrolling:H,noWheelClassName:L,noPanClassName:M,onViewportChange:N,isControlledViewport:A,paneClickDistance:f,children:p.jsxs(ur,{onSelectionStart:r,onSelectionEnd:a,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:o,onPaneMouseLeave:c,onPaneContextMenu:i,onPaneScroll:l,panOnDrag:W,isSelecting:!!U,selectionMode:s,selectionKeyPressed:O,selectionOnDrag:G,children:[e,$&&p.jsx(br,{onSelectionContextMenu:z,noPanClassName:M,disableKeyboardA11y:D})]})})}hn.displayName="FlowRenderer";const Cr=S.memo(hn),kr=e=>t=>e?Qt(t.nodeLookup,{x:0,y:0,width:t.width,height:t.height},t.transform,!0).map(n=>n.id):Array.from(t.nodeLookup.keys());function _r(e){return F(S.useCallback(kr(e),[e]),K)}const Mr=e=>e.updateNodeInternals;function Ir(){const e=F(Mr),[t]=S.useState(()=>typeof ResizeObserver>"u"?null:new ResizeObserver(n=>{const o=new Map;n.forEach(c=>{const i=c.target.getAttribute("data-id");o.set(i,{id:i,nodeElement:c.target,force:!0})}),e(o)}));return S.useEffect(()=>()=>{t==null||t.disconnect()},[t]),t}function jr({node:e,nodeType:t,hasDimensions:n,resizeObserver:o}){const c=X(),i=S.useRef(null),l=S.useRef(null),f=S.useRef(e.sourcePosition),g=S.useRef(e.targetPosition),h=S.useRef(t),m=n&&!!e.internals.handleBounds;return S.useEffect(()=>{i.current&&!e.hidden&&(!m||l.current!==i.current)&&(l.current&&(o==null||o.unobserve(l.current)),o==null||o.observe(i.current),l.current=i.current)},[m,e.hidden]),S.useEffect(()=>()=>{l.current&&(o==null||o.unobserve(l.current),l.current=null)},[]),S.useEffect(()=>{if(i.current){const s=h.current!==t,r=f.current!==e.sourcePosition,a=g.current!==e.targetPosition;(s||r||a)&&(h.current=t,f.current=e.sourcePosition,g.current=e.targetPosition,c.getState().updateNodeInternals(new Map([[e.id,{id:e.id,nodeElement:i.current,force:!0}]])))}},[e.id,t,e.sourcePosition,e.targetPosition]),i}function Pr({id:e,onClick:t,onMouseEnter:n,onMouseMove:o,onMouseLeave:c,onContextMenu:i,onDoubleClick:l,nodesDraggable:f,elementsSelectable:g,nodesConnectable:h,nodesFocusable:m,resizeObserver:s,noDragClassName:r,noPanClassName:a,disableKeyboardA11y:d,rfId:u,nodeTypes:y,nodeExtent:x,nodeClickDistance:E,onError:w}){const{node:v,internals:b,isParent:C}=F(P=>{const Y=P.nodeLookup.get(e),te=P.parentLookup.has(e);return{node:Y,internals:Y.internals,isParent:te}},K);let k=v.type||"default",I=(y==null?void 0:y[k])||jt[k];I===void 0&&(w==null||w("003",ae.error003(k)),k="default",I=jt.default);const j=!!(v.draggable||f&&typeof v.draggable>"u"),_=!!(v.selectable||g&&typeof v.selectable>"u"),V=!!(v.connectable||h&&typeof v.connectable>"u"),T=!!(v.focusable||m&&typeof v.focusable>"u"),H=X(),z=Ht(v),L=jr({node:v,nodeType:k,hasDimensions:z,resizeObserver:s}),M=fn({nodeRef:L,disabled:v.hidden||!j,noDragClassName:r,handleSelector:v.dragHandle,nodeId:e,isSelectable:_,nodeClickDistance:E}),D=gn();if(v.hidden)return null;const N=Yt(v),A=vr(v),$=_||j||t||n||o||c,R=n?P=>n(P,{...b.userNode}):void 0,O=o?P=>o(P,{...b.userNode}):void 0,Z=c?P=>c(P,{...b.userNode}):void 0,W=i?P=>i(P,{...b.userNode}):void 0,Q=l?P=>l(P,{...b.userNode}):void 0,G=P=>{const{selectNodesOnDrag:Y,nodeDragThreshold:te}=H.getState();_&&(!Y||!j||te>0)&&Ge({id:e,store:H,nodeRef:L}),t&&t(P,{...b.userNode})},U=P=>{if(!(Ze(P.nativeEvent)||d))if(Jt.includes(P.key)&&_){const Y=P.key==="Escape";Ge({id:e,store:H,unselect:Y,nodeRef:L})}else j&&v.selected&&Object.prototype.hasOwnProperty.call(Ne,P.key)&&(H.setState({ariaLiveMessage:`Moved selected node ${P.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~b.positionAbsolute.x}, y: ${~~b.positionAbsolute.y}`}),D({direction:Ne[P.key],factor:P.shiftKey?4:1}))};return p.jsx("div",{className:ee(["react-flow__node",`react-flow__node-${k}`,{[a]:j},v.className,{selected:v.selected,selectable:_,parent:C,draggable:j,dragging:M}]),ref:L,style:{zIndex:b.z,transform:`translate(${b.positionAbsolute.x}px,${b.positionAbsolute.y}px)`,pointerEvents:$?"all":"none",visibility:z?"visible":"hidden",...v.style,...A},"data-id":e,"data-testid":`rf__node-${e}`,onMouseEnter:R,onMouseMove:O,onMouseLeave:Z,onContextMenu:W,onClick:G,onDoubleClick:Q,onKeyDown:T?U:void 0,tabIndex:T?0:void 0,role:T?"button":void 0,"aria-describedby":d?void 0:`${rn}-${u}`,"aria-label":v.ariaLabel,children:p.jsx(gr,{value:e,children:p.jsx(I,{id:e,data:v.data,type:k,positionAbsoluteX:b.positionAbsolute.x,positionAbsoluteY:b.positionAbsolute.y,selected:v.selected,selectable:_,draggable:j,deletable:v.deletable??!0,isConnectable:V,sourcePosition:v.sourcePosition,targetPosition:v.targetPosition,dragging:M,dragHandle:v.dragHandle,zIndex:b.z,parentId:v.parentId,...N})})})}const Dr=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,onError:e.onError});function mn(e){const{nodesDraggable:t,nodesConnectable:n,nodesFocusable:o,elementsSelectable:c,onError:i}=F(Dr,K),l=_r(e.onlyRenderVisibleElements),f=Ir();return p.jsx("div",{className:"react-flow__nodes",style:ke,children:l.map(g=>p.jsx(Pr,{id:g,nodeTypes:e.nodeTypes,nodeExtent:e.nodeExtent,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,resizeObserver:f,nodesDraggable:t,nodesConnectable:n,nodesFocusable:o,elementsSelectable:c,nodeClickDistance:e.nodeClickDistance,onError:i},g))})}mn.displayName="NodeRenderer";const Ar=S.memo(mn);function Lr(e){return F(S.useCallback(n=>{if(!e)return n.edges.map(c=>c.id);const o=[];if(n.width&&n.height)for(const c of n.edges){const i=n.nodeLookup.get(c.source),l=n.nodeLookup.get(c.target);i&&l&&Xo({sourceNode:i,targetNode:l,width:n.width,height:n.height,transform:n.transform})&&o.push(c.id)}return o},[e]),K)}const $r=({color:e="none",strokeWidth:t=1})=>p.jsx("polyline",{style:{stroke:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),Rr=({color:e="none",strokeWidth:t=1})=>p.jsx("polyline",{style:{stroke:e,fill:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"}),Dt={[rt.Arrow]:$r,[rt.ArrowClosed]:Rr};function Vr(e){const t=X();return S.useMemo(()=>{var c,i;return Object.prototype.hasOwnProperty.call(Dt,e)?Dt[e]:((i=(c=t.getState()).onError)==null||i.call(c,"009",ae.error009(e)),null)},[e])}const zr=({id:e,type:t,color:n,width:o=12.5,height:c=12.5,markerUnits:i="strokeWidth",strokeWidth:l,orient:f="auto-start-reverse"})=>{const g=Vr(t);return g?p.jsx("marker",{className:"react-flow__arrowhead",id:e,markerWidth:`${o}`,markerHeight:`${c}`,viewBox:"-10 -10 20 20",markerUnits:i,orient:f,refX:"0",refY:"0",children:p.jsx(g,{color:n,strokeWidth:l})}):null},xn=({defaultColor:e,rfId:t})=>{const n=F(i=>i.edges),o=F(i=>i.defaultEdgeOptions),c=S.useMemo(()=>Oo(n,{id:t,defaultColor:e,defaultMarkerStart:o==null?void 0:o.markerStart,defaultMarkerEnd:o==null?void 0:o.markerEnd}),[n,o,t,e]);return c.length?p.jsx("svg",{className:"react-flow__marker",children:p.jsx("defs",{children:c.map(i=>p.jsx(zr,{id:i.id,type:i.type,color:i.color,width:i.width,height:i.height,markerUnits:i.markerUnits,strokeWidth:i.strokeWidth,orient:i.orient},i.id))})}):null};xn.displayName="MarkerDefinitions";var Br=S.memo(xn);function wn({x:e,y:t,label:n,labelStyle:o={},labelShowBg:c=!0,labelBgStyle:i={},labelBgPadding:l=[2,4],labelBgBorderRadius:f=2,children:g,className:h,...m}){const[s,r]=S.useState({x:1,y:0,width:0,height:0}),a=ee(["react-flow__edge-textwrapper",h]),d=S.useRef(null);return S.useEffect(()=>{if(d.current){const u=d.current.getBBox();r({x:u.x,y:u.y,width:u.width,height:u.height})}},[n]),typeof n>"u"||!n?null:p.jsxs("g",{transform:`translate(${e-s.width/2} ${t-s.height/2})`,className:a,visibility:s.width?"visible":"hidden",...m,children:[c&&p.jsx("rect",{width:s.width+2*l[0],x:-l[0],y:-l[1],height:s.height+2*l[1],className:"react-flow__edge-textbg",style:i,rx:f,ry:f}),p.jsx("text",{className:"react-flow__edge-text",y:s.height/2,dy:"0.3em",ref:d,style:o,children:n}),g]})}wn.displayName="EdgeText";const Fr=S.memo(wn);function _e({id:e,path:t,labelX:n,labelY:o,label:c,labelStyle:i,labelShowBg:l,labelBgStyle:f,labelBgPadding:g,labelBgBorderRadius:h,style:m,markerEnd:s,markerStart:r,className:a,interactionWidth:d=20}){return p.jsxs(p.Fragment,{children:[p.jsx("path",{id:e,style:m,d:t,fill:"none",className:ee(["react-flow__edge-path",a]),markerEnd:s,markerStart:r}),d&&p.jsx("path",{d:t,fill:"none",strokeOpacity:0,strokeWidth:d,className:"react-flow__edge-interaction"}),c&&ve(n)&&ve(o)?p.jsx(Fr,{x:n,y:o,label:c,labelStyle:i,labelShowBg:l,labelBgStyle:f,labelBgPadding:g,labelBgBorderRadius:h}):null]})}function At({pos:e,x1:t,y1:n,x2:o,y2:c}){return e===ne.Left||e===ne.Right?[.5*(t+o),n]:[t,.5*(n+c)]}function yn({sourceX:e,sourceY:t,sourcePosition:n=ne.Bottom,targetX:o,targetY:c,targetPosition:i=ne.Top}){const[l,f]=At({pos:n,x1:e,y1:t,x2:o,y2:c}),[g,h]=At({pos:i,x1:o,y1:c,x2:e,y2:t}),[m,s,r,a]=ts({sourceX:e,sourceY:t,targetX:o,targetY:c,sourceControlX:l,sourceControlY:f,targetControlX:g,targetControlY:h});return[`M${e},${t} C${l},${f} ${g},${h} ${o},${c}`,m,s,r,a]}function Sn(e){return S.memo(({id:t,sourceX:n,sourceY:o,targetX:c,targetY:i,sourcePosition:l=ne.Bottom,targetPosition:f=ne.Top,label:g,labelStyle:h,labelShowBg:m,labelBgStyle:s,labelBgPadding:r,labelBgBorderRadius:a,style:d,markerEnd:u,markerStart:y,interactionWidth:x})=>{const[E,w,v]=yn({sourceX:n,sourceY:o,sourcePosition:l,targetX:c,targetY:i,targetPosition:f}),b=e.isInternal?void 0:t;return p.jsx(_e,{id:b,path:E,labelX:w,labelY:v,label:g,labelStyle:h,labelShowBg:m,labelBgStyle:s,labelBgPadding:r,labelBgBorderRadius:a,style:d,markerEnd:u,markerStart:y,interactionWidth:x})})}const Or=Sn({isInternal:!1}),vn=Sn({isInternal:!0});Or.displayName="SimpleBezierEdge";vn.displayName="SimpleBezierEdgeInternal";function En(e){return S.memo(({id:t,sourceX:n,sourceY:o,targetX:c,targetY:i,label:l,labelStyle:f,labelShowBg:g,labelBgStyle:h,labelBgPadding:m,labelBgBorderRadius:s,style:r,sourcePosition:a=ne.Bottom,targetPosition:d=ne.Top,markerEnd:u,markerStart:y,pathOptions:x,interactionWidth:E})=>{const[w,v,b]=He({sourceX:n,sourceY:o,sourcePosition:a,targetX:c,targetY:i,targetPosition:d,borderRadius:x==null?void 0:x.borderRadius,offset:x==null?void 0:x.offset}),C=e.isInternal?void 0:t;return p.jsx(_e,{id:C,path:w,labelX:v,labelY:b,label:l,labelStyle:f,labelShowBg:g,labelBgStyle:h,labelBgPadding:m,labelBgBorderRadius:s,style:r,markerEnd:u,markerStart:y,interactionWidth:E})})}const bn=En({isInternal:!1}),Nn=En({isInternal:!0});bn.displayName="SmoothStepEdge";Nn.displayName="SmoothStepEdgeInternal";function Cn(e){return S.memo(({id:t,...n})=>{var c;const o=e.isInternal?void 0:t;return p.jsx(bn,{...n,id:o,pathOptions:S.useMemo(()=>{var i;return{borderRadius:0,offset:(i=n.pathOptions)==null?void 0:i.offset}},[(c=n.pathOptions)==null?void 0:c.offset])})})}const Hr=Cn({isInternal:!1}),kn=Cn({isInternal:!0});Hr.displayName="StepEdge";kn.displayName="StepEdgeInternal";function _n(e){return S.memo(({id:t,sourceX:n,sourceY:o,targetX:c,targetY:i,label:l,labelStyle:f,labelShowBg:g,labelBgStyle:h,labelBgPadding:m,labelBgBorderRadius:s,style:r,markerEnd:a,markerStart:d,interactionWidth:u})=>{const[y,x,E]=Xt({sourceX:n,sourceY:o,targetX:c,targetY:i}),w=e.isInternal?void 0:t;return p.jsx(_e,{id:w,path:y,labelX:x,labelY:E,label:l,labelStyle:f,labelShowBg:g,labelBgStyle:h,labelBgPadding:m,labelBgBorderRadius:s,style:r,markerEnd:a,markerStart:d,interactionWidth:u})})}const Tr=_n({isInternal:!1}),Mn=_n({isInternal:!0});Tr.displayName="StraightEdge";Mn.displayName="StraightEdgeInternal";function In(e){return S.memo(({id:t,sourceX:n,sourceY:o,targetX:c,targetY:i,sourcePosition:l=ne.Bottom,targetPosition:f=ne.Top,label:g,labelStyle:h,labelShowBg:m,labelBgStyle:s,labelBgPadding:r,labelBgBorderRadius:a,style:d,markerEnd:u,markerStart:y,pathOptions:x,interactionWidth:E})=>{const[w,v,b]=Ot({sourceX:n,sourceY:o,sourcePosition:l,targetX:c,targetY:i,targetPosition:f,curvature:x==null?void 0:x.curvature}),C=e.isInternal?void 0:t;return p.jsx(_e,{id:C,path:w,labelX:v,labelY:b,label:g,labelStyle:h,labelShowBg:m,labelBgStyle:s,labelBgPadding:r,labelBgBorderRadius:a,style:d,markerEnd:u,markerStart:y,interactionWidth:E})})}const Zr=In({isInternal:!1}),jn=In({isInternal:!0});Zr.displayName="BezierEdge";jn.displayName="BezierEdgeInternal";const Lt={default:jn,straight:Mn,step:kn,smoothstep:Nn,simplebezier:vn},$t={sourceX:null,sourceY:null,targetX:null,targetY:null,sourcePosition:null,targetPosition:null},Wr=(e,t,n)=>n===ne.Left?e-t:n===ne.Right?e+t:e,Yr=(e,t,n)=>n===ne.Top?e-t:n===ne.Bottom?e+t:e,Rt="react-flow__edgeupdater";function Vt({position:e,centerX:t,centerY:n,radius:o=10,onMouseDown:c,onMouseEnter:i,onMouseOut:l,type:f}){return p.jsx("circle",{onMouseDown:c,onMouseEnter:i,onMouseOut:l,className:ee([Rt,`${Rt}-${f}`]),cx:Wr(t,o,e),cy:Yr(n,o,e),r:o,stroke:"transparent",fill:"transparent"})}function Xr({isReconnectable:e,reconnectRadius:t,edge:n,sourceX:o,sourceY:c,targetX:i,targetY:l,sourcePosition:f,targetPosition:g,onReconnect:h,onReconnectStart:m,onReconnectEnd:s,setReconnecting:r,setUpdateHover:a}){const d=X(),u=(v,b)=>{if(v.button!==0)return;const{autoPanOnConnect:C,domNode:k,isValidConnection:I,connectionMode:j,connectionRadius:_,lib:V,onConnectStart:T,onConnectEnd:H,cancelConnection:z,nodeLookup:L,rfId:M,panBy:D,updateConnection:N}=d.getState(),A=b.type==="target";r(!0),m==null||m(v,n,b.type);const $=(O,Z)=>{r(!1),s==null||s(O,n,b.type,Z)},R=O=>h==null?void 0:h(n,O);Xe.onPointerDown(v.nativeEvent,{autoPanOnConnect:C,connectionMode:j,connectionRadius:_,domNode:k,handleId:b.id,nodeId:b.nodeId,nodeLookup:L,isTarget:A,edgeUpdaterType:b.type,lib:V,flowId:M,cancelConnection:z,panBy:D,isValidConnection:I,onConnect:R,onConnectStart:T,onConnectEnd:H,onReconnectEnd:$,updateConnection:N,getTransform:()=>d.getState().transform,getFromHandle:()=>d.getState().connection.fromHandle})},y=v=>u(v,{nodeId:n.target,id:n.targetHandle??null,type:"target"}),x=v=>u(v,{nodeId:n.source,id:n.sourceHandle??null,type:"source"}),E=()=>a(!0),w=()=>a(!1);return p.jsxs(p.Fragment,{children:[(e===!0||e==="source")&&p.jsx(Vt,{position:f,centerX:o,centerY:c,radius:t,onMouseDown:y,onMouseEnter:E,onMouseOut:w,type:"source"}),(e===!0||e==="target")&&p.jsx(Vt,{position:g,centerX:i,centerY:l,radius:t,onMouseDown:x,onMouseEnter:E,onMouseOut:w,type:"target"})]})}function qr({id:e,edgesFocusable:t,edgesReconnectable:n,elementsSelectable:o,onClick:c,onDoubleClick:i,onContextMenu:l,onMouseEnter:f,onMouseMove:g,onMouseLeave:h,reconnectRadius:m,onReconnect:s,onReconnectStart:r,onReconnectEnd:a,rfId:d,edgeTypes:u,noPanClassName:y,onError:x,disableKeyboardA11y:E}){let w=F(B=>B.edgeLookup.get(e));const v=F(B=>B.defaultEdgeOptions);w=v?{...v,...w}:w;let b=w.type||"default",C=(u==null?void 0:u[b])||Lt[b];C===void 0&&(x==null||x("011",ae.error011(b)),b="default",C=Lt.default);const k=!!(w.focusable||t&&typeof w.focusable>"u"),I=typeof s<"u"&&(w.reconnectable||n&&typeof w.reconnectable>"u"),j=!!(w.selectable||o&&typeof w.selectable>"u"),_=S.useRef(null),[V,T]=S.useState(!1),[H,z]=S.useState(!1),L=X(),{zIndex:M,sourceX:D,sourceY:N,targetX:A,targetY:$,sourcePosition:R,targetPosition:O}=F(S.useCallback(B=>{const q=B.nodeLookup.get(w.source),oe=B.nodeLookup.get(w.target);if(!q||!oe)return{zIndex:w.zIndex,...$t};const se=qo({id:e,sourceNode:q,targetNode:oe,sourceHandle:w.sourceHandle||null,targetHandle:w.targetHandle||null,connectionMode:B.connectionMode,onError:x});return{zIndex:Go({selected:w.selected,zIndex:w.zIndex,sourceNode:q,targetNode:oe,elevateOnSelect:B.elevateEdgesOnSelect}),...se||$t}},[w.source,w.target,w.sourceHandle,w.targetHandle,w.selected,w.zIndex]),K),Z=S.useMemo(()=>w.markerStart?`url('#${dt(w.markerStart,d)}')`:void 0,[w.markerStart,d]),W=S.useMemo(()=>w.markerEnd?`url('#${dt(w.markerEnd,d)}')`:void 0,[w.markerEnd,d]);if(w.hidden||D===null||N===null||A===null||$===null)return null;const Q=B=>{var re;const{addSelectedEdges:q,unselectNodesAndEdges:oe,multiSelectionActive:se}=L.getState();j&&(L.setState({nodesSelectionActive:!1}),w.selected&&se?(oe({nodes:[],edges:[w]}),(re=_.current)==null||re.blur()):q([e])),c&&c(B,w)},G=i?B=>{i(B,{...w})}:void 0,U=l?B=>{l(B,{...w})}:void 0,P=f?B=>{f(B,{...w})}:void 0,Y=g?B=>{g(B,{...w})}:void 0,te=h?B=>{h(B,{...w})}:void 0,J=B=>{var q;if(!E&&Jt.includes(B.key)&&j){const{unselectNodesAndEdges:oe,addSelectedEdges:se}=L.getState();B.key==="Escape"?((q=_.current)==null||q.blur(),oe({edges:[w]})):se([e])}};return p.jsx("svg",{style:{zIndex:M},children:p.jsxs("g",{className:ee(["react-flow__edge",`react-flow__edge-${b}`,w.className,y,{selected:w.selected,animated:w.animated,inactive:!j&&!c,updating:V,selectable:j}]),onClick:Q,onDoubleClick:G,onContextMenu:U,onMouseEnter:P,onMouseMove:Y,onMouseLeave:te,onKeyDown:k?J:void 0,tabIndex:k?0:void 0,role:k?"button":"img","data-id":e,"data-testid":`rf__edge-${e}`,"aria-label":w.ariaLabel===null?void 0:w.ariaLabel||`Edge from ${w.source} to ${w.target}`,"aria-describedby":k?`${cn}-${d}`:void 0,ref:_,children:[!H&&p.jsx(C,{id:e,source:w.source,target:w.target,type:w.type,selected:w.selected,animated:w.animated,selectable:j,deletable:w.deletable??!0,label:w.label,labelStyle:w.labelStyle,labelShowBg:w.labelShowBg,labelBgStyle:w.labelBgStyle,labelBgPadding:w.labelBgPadding,labelBgBorderRadius:w.labelBgBorderRadius,sourceX:D,sourceY:N,targetX:A,targetY:$,sourcePosition:R,targetPosition:O,data:w.data,style:w.style,sourceHandleId:w.sourceHandle,targetHandleId:w.targetHandle,markerStart:Z,markerEnd:W,pathOptions:"pathOptions"in w?w.pathOptions:void 0,interactionWidth:w.interactionWidth}),I&&p.jsx(Xr,{edge:w,isReconnectable:I,reconnectRadius:m,onReconnect:s,onReconnectStart:r,onReconnectEnd:a,sourceX:D,sourceY:N,targetX:A,targetY:$,sourcePosition:R,targetPosition:O,setUpdateHover:T,setReconnecting:z})]})})}const Gr=e=>({width:e.width,height:e.height,edgesFocusable:e.edgesFocusable,edgesReconnectable:e.edgesReconnectable,elementsSelectable:e.elementsSelectable,connectionMode:e.connectionMode,onError:e.onError});function Pn({defaultMarkerColor:e,onlyRenderVisibleElements:t,rfId:n,edgeTypes:o,noPanClassName:c,onReconnect:i,onEdgeContextMenu:l,onEdgeMouseEnter:f,onEdgeMouseMove:g,onEdgeMouseLeave:h,onEdgeClick:m,reconnectRadius:s,onEdgeDoubleClick:r,onReconnectStart:a,onReconnectEnd:d,disableKeyboardA11y:u}){const{edgesFocusable:y,edgesReconnectable:x,elementsSelectable:E,onError:w}=F(Gr,K),v=Lr(t);return p.jsxs("div",{className:"react-flow__edges",children:[p.jsx(Br,{defaultColor:e,rfId:n}),v.map(b=>p.jsx(qr,{id:b,edgesFocusable:y,edgesReconnectable:x,elementsSelectable:E,noPanClassName:c,onReconnect:i,onContextMenu:l,onMouseEnter:f,onMouseMove:g,onMouseLeave:h,onClick:m,reconnectRadius:s,onDoubleClick:r,onReconnectStart:a,onReconnectEnd:d,rfId:n,onError:w,edgeTypes:o,disableKeyboardA11y:u},b))]})}Pn.displayName="EdgeRenderer";const Ur=S.memo(Pn),Kr=e=>`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`;function Qr({children:e}){const t=F(Kr);return p.jsx("div",{className:"react-flow__viewport xyflow__viewport react-flow__container",style:{transform:t},children:e})}function Jr(e){const t=Qe(),n=S.useRef(!1);S.useEffect(()=>{!n.current&&t.viewportInitialized&&e&&(setTimeout(()=>e(t),1),n.current=!0)},[e,t.viewportInitialized])}const ei=e=>{var t;return(t=e.panZoom)==null?void 0:t.syncViewport};function ti(e){const t=F(ei),n=X();return S.useEffect(()=>{e&&(t==null||t(e),n.setState({transform:[e.x,e.y,e.zoom]}))},[e,t]),null}function ni(e){return e.connection.inProgress?{...e.connection,to:Kt(e.connection.to,e.transform)}:{...e.connection}}function oi(e){return ni}function si(e){const t=oi();return F(t,K)}const ri=e=>({nodesConnectable:e.nodesConnectable,isValid:e.connection.isValid,inProgress:e.connection.inProgress,width:e.width,height:e.height});function ii({containerStyle:e,style:t,type:n,component:o}){const{nodesConnectable:c,width:i,height:l,isValid:f,inProgress:g}=F(ri,K);return!(i&&c&&g)?null:p.jsx("svg",{style:e,width:i,height:l,className:"react-flow__connectionline react-flow__container",children:p.jsx("g",{className:ee(["react-flow__connection",qt(f)]),children:p.jsx(Dn,{style:t,type:n,CustomComponent:o,isValid:f})})})}const Dn=({style:e,type:t=le.Bezier,CustomComponent:n,isValid:o})=>{const{inProgress:c,from:i,fromNode:l,fromHandle:f,fromPosition:g,to:h,toNode:m,toHandle:s,toPosition:r}=si();if(!c)return;if(n)return p.jsx(n,{connectionLineType:t,connectionLineStyle:e,fromNode:l,fromHandle:f,fromX:i.x,fromY:i.y,toX:h.x,toY:h.y,fromPosition:g,toPosition:r,connectionStatus:qt(o),toNode:m,toHandle:s});let a="";const d={sourceX:i.x,sourceY:i.y,sourcePosition:g,targetX:h.x,targetY:h.y,targetPosition:r};switch(t){case le.Bezier:[a]=Ot(d);break;case le.SimpleBezier:[a]=yn(d);break;case le.Step:[a]=He({...d,borderRadius:0});break;case le.SmoothStep:[a]=He(d);break;default:[a]=Xt(d)}return p.jsx("path",{d:a,fill:"none",className:"react-flow__connection-path",style:e})};Dn.displayName="ConnectionLine";const ci={};function zt(e=ci){S.useRef(e),X(),S.useEffect(()=>{},[e])}function ai(){X(),S.useRef(!1),S.useEffect(()=>{},[])}function An({nodeTypes:e,edgeTypes:t,onInit:n,onNodeClick:o,onEdgeClick:c,onNodeDoubleClick:i,onEdgeDoubleClick:l,onNodeMouseEnter:f,onNodeMouseMove:g,onNodeMouseLeave:h,onNodeContextMenu:m,onSelectionContextMenu:s,onSelectionStart:r,onSelectionEnd:a,connectionLineType:d,connectionLineStyle:u,connectionLineComponent:y,connectionLineContainerStyle:x,selectionKeyCode:E,selectionOnDrag:w,selectionMode:v,multiSelectionKeyCode:b,panActivationKeyCode:C,zoomActivationKeyCode:k,deleteKeyCode:I,onlyRenderVisibleElements:j,elementsSelectable:_,defaultViewport:V,translateExtent:T,minZoom:H,maxZoom:z,preventScrolling:L,defaultMarkerColor:M,zoomOnScroll:D,zoomOnPinch:N,panOnScroll:A,panOnScrollSpeed:$,panOnScrollMode:R,zoomOnDoubleClick:O,panOnDrag:Z,onPaneClick:W,onPaneMouseEnter:Q,onPaneMouseMove:G,onPaneMouseLeave:U,onPaneScroll:P,onPaneContextMenu:Y,paneClickDistance:te,nodeClickDistance:J,onEdgeContextMenu:B,onEdgeMouseEnter:q,onEdgeMouseMove:oe,onEdgeMouseLeave:se,reconnectRadius:re,onReconnect:Me,onReconnectStart:Ie,onReconnectEnd:je,noDragClassName:fe,noWheelClassName:Pe,noPanClassName:ge,disableKeyboardA11y:pe,nodeExtent:De,rfId:he,viewport:me,onViewportChange:we}){return zt(e),zt(t),ai(),Jr(n),ti(me),p.jsx(Cr,{onPaneClick:W,onPaneMouseEnter:Q,onPaneMouseMove:G,onPaneMouseLeave:U,onPaneContextMenu:Y,onPaneScroll:P,paneClickDistance:te,deleteKeyCode:I,selectionKeyCode:E,selectionOnDrag:w,selectionMode:v,onSelectionStart:r,onSelectionEnd:a,multiSelectionKeyCode:b,panActivationKeyCode:C,zoomActivationKeyCode:k,elementsSelectable:_,zoomOnScroll:D,zoomOnPinch:N,zoomOnDoubleClick:O,panOnScroll:A,panOnScrollSpeed:$,panOnScrollMode:R,panOnDrag:Z,defaultViewport:V,translateExtent:T,minZoom:H,maxZoom:z,onSelectionContextMenu:s,preventScrolling:L,noDragClassName:fe,noWheelClassName:Pe,noPanClassName:ge,disableKeyboardA11y:pe,onViewportChange:we,isControlledViewport:!!me,children:p.jsxs(Qr,{children:[p.jsx(Ur,{edgeTypes:t,onEdgeClick:c,onEdgeDoubleClick:l,onReconnect:Me,onReconnectStart:Ie,onReconnectEnd:je,onlyRenderVisibleElements:j,onEdgeContextMenu:B,onEdgeMouseEnter:q,onEdgeMouseMove:oe,onEdgeMouseLeave:se,reconnectRadius:re,defaultMarkerColor:M,noPanClassName:ge,disableKeyboardA11y:pe,rfId:he}),p.jsx(ii,{style:u,type:d,component:y,containerStyle:x}),p.jsx("div",{className:"react-flow__edgelabel-renderer"}),p.jsx(Ar,{nodeTypes:e,onNodeClick:o,onNodeDoubleClick:i,onNodeMouseEnter:f,onNodeMouseMove:g,onNodeMouseLeave:h,onNodeContextMenu:m,nodeClickDistance:J,onlyRenderVisibleElements:j,noPanClassName:ge,noDragClassName:fe,disableKeyboardA11y:pe,nodeExtent:De,rfId:he}),p.jsx("div",{className:"react-flow__viewport-portal"})]})})}An.displayName="GraphView";const di=S.memo(An),Bt=({nodes:e,edges:t,defaultNodes:n,defaultEdges:o,width:c,height:i,fitView:l,nodeOrigin:f,nodeExtent:g}={})=>{const h=new Map,m=new Map,s=new Map,r=new Map,a=o??t??[],d=n??e??[],u=f??[0,0],y=g??Ee;tn(s,r,a),qe(d,h,m,{nodeOrigin:u,nodeExtent:y,elevateNodesOnSelect:!1});let x=[0,0,1];if(l&&c&&i){const E=Ue(h,{filter:C=>!!((C.width||C.initialWidth)&&(C.height||C.initialHeight))}),{x:w,y:v,zoom:b}=Ut(E,c,i,.5,2,.1);x=[w,v,b]}return{rfId:"1",width:0,height:0,transform:x,nodes:d,nodeLookup:h,parentLookup:m,edges:a,edgeLookup:r,connectionLookup:s,onNodesChange:null,onEdgesChange:null,hasDefaultNodes:n!==void 0,hasDefaultEdges:o!==void 0,panZoom:null,minZoom:.5,maxZoom:2,translateExtent:Ee,nodeExtent:y,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionMode:en.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:u,nodeDragThreshold:1,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesReconnectable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,elevateEdgesOnSelect:!1,fitViewOnInit:!1,fitViewDone:!1,fitViewOnInitOptions:void 0,selectNodesOnDrag:!0,multiSelectionActive:!1,connection:{...nn},connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,autoPanSpeed:15,connectionRadius:20,onError:ls,isValidConnection:void 0,onSelectionChangeHandlers:[],lib:"react",debug:!1}},li=({nodes:e,edges:t,defaultNodes:n,defaultEdges:o,width:c,height:i,fitView:l,nodeOrigin:f,nodeExtent:g})=>_s((h,m)=>({...Bt({nodes:e,edges:t,width:c,height:i,fitView:l,nodeOrigin:f,nodeExtent:g,defaultNodes:n,defaultEdges:o}),setNodes:s=>{const{nodeLookup:r,parentLookup:a,nodeOrigin:d,elevateNodesOnSelect:u}=m();qe(s,r,a,{nodeOrigin:d,nodeExtent:g,elevateNodesOnSelect:u,checkEquality:!0}),h({nodes:s})},setEdges:s=>{const{connectionLookup:r,edgeLookup:a}=m();tn(r,a,s),h({edges:s})},setDefaultNodesAndEdges:(s,r)=>{if(s){const{setNodes:a}=m();a(s),h({hasDefaultNodes:!0})}if(r){const{setEdges:a}=m();a(r),h({hasDefaultEdges:!0})}},updateNodeInternals:(s,r={triggerFitView:!0})=>{const{triggerNodeChanges:a,nodeLookup:d,parentLookup:u,fitViewOnInit:y,fitViewDone:x,fitViewOnInitOptions:E,domNode:w,nodeOrigin:v,nodeExtent:b,debug:C,fitViewSync:k}=m(),{changes:I,updatedInternals:j}=cs(s,d,u,w,v,b);if(j){if(as(d,u,{nodeOrigin:v,nodeExtent:b}),r.triggerFitView){let _=x;!x&&y&&(_=k({...E,nodes:E==null?void 0:E.nodes})),h({fitViewDone:_})}else h({});(I==null?void 0:I.length)>0&&(C&&console.log("React Flow: trigger node changes",I),a==null||a(I))}},updateNodePositions:(s,r=!1)=>{const a=[],d=[];for(const[u,y]of s){const x={id:u,type:"position",position:y.position,dragging:r};y!=null&&y.expandParent&&(y!=null&&y.parentId)&&x.position&&(a.push({id:u,parentId:y.parentId,rect:{...y.internals.positionAbsolute,width:y.measured.width,height:y.measured.height}}),x.position.x=Math.max(0,x.position.x),x.position.y=Math.max(0,x.position.y)),d.push(x)}if(a.length>0){const{nodeLookup:u,parentLookup:y,nodeOrigin:x}=m(),E=Zt(a,u,y,x);d.push(...E)}m().triggerNodeChanges(d)},triggerNodeChanges:s=>{const{onNodesChange:r,setNodes:a,nodes:d,hasDefaultNodes:u,debug:y}=m();if(s!=null&&s.length){if(u){const x=qs(s,d);a(x)}y&&console.log("React Flow: trigger node changes",s),r==null||r(s)}},triggerEdgeChanges:s=>{const{onEdgesChange:r,setEdges:a,edges:d,hasDefaultEdges:u,debug:y}=m();if(s!=null&&s.length){if(u){const x=Gs(s,d);a(x)}y&&console.log("React Flow: trigger edge changes",s),r==null||r(s)}},addSelectedNodes:s=>{const{multiSelectionActive:r,edgeLookup:a,nodeLookup:d,triggerNodeChanges:u,triggerEdgeChanges:y}=m();if(r){const x=s.map(E=>ce(E,!0));u(x);return}u(ue(d,new Set([...s]),!0)),y(ue(a))},addSelectedEdges:s=>{const{multiSelectionActive:r,edgeLookup:a,nodeLookup:d,triggerNodeChanges:u,triggerEdgeChanges:y}=m();if(r){const x=s.map(E=>ce(E,!0));y(x);return}y(ue(a,new Set([...s]))),u(ue(d,new Set,!0))},unselectNodesAndEdges:({nodes:s,edges:r}={})=>{const{edges:a,nodes:d,nodeLookup:u,triggerNodeChanges:y,triggerEdgeChanges:x}=m(),E=s||d,w=r||a,v=E.map(C=>{const k=u.get(C.id);return k&&(k.selected=!1),ce(C.id,!1)}),b=w.map(C=>ce(C.id,!1));y(v),x(b)},setMinZoom:s=>{const{panZoom:r,maxZoom:a}=m();r==null||r.setScaleExtent([s,a]),h({minZoom:s})},setMaxZoom:s=>{const{panZoom:r,minZoom:a}=m();r==null||r.setScaleExtent([a,s]),h({maxZoom:s})},setTranslateExtent:s=>{var r;(r=m().panZoom)==null||r.setTranslateExtent(s),h({translateExtent:s})},setPaneClickDistance:s=>{var r;(r=m().panZoom)==null||r.setClickDistance(s)},resetSelectedElements:()=>{const{edges:s,nodes:r,triggerNodeChanges:a,triggerEdgeChanges:d}=m(),u=r.reduce((x,E)=>E.selected?[...x,ce(E.id,!1)]:x,[]),y=s.reduce((x,E)=>E.selected?[...x,ce(E.id,!1)]:x,[]);a(u),d(y)},setNodeExtent:s=>{const{nodes:r,nodeLookup:a,parentLookup:d,nodeOrigin:u,elevateNodesOnSelect:y,nodeExtent:x}=m();s[0][0]===x[0][0]&&s[0][1]===x[0][1]&&s[1][0]===x[1][0]&&s[1][1]===x[1][1]||(qe(r,a,d,{nodeOrigin:u,nodeExtent:s,elevateNodesOnSelect:y,checkEquality:!1}),h({nodeExtent:s}))},panBy:s=>{const{transform:r,width:a,height:d,panZoom:u,translateExtent:y}=m();return ds({delta:s,panZoom:u,transform:r,translateExtent:y,width:a,height:d})},fitView:s=>{const{panZoom:r,width:a,height:d,minZoom:u,maxZoom:y,nodeLookup:x}=m();if(!r)return Promise.resolve(!1);const E=We(x,s);return Ye({nodes:E,width:a,height:d,panZoom:r,minZoom:u,maxZoom:y},s)},fitViewSync:s=>{const{panZoom:r,width:a,height:d,minZoom:u,maxZoom:y,nodeLookup:x}=m();if(!r)return!1;const E=We(x,s);return Ye({nodes:E,width:a,height:d,panZoom:r,minZoom:u,maxZoom:y},s),E.size>0},cancelConnection:()=>{h({connection:{...nn}})},updateConnection:s=>{h({connection:s})},reset:()=>h({...Bt()})}),Object.is);function ui({initialNodes:e,initialEdges:t,defaultNodes:n,defaultEdges:o,initialWidth:c,initialHeight:i,fitView:l,nodeOrigin:f,nodeExtent:g,children:h}){const[m]=S.useState(()=>li({nodes:e,edges:t,defaultNodes:n,defaultEdges:o,width:c,height:i,fitView:l,nodeOrigin:f,nodeExtent:g}));return p.jsx(Ms,{value:m,children:p.jsx(Js,{children:h})})}function fi({children:e,nodes:t,edges:n,defaultNodes:o,defaultEdges:c,width:i,height:l,fitView:f,nodeOrigin:g,nodeExtent:h}){return S.useContext(Ce)?p.jsx(p.Fragment,{children:e}):p.jsx(ui,{initialNodes:t,initialEdges:n,defaultNodes:o,defaultEdges:c,initialWidth:i,initialHeight:l,fitView:f,nodeOrigin:g,nodeExtent:h,children:e})}const gi={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0};function pi({nodes:e,edges:t,defaultNodes:n,defaultEdges:o,className:c,nodeTypes:i,edgeTypes:l,onNodeClick:f,onEdgeClick:g,onInit:h,onMove:m,onMoveStart:s,onMoveEnd:r,onConnect:a,onConnectStart:d,onConnectEnd:u,onClickConnectStart:y,onClickConnectEnd:x,onNodeMouseEnter:E,onNodeMouseMove:w,onNodeMouseLeave:v,onNodeContextMenu:b,onNodeDoubleClick:C,onNodeDragStart:k,onNodeDrag:I,onNodeDragStop:j,onNodesDelete:_,onEdgesDelete:V,onDelete:T,onSelectionChange:H,onSelectionDragStart:z,onSelectionDrag:L,onSelectionDragStop:M,onSelectionContextMenu:D,onSelectionStart:N,onSelectionEnd:A,onBeforeDelete:$,connectionMode:R,connectionLineType:O=le.Bezier,connectionLineStyle:Z,connectionLineComponent:W,connectionLineContainerStyle:Q,deleteKeyCode:G="Backspace",selectionKeyCode:U="Shift",selectionOnDrag:P=!1,selectionMode:Y=Te.Full,panActivationKeyCode:te="Space",multiSelectionKeyCode:J=lt()?"Meta":"Control",zoomActivationKeyCode:B=lt()?"Meta":"Control",snapToGrid:q,snapGrid:oe,onlyRenderVisibleElements:se=!1,selectNodesOnDrag:re,nodesDraggable:Me,nodesConnectable:Ie,nodesFocusable:je,nodeOrigin:fe=an,edgesFocusable:Pe,edgesReconnectable:ge,elementsSelectable:pe=!0,defaultViewport:De=Os,minZoom:he=.5,maxZoom:me=2,translateExtent:we=Ee,preventScrolling:Vn=!0,nodeExtent:Ae,defaultMarkerColor:zn="#b1b1b7",zoomOnScroll:Bn=!0,zoomOnPinch:Fn=!0,panOnScroll:On=!1,panOnScrollSpeed:Hn=.5,panOnScrollMode:Tn=Wt.Free,zoomOnDoubleClick:Zn=!0,panOnDrag:Wn=!0,onPaneClick:Yn,onPaneMouseEnter:Xn,onPaneMouseMove:qn,onPaneMouseLeave:Gn,onPaneScroll:Un,onPaneContextMenu:Kn,paneClickDistance:et=0,nodeClickDistance:Qn=0,children:Jn,onReconnect:eo,onReconnectStart:to,onReconnectEnd:no,onEdgeContextMenu:oo,onEdgeDoubleClick:so,onEdgeMouseEnter:ro,onEdgeMouseMove:io,onEdgeMouseLeave:co,reconnectRadius:ao=10,onNodesChange:lo,onEdgesChange:uo,noDragClassName:fo="nodrag",noWheelClassName:go="nowheel",noPanClassName:tt="nopan",fitView:nt,fitViewOptions:po,connectOnClick:ho,attributionPosition:mo,proOptions:xo,defaultEdgeOptions:wo,elevateNodesOnSelect:yo,elevateEdgesOnSelect:So,disableKeyboardA11y:ot=!1,autoPanOnConnect:vo,autoPanOnNodeDrag:Eo,autoPanSpeed:bo,connectionRadius:No,isValidConnection:Co,onError:ko,style:_o,id:st,nodeDragThreshold:Mo,viewport:Io,onViewportChange:jo,width:Po,height:Do,colorMode:Ao="light",debug:Lo,...$o},Ro){const Le=st||"1",Vo=Ws(Ao);return p.jsx("div",{...$o,style:{..._o,...gi},ref:Ro,className:ee(["react-flow",c,Vo]),"data-testid":"rf__wrapper",id:st,children:p.jsxs(fi,{nodes:e,edges:t,width:Po,height:Do,fitView:nt,nodeOrigin:fe,nodeExtent:Ae,children:[p.jsx(di,{onInit:h,onNodeClick:f,onEdgeClick:g,onNodeMouseEnter:E,onNodeMouseMove:w,onNodeMouseLeave:v,onNodeContextMenu:b,onNodeDoubleClick:C,nodeTypes:i,edgeTypes:l,connectionLineType:O,connectionLineStyle:Z,connectionLineComponent:W,connectionLineContainerStyle:Q,selectionKeyCode:U,selectionOnDrag:P,selectionMode:Y,deleteKeyCode:G,multiSelectionKeyCode:J,panActivationKeyCode:te,zoomActivationKeyCode:B,onlyRenderVisibleElements:se,defaultViewport:De,translateExtent:we,minZoom:he,maxZoom:me,preventScrolling:Vn,zoomOnScroll:Bn,zoomOnPinch:Fn,zoomOnDoubleClick:Zn,panOnScroll:On,panOnScrollSpeed:Hn,panOnScrollMode:Tn,panOnDrag:Wn,onPaneClick:Yn,onPaneMouseEnter:Xn,onPaneMouseMove:qn,onPaneMouseLeave:Gn,onPaneScroll:Un,onPaneContextMenu:Kn,paneClickDistance:et,nodeClickDistance:Qn,onSelectionContextMenu:D,onSelectionStart:N,onSelectionEnd:A,onReconnect:eo,onReconnectStart:to,onReconnectEnd:no,onEdgeContextMenu:oo,onEdgeDoubleClick:so,onEdgeMouseEnter:ro,onEdgeMouseMove:io,onEdgeMouseLeave:co,reconnectRadius:ao,defaultMarkerColor:zn,noDragClassName:fo,noWheelClassName:go,noPanClassName:tt,rfId:Le,disableKeyboardA11y:ot,nodeExtent:Ae,viewport:Io,onViewportChange:jo}),p.jsx(Zs,{nodes:e,edges:t,defaultNodes:n,defaultEdges:o,onConnect:a,onConnectStart:d,onConnectEnd:u,onClickConnectStart:y,onClickConnectEnd:x,nodesDraggable:Me,nodesConnectable:Ie,nodesFocusable:je,edgesFocusable:Pe,edgesReconnectable:ge,elementsSelectable:pe,elevateNodesOnSelect:yo,elevateEdgesOnSelect:So,minZoom:he,maxZoom:me,nodeExtent:Ae,onNodesChange:lo,onEdgesChange:uo,snapToGrid:q,snapGrid:oe,connectionMode:R,translateExtent:we,connectOnClick:ho,defaultEdgeOptions:wo,fitView:nt,fitViewOptions:po,onNodesDelete:_,onEdgesDelete:V,onDelete:T,onNodeDragStart:k,onNodeDrag:I,onNodeDragStop:j,onSelectionDrag:L,onSelectionDragStart:z,onSelectionDragStop:M,onMove:m,onMoveStart:s,onMoveEnd:r,noPanClassName:tt,nodeOrigin:fe,rfId:Le,autoPanOnConnect:vo,autoPanOnNodeDrag:Eo,autoPanSpeed:bo,onError:ko,connectionRadius:No,isValidConnection:Co,selectNodesOnDrag:re,nodeDragThreshold:Mo,onBeforeDelete:$,paneClickDistance:et,debug:Lo}),p.jsx(Fs,{onSelectionChange:H}),Jn,p.jsx($s,{proOptions:xo,position:mo}),p.jsx(As,{rfId:Le,disableKeyboardA11y:ot})]})})}var hi=ln(pi);function mi({dimensions:e,lineWidth:t,variant:n,className:o}){return p.jsx("path",{strokeWidth:t,d:`M${e[0]/2} 0 V${e[1]} M0 ${e[1]/2} H${e[0]}`,className:ee(["react-flow__background-pattern",n,o])})}function xi({radius:e,className:t}){return p.jsx("circle",{cx:e,cy:e,r:e,className:ee(["react-flow__background-pattern","dots",t])})}var ie;(function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"})(ie||(ie={}));const wi={[ie.Dots]:1,[ie.Lines]:1,[ie.Cross]:6},yi=e=>({transform:e.transform,patternId:`pattern-${e.rfId}`});function Ln({id:e,variant:t=ie.Dots,gap:n=20,size:o,lineWidth:c=1,offset:i=0,color:l,bgColor:f,style:g,className:h,patternClassName:m}){const s=S.useRef(null),{transform:r,patternId:a}=F(yi,K),d=o||wi[t],u=t===ie.Dots,y=t===ie.Cross,x=Array.isArray(n)?n:[n,n],E=[x[0]*r[2]||1,x[1]*r[2]||1],w=d*r[2],v=Array.isArray(i)?i:[i,i],b=y?[w,w]:E,C=[v[0]*r[2]||1+b[0]/2,v[1]*r[2]||1+b[1]/2],k=`${a}${e||""}`;return p.jsxs("svg",{className:ee(["react-flow__background",h]),style:{...g,...ke,"--xy-background-color-props":f,"--xy-background-pattern-color-props":l},ref:s,"data-testid":"rf__background",children:[p.jsx("pattern",{id:k,x:r[0]%E[0],y:r[1]%E[1],width:E[0],height:E[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${C[0]},-${C[1]})`,children:u?p.jsx(xi,{radius:w/2,className:m}):p.jsx(mi,{dimensions:b,lineWidth:c,variant:t,className:m})}),p.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${k})`})]})}Ln.displayName="Background";const Si=S.memo(Ln);function vi(){return p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",children:p.jsx("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"})})}function Ei(){return p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5",children:p.jsx("path",{d:"M0 0h32v4.2H0z"})})}function bi(){return p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30",children:p.jsx("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"})})}function Ni(){return p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:p.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"})})}function Ci(){return p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:p.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"})})}function Se({children:e,className:t,...n}){return p.jsx("button",{type:"button",className:ee(["react-flow__controls-button",t]),...n,children:e})}const ki=e=>({isInteractive:e.nodesDraggable||e.nodesConnectable||e.elementsSelectable,minZoomReached:e.transform[2]<=e.minZoom,maxZoomReached:e.transform[2]>=e.maxZoom});function $n({style:e,showZoom:t=!0,showFitView:n=!0,showInteractive:o=!0,fitViewOptions:c,onZoomIn:i,onZoomOut:l,onFitView:f,onInteractiveChange:g,className:h,children:m,position:s="bottom-left",orientation:r="vertical","aria-label":a="React Flow controls"}){const d=X(),{isInteractive:u,minZoomReached:y,maxZoomReached:x}=F(ki,K),{zoomIn:E,zoomOut:w,fitView:v}=Qe(),b=()=>{E(),i==null||i()},C=()=>{w(),l==null||l()},k=()=>{v(c),f==null||f()},I=()=>{d.setState({nodesDraggable:!u,nodesConnectable:!u,elementsSelectable:!u}),g==null||g(!u)},j=r==="horizontal"?"horizontal":"vertical";return p.jsxs(Ke,{className:ee(["react-flow__controls",j,h]),position:s,style:e,"data-testid":"rf__controls","aria-label":a,children:[t&&p.jsxs(p.Fragment,{children:[p.jsx(Se,{onClick:b,className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",disabled:x,children:p.jsx(vi,{})}),p.jsx(Se,{onClick:C,className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",disabled:y,children:p.jsx(Ei,{})})]}),n&&p.jsx(Se,{className:"react-flow__controls-fitview",onClick:k,title:"fit view","aria-label":"fit view",children:p.jsx(bi,{})}),o&&p.jsx(Se,{className:"react-flow__controls-interactive",onClick:I,title:"toggle interactivity","aria-label":"toggle interactivity",children:u?p.jsx(Ci,{}):p.jsx(Ni,{})}),m]})}$n.displayName="Controls";const _i=S.memo($n);function Mi({id:e,x:t,y:n,width:o,height:c,style:i,color:l,strokeColor:f,strokeWidth:g,className:h,borderRadius:m,shapeRendering:s,selected:r,onClick:a}){const{background:d,backgroundColor:u}=i||{},y=l||d||u;return p.jsx("rect",{className:ee(["react-flow__minimap-node",{selected:r},h]),x:t,y:n,rx:m,ry:m,width:o,height:c,style:{fill:y,stroke:f,strokeWidth:g},shapeRendering:s,onClick:a?x=>a(x,e):void 0})}const Ii=S.memo(Mi),ji=e=>e.nodes.map(t=>t.id),Oe=e=>e instanceof Function?e:()=>e;function Pi({nodeStrokeColor:e,nodeColor:t,nodeClassName:n="",nodeBorderRadius:o=5,nodeStrokeWidth:c,nodeComponent:i=Ii,onClick:l}){const f=F(ji,K),g=Oe(t),h=Oe(e),m=Oe(n),s=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision";return p.jsx(p.Fragment,{children:f.map(r=>p.jsx(Ai,{id:r,nodeColorFunc:g,nodeStrokeColorFunc:h,nodeClassNameFunc:m,nodeBorderRadius:o,nodeStrokeWidth:c,NodeComponent:i,onClick:l,shapeRendering:s},r))})}function Di({id:e,nodeColorFunc:t,nodeStrokeColorFunc:n,nodeClassNameFunc:o,nodeBorderRadius:c,nodeStrokeWidth:i,shapeRendering:l,NodeComponent:f,onClick:g}){const{node:h,x:m,y:s,width:r,height:a}=F(d=>{const u=d.nodeLookup.get(e),{x:y,y:x}=u.internals.positionAbsolute,{width:E,height:w}=Yt(u);return{node:u,x:y,y:x,width:E,height:w}},K);return!h||h.hidden||!Ht(h)?null:p.jsx(f,{x:m,y:s,width:r,height:a,style:h.style,selected:!!h.selected,className:o(h),color:t(h),borderRadius:c,strokeColor:n(h),strokeWidth:i,shapeRendering:l,onClick:g,id:h.id})}const Ai=S.memo(Di);var Li=S.memo(Pi);const $i=200,Ri=150,Vi=e=>{const t={x:-e.transform[0]/e.transform[2],y:-e.transform[1]/e.transform[2],width:e.width/e.transform[2],height:e.height/e.transform[2]};return{viewBB:t,boundingRect:e.nodeLookup.size>0?is(Ue(e.nodeLookup),t):t,rfId:e.rfId,panZoom:e.panZoom,translateExtent:e.translateExtent,flowWidth:e.width,flowHeight:e.height}},zi="react-flow__minimap-desc";function Rn({style:e,className:t,nodeStrokeColor:n,nodeColor:o,nodeClassName:c="",nodeBorderRadius:i=5,nodeStrokeWidth:l,nodeComponent:f,bgColor:g,maskColor:h,maskStrokeColor:m,maskStrokeWidth:s,position:r="bottom-right",onClick:a,onNodeClick:d,pannable:u=!1,zoomable:y=!1,ariaLabel:x="React Flow mini map",inversePan:E,zoomStep:w=10,offsetScale:v=5}){const b=X(),C=S.useRef(null),{boundingRect:k,viewBB:I,rfId:j,panZoom:_,translateExtent:V,flowWidth:T,flowHeight:H}=F(Vi,K),z=(e==null?void 0:e.width)??$i,L=(e==null?void 0:e.height)??Ri,M=k.width/z,D=k.height/L,N=Math.max(M,D),A=N*z,$=N*L,R=v*N,O=k.x-(A-k.width)/2-R,Z=k.y-($-k.height)/2-R,W=A+R*2,Q=$+R*2,G=`${zi}-${j}`,U=S.useRef(0),P=S.useRef();U.current=N,S.useEffect(()=>{if(C.current&&_)return P.current=Ho({domNode:C.current,panZoom:_,getTransform:()=>b.getState().transform,getViewScale:()=>U.current}),()=>{var J;(J=P.current)==null||J.destroy()}},[_]),S.useEffect(()=>{var J;(J=P.current)==null||J.update({translateExtent:V,width:T,height:H,inversePan:E,pannable:u,zoomStep:w,zoomable:y})},[u,y,E,w,V,T,H]);const Y=a?J=>{var oe;const[B,q]=((oe=P.current)==null?void 0:oe.pointer(J))||[0,0];a(J,{x:B,y:q})}:void 0,te=d?S.useCallback((J,B)=>{const q=b.getState().nodeLookup.get(B);d(J,q)},[]):void 0;return p.jsx(Ke,{position:r,style:{...e,"--xy-minimap-background-color-props":typeof g=="string"?g:void 0,"--xy-minimap-mask-background-color-props":typeof h=="string"?h:void 0,"--xy-minimap-mask-stroke-color-props":typeof m=="string"?m:void 0,"--xy-minimap-mask-stroke-width-props":typeof s=="number"?s*N:void 0,"--xy-minimap-node-background-color-props":typeof o=="string"?o:void 0,"--xy-minimap-node-stroke-color-props":typeof n=="string"?n:void 0,"--xy-minimap-node-stroke-width-props":typeof l=="string"?l:void 0},className:ee(["react-flow__minimap",t]),"data-testid":"rf__minimap",children:p.jsxs("svg",{width:z,height:L,viewBox:`${O} ${Z} ${W} ${Q}`,className:"react-flow__minimap-svg",role:"img","aria-labelledby":G,ref:C,onClick:Y,children:[x&&p.jsx("title",{id:G,children:x}),p.jsx(Li,{onClick:te,nodeColor:o,nodeStrokeColor:n,nodeBorderRadius:i,nodeClassName:c,nodeStrokeWidth:l,nodeComponent:f}),p.jsx("path",{className:"react-flow__minimap-mask",d:`M${O-R},${Z-R}h${W+R*2}v${Q+R*2}h${-W-R*2}z
        M${I.x},${I.y}h${I.width}v${I.height}h${-I.width}z`,fillRule:"evenodd",pointerEvents:"none"})]})})}Rn.displayName="MiniMap";S.memo(Rn);function Bi({nodeId:e,position:t,variant:n=$e.Handle,className:o,style:c={},children:i,color:l,minWidth:f=10,minHeight:g=10,maxWidth:h=Number.MAX_VALUE,maxHeight:m=Number.MAX_VALUE,keepAspectRatio:s=!1,shouldResize:r,onResizeStart:a,onResize:d,onResizeEnd:u}){const y=pn(),x=typeof e=="string"?e:y,E=X(),w=S.useRef(null),v=n===$e.Line?"right":"bottom-right",b=t??v,C=S.useRef(null);S.useEffect(()=>{if(!(!w.current||!x))return C.current||(C.current=To({domNode:w.current,nodeId:x,getStoreItems:()=>{const{nodeLookup:_,transform:V,snapGrid:T,snapToGrid:H,nodeOrigin:z,domNode:L}=E.getState();return{nodeLookup:_,transform:V,snapGrid:T,snapToGrid:H,nodeOrigin:z,paneDomNode:L}},onChange:(_,V)=>{const{triggerNodeChanges:T,nodeLookup:H,parentLookup:z,nodeOrigin:L}=E.getState(),M=[],D={x:_.x,y:_.y},N=H.get(x);if(N&&N.expandParent&&N.parentId){const A=N.origin??L,$=_.width??N.measured.width,R=_.height??N.measured.height,O={id:N.id,parentId:N.parentId,rect:{width:$,height:R,...Tt({x:_.x??N.position.x,y:_.y??N.position.y},{width:$,height:R},N.parentId,H,A)}},Z=Zt([O],H,z,L);M.push(...Z),D.x=_.x?Math.max(A[0]*$,_.x):void 0,D.y=_.y?Math.max(A[1]*R,_.y):void 0}if(D.x!==void 0&&D.y!==void 0){const A={id:x,type:"position",position:{...D}};M.push(A)}if(_.width!==void 0&&_.height!==void 0){const A={id:x,type:"dimensions",resizing:!0,setAttributes:!0,dimensions:{width:_.width,height:_.height}};M.push(A)}for(const A of V){const $={...A,type:"position"};M.push($)}T(M)},onEnd:()=>{const _={id:x,type:"dimensions",resizing:!1};E.getState().triggerNodeChanges([_])}})),C.current.update({controlPosition:b,boundaries:{minWidth:f,minHeight:g,maxWidth:h,maxHeight:m},keepAspectRatio:s,onResizeStart:a,onResize:d,onResizeEnd:u,shouldResize:r}),()=>{var _;(_=C.current)==null||_.destroy()}},[b,f,g,h,m,s,a,d,u,r]);const k=b.split("-"),I=n===$e.Line?"borderColor":"backgroundColor",j=l?{...c,[I]:l}:c;return p.jsx("div",{className:ee(["react-flow__resize-control","nodrag",...k,n,o]),ref:w,style:j,children:i})}S.memo(Bi);const Fi=({nodes:e,edges:t,useMockData:n=!1})=>{const o=n&&!e?us:e,c=n&&!t?fs:t;return p.jsxs(hi,{nodes:o,edges:c,fitView:!0,children:[p.jsx(_i,{showInteractive:!1}),p.jsx(Si,{})]})},Oi="_container_184c8_1",Hi="_title_184c8_9",Ti="_graphContainer_184c8_14",Zi="_error_184c8_24",Wi="_mockButton_184c8_36",de={container:Oi,title:Hi,graphContainer:Ti,error:Zi,mockButton:Wi},qi=()=>{const[e,t]=S.useState(null),[n,o]=S.useState(null),[c,i]=S.useState(!1),[l,f]=S.useState(!1);S.useEffect(()=>{(async()=>{i(!0),f(!1);try{const m=await hs.getMindMap(),s=gs(m);t(s),o(null)}catch(m){o("Failed to load mind map"),console.error(m)}finally{i(!1)}})()},[]);const g=()=>{f(!0),o(null)};return c?p.jsx(ps,{}):n?p.jsx("div",{className:de.container,children:p.jsxs("div",{className:de.error,children:[n,p.jsx("button",{className:de.mockButton,onClick:g,children:"Отрисовать фолбечные данные"})]})}):p.jsxs("div",{className:de.container,children:[p.jsx("h1",{className:de.title,children:"Семантический граф терминов:"}),p.jsx("div",{className:de.graphContainer,children:p.jsx(Fi,{nodes:e==null?void 0:e.nodes,edges:e==null?void 0:e.edges,useMockData:l})})]})};export{qi as default};
